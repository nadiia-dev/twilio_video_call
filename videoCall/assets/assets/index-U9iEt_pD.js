(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function h(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(c){if(c.ep)return;c.ep=!0;const i=h(c);fetch(c.href,i)}})();function Gw(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Of={exports:{}},vo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function Qw(){if(jm)return vo;jm=1;var d=Symbol.for("react.transitional.element"),v=Symbol.for("react.fragment");function h(u,c,i){var a=null;if(i!==void 0&&(a=""+i),c.key!==void 0&&(a=""+c.key),"key"in c){i={};for(var o in c)o!=="key"&&(i[o]=c[o])}else i=c;return c=i.ref,{$$typeof:d,type:u,key:a,ref:c!==void 0?c:null,props:i}}return vo.Fragment=v,vo.jsx=h,vo.jsxs=h,vo}var Nm;function Yw(){return Nm||(Nm=1,Of.exports=Qw()),Of.exports}var Yt=Yw(),Rf={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Kw(){if(qm)return Ye;qm=1;var d=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function g(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function b(A,x,L){this.props=A,this.context=x,this.refs=E,this.updater=L||w}b.prototype.isReactComponent={},b.prototype.setState=function(A,x){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,x,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=b.prototype;function N(A,x,L){this.props=A,this.context=x,this.refs=E,this.updater=L||w}var P=N.prototype=new C;P.constructor=N,_(P,b.prototype),P.isPureReactComponent=!0;var R=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function T(A,x,L,I,W,ie){return L=ie.ref,{$$typeof:d,type:A,key:x,ref:L!==void 0?L:null,props:ie}}function O(A,x){return T(A.type,x,void 0,void 0,void 0,A.props)}function q(A){return typeof A=="object"&&A!==null&&A.$$typeof===d}function U(A){var x={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(L){return x[L]})}var F=/\/+/g;function G(A,x){return typeof A=="object"&&A!==null&&A.key!=null?U(""+A.key):x.toString(36)}function B(){}function z(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(B,B):(A.status="pending",A.then(function(x){A.status==="pending"&&(A.status="fulfilled",A.value=x)},function(x){A.status==="pending"&&(A.status="rejected",A.reason=x)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function D(A,x,L,I,W){var ie=typeof A;(ie==="undefined"||ie==="boolean")&&(A=null);var $=!1;if(A===null)$=!0;else switch(ie){case"bigint":case"string":case"number":$=!0;break;case"object":switch(A.$$typeof){case d:case v:$=!0;break;case p:return $=A._init,D($(A._payload),x,L,I,W)}}if($)return W=W(A),$=I===""?"."+G(A,0):I,R(W)?(L="",$!=null&&(L=$.replace(F,"$&/")+"/"),D(W,x,L,"",function(Te){return Te})):W!=null&&(q(W)&&(W=O(W,L+(W.key==null||A&&A.key===W.key?"":(""+W.key).replace(F,"$&/")+"/")+$)),x.push(W)),1;$=0;var ae=I===""?".":I+":";if(R(A))for(var pe=0;pe<A.length;pe++)I=A[pe],ie=ae+G(I,pe),$+=D(I,x,L,ie,W);else if(pe=g(A),typeof pe=="function")for(A=pe.call(A),pe=0;!(I=A.next()).done;)I=I.value,ie=ae+G(I,pe++),$+=D(I,x,L,ie,W);else if(ie==="object"){if(typeof A.then=="function")return D(z(A),x,L,I,W);throw x=String(A),Error("Objects are not valid as a React child (found: "+(x==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":x)+"). If you meant to render a collection of children, use an array instead.")}return $}function j(A,x,L){if(A==null)return A;var I=[],W=0;return D(A,I,"","",function(ie){return x.call(L,ie,W++)}),I}function Q(A){if(A._status===-1){var x=A._result;x=x(),x.then(function(L){(A._status===0||A._status===-1)&&(A._status=1,A._result=L)},function(L){(A._status===0||A._status===-1)&&(A._status=2,A._result=L)}),A._status===-1&&(A._status=0,A._result=x)}if(A._status===1)return A._result.default;throw A._result}var Z=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function K(){}return Ye.Children={map:j,forEach:function(A,x,L){j(A,function(){x.apply(this,arguments)},L)},count:function(A){var x=0;return j(A,function(){x++}),x},toArray:function(A){return j(A,function(x){return x})||[]},only:function(A){if(!q(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Ye.Component=b,Ye.Fragment=h,Ye.Profiler=c,Ye.PureComponent=N,Ye.StrictMode=u,Ye.Suspense=l,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(A){return k.H.useMemoCache(A)}},Ye.cache=function(A){return function(){return A.apply(null,arguments)}},Ye.cloneElement=function(A,x,L){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var I=_({},A.props),W=A.key,ie=void 0;if(x!=null)for($ in x.ref!==void 0&&(ie=void 0),x.key!==void 0&&(W=""+x.key),x)!S.call(x,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&x.ref===void 0||(I[$]=x[$]);var $=arguments.length-2;if($===1)I.children=L;else if(1<$){for(var ae=Array($),pe=0;pe<$;pe++)ae[pe]=arguments[pe+2];I.children=ae}return T(A.type,W,void 0,void 0,ie,I)},Ye.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:i,_context:A},A},Ye.createElement=function(A,x,L){var I,W={},ie=null;if(x!=null)for(I in x.key!==void 0&&(ie=""+x.key),x)S.call(x,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(W[I]=x[I]);var $=arguments.length-2;if($===1)W.children=L;else if(1<$){for(var ae=Array($),pe=0;pe<$;pe++)ae[pe]=arguments[pe+2];W.children=ae}if(A&&A.defaultProps)for(I in $=A.defaultProps,$)W[I]===void 0&&(W[I]=$[I]);return T(A,ie,void 0,void 0,null,W)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(A){return{$$typeof:o,render:A}},Ye.isValidElement=q,Ye.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:Q}},Ye.memo=function(A,x){return{$$typeof:f,type:A,compare:x===void 0?null:x}},Ye.startTransition=function(A){var x=k.T,L={};k.T=L;try{var I=A(),W=k.S;W!==null&&W(L,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(K,Z)}catch(ie){Z(ie)}finally{k.T=x}},Ye.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ye.use=function(A){return k.H.use(A)},Ye.useActionState=function(A,x,L){return k.H.useActionState(A,x,L)},Ye.useCallback=function(A,x){return k.H.useCallback(A,x)},Ye.useContext=function(A){return k.H.useContext(A)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(A,x){return k.H.useDeferredValue(A,x)},Ye.useEffect=function(A,x,L){var I=k.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(A,x)},Ye.useId=function(){return k.H.useId()},Ye.useImperativeHandle=function(A,x,L){return k.H.useImperativeHandle(A,x,L)},Ye.useInsertionEffect=function(A,x){return k.H.useInsertionEffect(A,x)},Ye.useLayoutEffect=function(A,x){return k.H.useLayoutEffect(A,x)},Ye.useMemo=function(A,x){return k.H.useMemo(A,x)},Ye.useOptimistic=function(A,x){return k.H.useOptimistic(A,x)},Ye.useReducer=function(A,x,L){return k.H.useReducer(A,x,L)},Ye.useRef=function(A){return k.H.useRef(A)},Ye.useState=function(A){return k.H.useState(A)},Ye.useSyncExternalStore=function(A,x,L){return k.H.useSyncExternalStore(A,x,L)},Ye.useTransition=function(){return k.H.useTransition()},Ye.version="19.1.0",Ye}var Um;function zd(){return Um||(Um=1,Rf.exports=Kw()),Rf.exports}var Ei=zd(),Cf={exports:{}},ho={},Af={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function Xw(){return Bm||(Bm=1,function(d){function v(j,Q){var Z=j.length;j.push(Q);e:for(;0<Z;){var K=Z-1>>>1,A=j[K];if(0<c(A,Q))j[K]=Q,j[Z]=A,Z=K;else break e}}function h(j){return j.length===0?null:j[0]}function u(j){if(j.length===0)return null;var Q=j[0],Z=j.pop();if(Z!==Q){j[0]=Z;e:for(var K=0,A=j.length,x=A>>>1;K<x;){var L=2*(K+1)-1,I=j[L],W=L+1,ie=j[W];if(0>c(I,Z))W<A&&0>c(ie,I)?(j[K]=ie,j[W]=Z,K=W):(j[K]=I,j[L]=Z,K=L);else if(W<A&&0>c(ie,Z))j[K]=ie,j[W]=Z,K=W;else break e}}return Q}function c(j,Q){var Z=j.sortIndex-Q.sortIndex;return Z!==0?Z:j.id-Q.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;d.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();d.unstable_now=function(){return a.now()-o}}var l=[],f=[],p=1,y=null,g=3,w=!1,_=!1,E=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function R(j){for(var Q=h(f);Q!==null;){if(Q.callback===null)u(f);else if(Q.startTime<=j)u(f),Q.sortIndex=Q.expirationTime,v(l,Q);else break;Q=h(f)}}function k(j){if(E=!1,R(j),!_)if(h(l)!==null)_=!0,S||(S=!0,G());else{var Q=h(f);Q!==null&&D(k,Q.startTime-j)}}var S=!1,T=-1,O=5,q=-1;function U(){return b?!0:!(d.unstable_now()-q<O)}function F(){if(b=!1,S){var j=d.unstable_now();q=j;var Q=!0;try{e:{_=!1,E&&(E=!1,N(T),T=-1),w=!0;var Z=g;try{t:{for(R(j),y=h(l);y!==null&&!(y.expirationTime>j&&U());){var K=y.callback;if(typeof K=="function"){y.callback=null,g=y.priorityLevel;var A=K(y.expirationTime<=j);if(j=d.unstable_now(),typeof A=="function"){y.callback=A,R(j),Q=!0;break t}y===h(l)&&u(l),R(j)}else u(l);y=h(l)}if(y!==null)Q=!0;else{var x=h(f);x!==null&&D(k,x.startTime-j),Q=!1}}break e}finally{y=null,g=Z,w=!1}Q=void 0}}finally{Q?G():S=!1}}}var G;if(typeof P=="function")G=function(){P(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=F,G=function(){z.postMessage(null)}}else G=function(){C(F,0)};function D(j,Q){T=C(function(){j(d.unstable_now())},Q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(j){j.callback=null},d.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},d.unstable_getCurrentPriorityLevel=function(){return g},d.unstable_next=function(j){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Z=g;g=Q;try{return j()}finally{g=Z}},d.unstable_requestPaint=function(){b=!0},d.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=g;g=j;try{return Q()}finally{g=Z}},d.unstable_scheduleCallback=function(j,Q,Z){var K=d.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?K+Z:K):Z=K,j){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=Z+A,j={id:p++,callback:Q,priorityLevel:j,startTime:Z,expirationTime:A,sortIndex:-1},Z>K?(j.sortIndex=Z,v(f,j),h(l)===null&&j===h(f)&&(E?(N(T),T=-1):E=!0,D(k,Z-K))):(j.sortIndex=A,v(l,j),_||w||(_=!0,S||(S=!0,G()))),j},d.unstable_shouldYield=U,d.unstable_wrapCallback=function(j){var Q=g;return function(){var Z=g;g=Q;try{return j.apply(this,arguments)}finally{g=Z}}}}(Lf)),Lf}var Im;function Zw(){return Im||(Im=1,Af.exports=Xw()),Af.exports}var Pf={exports:{}},Gt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function Ww(){if(Vm)return Gt;Vm=1;var d=zd();function v(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(){}var u={d:{f:h,r:function(){throw Error(v(522))},D:h,C:h,L:h,m:h,X:h,S:h,M:h},p:0,findDOMNode:null},c=Symbol.for("react.portal");function i(l,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:l,containerInfo:f,implementation:p}}var a=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Gt.createPortal=function(l,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(v(299));return i(l,f,null,p)},Gt.flushSync=function(l){var f=a.T,p=u.p;try{if(a.T=null,u.p=2,l)return l()}finally{a.T=f,u.p=p,u.d.f()}},Gt.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,u.d.C(l,f))},Gt.prefetchDNS=function(l){typeof l=="string"&&u.d.D(l)},Gt.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var p=f.as,y=o(p,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?u.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:g,fetchPriority:w}):p==="script"&&u.d.X(l,{crossOrigin:y,integrity:g,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Gt.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=o(f.as,f.crossOrigin);u.d.M(l,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&u.d.M(l)},Gt.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=o(p,f.crossOrigin);u.d.L(l,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Gt.preloadModule=function(l,f){if(typeof l=="string")if(f){var p=o(f.as,f.crossOrigin);u.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else u.d.m(l)},Gt.requestFormReset=function(l){u.d.r(l)},Gt.unstable_batchedUpdates=function(l,f){return l(f)},Gt.useFormState=function(l,f,p){return a.H.useFormState(l,f,p)},Gt.useFormStatus=function(){return a.H.useHostTransitionStatus()},Gt.version="19.1.0",Gt}var zm;function Jw(){if(zm)return Pf.exports;zm=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(v){console.error(v)}}return d(),Pf.exports=Ww(),Pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function $w(){if(Hm)return ho;Hm=1;var d=Zw(),v=zd(),h=Jw();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function i(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function a(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o(e){if(i(e)!==e)throw Error(u(188))}function l(e){var t=e.alternate;if(!t){if(t=i(e),t===null)throw Error(u(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var m=s.alternate;if(m===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===m.child){for(m=s.child;m;){if(m===r)return o(s),e;if(m===n)return o(s),t;m=m.sibling}throw Error(u(188))}if(r.return!==n.return)r=s,n=m;else{for(var M=!1,H=s.child;H;){if(H===r){M=!0,r=s,n=m;break}if(H===n){M=!0,n=s,r=m;break}H=H.sibling}if(!M){for(H=m.child;H;){if(H===r){M=!0,r=m,n=s;break}if(H===n){M=!0,n=m,r=s;break}H=H.sibling}if(!M)throw Error(u(189))}}if(r.alternate!==n)throw Error(u(190))}if(r.tag!==3)throw Error(u(188));return r.stateNode.current===r?e:t}function f(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=f(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),P=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var B=Symbol.for("react.client.reference");function z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===B?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case S:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case P:return(e.displayName||"Context")+".Provider";case N:return(e._context.displayName||"Context")+".Consumer";case R:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch{}}return null}var D=Array.isArray,j=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=h.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},K=[],A=-1;function x(e){return{current:e}}function L(e){0>A||(e.current=K[A],K[A]=null,A--)}function I(e,t){A++,K[A]=e.current,e.current=t}var W=x(null),ie=x(null),$=x(null),ae=x(null);function pe(e,t){switch(I($,t),I(ie,e),I(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=lm(t),e=sm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(W),I(W,e)}function Te(){L(W),L(ie),L($)}function xe(e){e.memoizedState!==null&&I(ae,e);var t=W.current,r=sm(t,e.type);t!==r&&(I(ie,e),I(W,r))}function Ee(e){ie.current===e&&(L(W),L(ie)),ae.current===e&&(L(ae),uo._currentValue=Z)}var Ce=Object.prototype.hasOwnProperty,Le=d.unstable_scheduleCallback,Pe=d.unstable_cancelCallback,Oe=d.unstable_shouldYield,_e=d.unstable_requestPaint,je=d.unstable_now,Ae=d.unstable_getCurrentPriorityLevel,Qe=d.unstable_ImmediatePriority,ee=d.unstable_UserBlockingPriority,oe=d.unstable_NormalPriority,Y=d.unstable_LowPriority,V=d.unstable_IdlePriority,J=d.log,we=d.unstable_setDisableYieldValue,Re=null,De=null;function Ke(e){if(typeof J=="function"&&we(e),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Re,e)}catch{}}var Xe=Math.clz32?Math.clz32:tr,Be=Math.log,Lt=Math.LN2;function tr(e){return e>>>=0,e===0?32:31-(Be(e)/Lt|0)|0}var Dt=256,ke=4194304;function me(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function X(e,t,r){var n=e.pendingLanes;if(n===0)return 0;var s=0,m=e.suspendedLanes,M=e.pingedLanes;e=e.warmLanes;var H=n&134217727;return H!==0?(n=H&~m,n!==0?s=me(n):(M&=H,M!==0?s=me(M):r||(r=H&~e,r!==0&&(s=me(r))))):(H=n&~m,H!==0?s=me(H):M!==0?s=me(M):r||(r=n&~e,r!==0&&(s=me(r)))),s===0?0:t!==0&&t!==s&&(t&m)===0&&(m=s&-s,r=t&-t,m>=r||m===32&&(r&4194048)!==0)?t:s}function te(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function de(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ve(){var e=Dt;return Dt<<=1,(Dt&4194048)===0&&(Dt=256),e}function be(){var e=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),e}function ze(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ze(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _t(e,t,r,n,s,m){var M=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var H=e.entanglements,re=e.expirationTimes,le=e.hiddenUpdates;for(r=M&~r;0<r;){var ye=31-Xe(r),Se=1<<ye;H[ye]=0,re[ye]=-1;var se=le[ye];if(se!==null)for(le[ye]=null,ye=0;ye<se.length;ye++){var fe=se[ye];fe!==null&&(fe.lane&=-536870913)}r&=~Se}n!==0&&mt(e,n,0),m!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=m&~(M&~t))}function mt(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Xe(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|r&4194090}function rt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xe(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}function at(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function st(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:Am(e.type))}function Bt(e,t){var r=Q.p;try{return Q.p=e,t()}finally{Q.p=r}}var Zt=Math.random().toString(36).slice(2),jt="__reactFiber$"+Zt,Pt="__reactProps$"+Zt,mr="__reactContainer$"+Zt,Pi="__reactEvents$"+Zt,_l="__reactListeners$"+Zt,ga="__reactHandles$"+Zt,Xn="__reactResources$"+Zt,Or="__reactMarker$"+Zt;function Fr(e){delete e[jt],delete e[Pt],delete e[Pi],delete e[_l],delete e[ga]}function Gr(e){var t=e[jt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mr]||r[jt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hm(e);e!==null;){if(r=e[jt])return r;e=hm(e)}return t}e=r,r=e.parentNode}return null}function Rr(e){if(e=e[jt]||e[mr]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Cr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Ar(e){var t=e[Xn];return t||(t=e[Xn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function gt(e){e[Or]=!0}var Mi=new Set,rr={};function It(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(rr[e]=t,e=0;e<t.length;e++)Mi.add(t[e])}var qb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vu={},tv={};function Ub(e){return Ce.call(tv,e)?!0:Ce.call(Vu,e)?!1:qb.test(e)?tv[e]=!0:(Vu[e]=!0,!1)}function zu(e,t,r){if(Ub(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Hu(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Qr(e,t,r,n){if(n===null)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+n)}}var gl,rv;function xi(e){if(gl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);gl=t&&t[1]||"",rv=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gl+e+rv}var Sl=!1;function bl(e,t){if(!e||Sl)return"";Sl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(fe){var se=fe}Reflect.construct(e,[],Se)}else{try{Se.call()}catch(fe){se=fe}e.call(Se.prototype)}}else{try{throw Error()}catch(fe){se=fe}(Se=e())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(fe){if(fe&&se&&typeof fe.stack=="string")return[fe.stack,se.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=n.DetermineComponentFrameRoot(),M=m[0],H=m[1];if(M&&H){var re=M.split(`
`),le=H.split(`
`);for(s=n=0;n<re.length&&!re[n].includes("DetermineComponentFrameRoot");)n++;for(;s<le.length&&!le[s].includes("DetermineComponentFrameRoot");)s++;if(n===re.length||s===le.length)for(n=re.length-1,s=le.length-1;1<=n&&0<=s&&re[n]!==le[s];)s--;for(;1<=n&&0<=s;n--,s--)if(re[n]!==le[s]){if(n!==1||s!==1)do if(n--,s--,0>s||re[n]!==le[s]){var ye=`
`+re[n].replace(" at new "," at ");return e.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",e.displayName)),ye}while(1<=n&&0<=s);break}}}finally{Sl=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?xi(r):""}function Bb(e){switch(e.tag){case 26:case 27:case 5:return xi(e.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return bl(e.type,!1);case 11:return bl(e.type.render,!1);case 1:return bl(e.type,!0);case 31:return xi("Activity");default:return""}}function nv(e){try{var t="";do t+=Bb(e),e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function yr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ib(e){var t=iv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,m=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(M){n=""+M,m.call(this,M)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(M){n=""+M},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fu(e){e._valueTracker||(e._valueTracker=Ib(e))}function av(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=iv(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vb=/[\n"\\]/g;function _r(e){return e.replace(Vb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tl(e,t,r,n,s,m,M,H){e.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.type=M:e.removeAttribute("type"),t!=null?M==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+yr(t)):e.value!==""+yr(t)&&(e.value=""+yr(t)):M!=="submit"&&M!=="reset"||e.removeAttribute("value"),t!=null?wl(e,M,yr(t)):r!=null?wl(e,M,yr(r)):n!=null&&e.removeAttribute("value"),s==null&&m!=null&&(e.defaultChecked=!!m),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?e.name=""+yr(H):e.removeAttribute("name")}function ov(e,t,r,n,s,m,M,H){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||t!=null))return;r=r!=null?""+yr(r):"",t=t!=null?""+yr(t):r,H||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=H?e.checked:!!n,e.defaultChecked=!!n,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(e.name=M)}function wl(e,t,r){t==="number"&&Gu(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Di(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+yr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function uv(e,t,r){if(t!=null&&(t=""+yr(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+yr(r):""}function cv(e,t,r,n){if(t==null){if(n!=null){if(r!=null)throw Error(u(92));if(D(n)){if(1<n.length)throw Error(u(93));n=n[0]}r=n}r==null&&(r=""),t=r}r=yr(t),e.defaultValue=r,n=e.textContent,n===r&&n!==""&&n!==null&&(e.value=n)}function ji(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var zb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lv(e,t,r){var n=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,r):typeof r!="number"||r===0||zb.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function sv(e,t,r){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&r[s]!==n&&lv(e,s,n)}else for(var m in t)t.hasOwnProperty(m)&&lv(e,m,t[m])}function kl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qu(e){return Fb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var El=null;function Ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ni=null,qi=null;function fv(e){var t=Rr(e);if(t&&(e=t.stateNode)){var r=e[Pt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Tl(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+_r(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=n[Pt]||null;if(!s)throw Error(u(90));Tl(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<r.length;t++)n=r[t],n.form===e.form&&av(n)}break e;case"textarea":uv(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Di(e,!!r.multiple,t,!1)}}}var Rl=!1;function dv(e,t,r){if(Rl)return e(t,r);Rl=!0;try{var n=e(t);return n}finally{if(Rl=!1,(Ni!==null||qi!==null)&&(Pc(),Ni&&(t=Ni,e=qi,qi=Ni=null,fv(t),e)))for(t=0;t<e.length;t++)fv(e[t])}}function Sa(e,t){var r=e.stateNode;if(r===null)return null;var n=r[Pt]||null;if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(u(231,t,typeof r));return r}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cl=!1;if(Yr)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){Cl=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{Cl=!1}var Rn=null,Al=null,Yu=null;function vv(){if(Yu)return Yu;var e,t=Al,r=t.length,n,s="value"in Rn?Rn.value:Rn.textContent,m=s.length;for(e=0;e<r&&t[e]===s[e];e++);var M=r-e;for(n=1;n<=M&&t[r-n]===s[m-n];n++);return Yu=s.slice(e,1<n?1-n:void 0)}function Ku(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xu(){return!0}function hv(){return!1}function nr(e){function t(r,n,s,m,M){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=m,this.target=M,this.currentTarget=null;for(var H in e)e.hasOwnProperty(H)&&(r=e[H],this[H]=r?r(m):m[H]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xu:hv,this.isPropagationStopped=hv,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),t}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=nr(Zn),Ta=p({},Zn,{view:0,detail:0}),Gb=nr(Ta),Ll,Pl,wa,Wu=p({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(Ll=e.screenX-wa.screenX,Pl=e.screenY-wa.screenY):Pl=Ll=0,wa=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),pv=nr(Wu),Qb=p({},Wu,{dataTransfer:0}),Yb=nr(Qb),Kb=p({},Ta,{relatedTarget:0}),Ml=nr(Kb),Xb=p({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=nr(Xb),Wb=p({},Zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jb=nr(Wb),$b=p({},Zn,{data:0}),mv=nr($b),eT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rT[e])?!!t[e]:!1}function xl(){return nT}var iT=p({},Ta,{key:function(e){if(e.key){var t=eT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ku(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xl,charCode:function(e){return e.type==="keypress"?Ku(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ku(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aT=nr(iT),oT=p({},Wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yv=nr(oT),uT=p({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xl}),cT=nr(uT),lT=p({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),sT=nr(lT),fT=p({},Wu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dT=nr(fT),vT=p({},Zn,{newState:0,oldState:0}),hT=nr(vT),pT=[9,13,27,32],Dl=Yr&&"CompositionEvent"in window,ka=null;Yr&&"documentMode"in document&&(ka=document.documentMode);var mT=Yr&&"TextEvent"in window&&!ka,_v=Yr&&(!Dl||ka&&8<ka&&11>=ka),gv=" ",Sv=!1;function bv(e,t){switch(e){case"keyup":return pT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ui=!1;function yT(e,t){switch(e){case"compositionend":return Tv(t);case"keypress":return t.which!==32?null:(Sv=!0,gv);case"textInput":return e=t.data,e===gv&&Sv?null:e;default:return null}}function _T(e,t){if(Ui)return e==="compositionend"||!Dl&&bv(e,t)?(e=vv(),Yu=Al=Rn=null,Ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _v&&t.locale!=="ko"?null:t.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gT[e.type]:t==="textarea"}function kv(e,t,r,n){Ni?qi?qi.push(n):qi=[n]:Ni=n,t=qc(t,"onChange"),0<t.length&&(r=new Zu("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ea=null,Oa=null;function ST(e){im(e,0)}function Ju(e){var t=Cr(e);if(av(t))return e}function Ev(e,t){if(e==="change")return t}var Ov=!1;if(Yr){var jl;if(Yr){var Nl="oninput"in document;if(!Nl){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),Nl=typeof Rv.oninput=="function"}jl=Nl}else jl=!1;Ov=jl&&(!document.documentMode||9<document.documentMode)}function Cv(){Ea&&(Ea.detachEvent("onpropertychange",Av),Oa=Ea=null)}function Av(e){if(e.propertyName==="value"&&Ju(Oa)){var t=[];kv(t,Oa,e,Ol(e)),dv(ST,t)}}function bT(e,t,r){e==="focusin"?(Cv(),Ea=t,Oa=r,Ea.attachEvent("onpropertychange",Av)):e==="focusout"&&Cv()}function TT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ju(Oa)}function wT(e,t){if(e==="click")return Ju(t)}function kT(e,t){if(e==="input"||e==="change")return Ju(t)}function ET(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lr=typeof Object.is=="function"?Object.is:ET;function Ra(e,t){if(lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ce.call(t,s)||!lr(e[s],t[s]))return!1}return!0}function Lv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pv(e,t){var r=Lv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lv(r)}}function Mv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gu(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Gu(e.document)}return t}function ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var OT=Yr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Ul=null,Ca=null,Bl=!1;function Dv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bl||Bi==null||Bi!==Gu(n)||(n=Bi,"selectionStart"in n&&ql(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ca&&Ra(Ca,n)||(Ca=n,n=qc(Ul,"onSelect"),0<n.length&&(t=new Zu("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Bi)))}function Wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ii={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},Il={},jv={};Yr&&(jv=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Jn(e){if(Il[e])return Il[e];if(!Ii[e])return e;var t=Ii[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jv)return Il[e]=t[r];return e}var Nv=Jn("animationend"),qv=Jn("animationiteration"),Uv=Jn("animationstart"),RT=Jn("transitionrun"),CT=Jn("transitionstart"),AT=Jn("transitioncancel"),Bv=Jn("transitionend"),Iv=new Map,Vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vl.push("scrollEnd");function Lr(e,t){Iv.set(e,t),It(t,[e])}var Vv=new WeakMap;function gr(e,t){if(typeof e=="object"&&e!==null){var r=Vv.get(e);return r!==void 0?r:(t={value:e,source:t,stack:nv(t)},Vv.set(e,t),t)}return{value:e,source:t,stack:nv(t)}}var Sr=[],Vi=0,zl=0;function $u(){for(var e=Vi,t=zl=Vi=0;t<e;){var r=Sr[t];Sr[t++]=null;var n=Sr[t];Sr[t++]=null;var s=Sr[t];Sr[t++]=null;var m=Sr[t];if(Sr[t++]=null,n!==null&&s!==null){var M=n.pending;M===null?s.next=s:(s.next=M.next,M.next=s),n.pending=s}m!==0&&zv(r,s,m)}}function ec(e,t,r,n){Sr[Vi++]=e,Sr[Vi++]=t,Sr[Vi++]=r,Sr[Vi++]=n,zl|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Hl(e,t,r,n){return ec(e,t,r,n),tc(e)}function zi(e,t){return ec(e,null,null,t),tc(e)}function zv(e,t,r){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r);for(var s=!1,m=e.return;m!==null;)m.childLanes|=r,n=m.alternate,n!==null&&(n.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(s=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,s&&t!==null&&(s=31-Xe(r),e=m.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=r|536870912),m):null}function tc(e){if(50<$a)throw $a=0,Xs=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hi={};function LT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,r,n){return new LT(e,t,r,n)}function Fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kr(e,t){var r=e.alternate;return r===null?(r=sr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Hv(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function rc(e,t,r,n,s,m){var M=0;if(n=e,typeof e=="function")Fl(e)&&(M=1);else if(typeof e=="string")M=Mw(e,r,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=sr(31,r,t,s),e.elementType=q,e.lanes=m,e;case _:return $n(r.children,s,m,t);case E:M=8,s|=24;break;case b:return e=sr(12,r,t,s|2),e.elementType=b,e.lanes=m,e;case k:return e=sr(13,r,t,s),e.elementType=k,e.lanes=m,e;case S:return e=sr(19,r,t,s),e.elementType=S,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:case P:M=10;break e;case N:M=9;break e;case R:M=11;break e;case T:M=14;break e;case O:M=16,n=null;break e}M=29,r=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=sr(M,r,t,s),t.elementType=e,t.type=n,t.lanes=m,t}function $n(e,t,r,n){return e=sr(7,e,n,t),e.lanes=r,e}function Gl(e,t,r){return e=sr(6,e,null,t),e.lanes=r,e}function Ql(e,t,r){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fi=[],Gi=0,nc=null,ic=0,br=[],Tr=0,ei=null,Xr=1,Zr="";function ti(e,t){Fi[Gi++]=ic,Fi[Gi++]=nc,nc=e,ic=t}function Fv(e,t,r){br[Tr++]=Xr,br[Tr++]=Zr,br[Tr++]=ei,ei=e;var n=Xr;e=Zr;var s=32-Xe(n)-1;n&=~(1<<s),r+=1;var m=32-Xe(t)+s;if(30<m){var M=s-s%5;m=(n&(1<<M)-1).toString(32),n>>=M,s-=M,Xr=1<<32-Xe(t)+s|r<<s|n,Zr=m+e}else Xr=1<<m|r<<s|n,Zr=e}function Yl(e){e.return!==null&&(ti(e,1),Fv(e,1,0))}function Kl(e){for(;e===nc;)nc=Fi[--Gi],Fi[Gi]=null,ic=Fi[--Gi],Fi[Gi]=null;for(;e===ei;)ei=br[--Tr],br[Tr]=null,Zr=br[--Tr],br[Tr]=null,Xr=br[--Tr],br[Tr]=null}var Wt=null,Tt=null,ot=!1,ri=null,Ur=!1,Xl=Error(u(519));function ni(e){var t=Error(u(418,""));throw Pa(gr(t,e)),Xl}function Gv(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[jt]=e,t[Pt]=n,r){case"dialog":et("cancel",t),et("close",t);break;case"iframe":case"object":case"embed":et("load",t);break;case"video":case"audio":for(r=0;r<to.length;r++)et(to[r],t);break;case"source":et("error",t);break;case"img":case"image":case"link":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"input":et("invalid",t),ov(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Fu(t);break;case"select":et("invalid",t);break;case"textarea":et("invalid",t),cv(t,n.value,n.defaultValue,n.children),Fu(t)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||n.suppressHydrationWarning===!0||cm(t.textContent,r)?(n.popover!=null&&(et("beforetoggle",t),et("toggle",t)),n.onScroll!=null&&et("scroll",t),n.onScrollEnd!=null&&et("scrollend",t),n.onClick!=null&&(t.onclick=Uc),t=!0):t=!1,t||ni(e)}function Qv(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:Wt=Wt.return}}function Aa(e){if(e!==Wt)return!1;if(!ot)return Qv(e),ot=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||df(e.type,e.memoizedProps)),r=!r),r&&Tt&&ni(e),Qv(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(t===0){Tt=Mr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++;e=e.nextSibling}Tt=null}}else t===27?(t=Tt,Hn(e.type)?(e=mf,mf=null,Tt=e):Tt=t):Tt=Wt?Mr(e.stateNode.nextSibling):null;return!0}function La(){Tt=Wt=null,ot=!1}function Yv(){var e=ri;return e!==null&&(or===null?or=e:or.push.apply(or,e),ri=null),e}function Pa(e){ri===null?ri=[e]:ri.push(e)}var Zl=x(null),ii=null,Wr=null;function Cn(e,t,r){I(Zl,t._currentValue),t._currentValue=r}function Jr(e){e._currentValue=Zl.current,L(Zl)}function Wl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Jl(e,t,r,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var m=s.dependencies;if(m!==null){var M=s.child;m=m.firstContext;e:for(;m!==null;){var H=m;m=s;for(var re=0;re<t.length;re++)if(H.context===t[re]){m.lanes|=r,H=m.alternate,H!==null&&(H.lanes|=r),Wl(m.return,r,e),n||(M=null);break e}m=H.next}}else if(s.tag===18){if(M=s.return,M===null)throw Error(u(341));M.lanes|=r,m=M.alternate,m!==null&&(m.lanes|=r),Wl(M,r,e),M=null}else M=s.child;if(M!==null)M.return=s;else for(M=s;M!==null;){if(M===e){M=null;break}if(s=M.sibling,s!==null){s.return=M.return,M=s;break}M=M.return}s=M}}function Ma(e,t,r,n){e=null;for(var s=t,m=!1;s!==null;){if(!m){if((s.flags&524288)!==0)m=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var M=s.alternate;if(M===null)throw Error(u(387));if(M=M.memoizedProps,M!==null){var H=s.type;lr(s.pendingProps.value,M.value)||(e!==null?e.push(H):e=[H])}}else if(s===ae.current){if(M=s.alternate,M===null)throw Error(u(387));M.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(uo):e=[uo])}s=s.return}e!==null&&Jl(t,e,r,n),t.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!lr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ai(e){ii=e,Wr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ft(e){return Kv(ii,e)}function oc(e,t){return ii===null&&ai(e),Kv(e,t)}function Kv(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},Wr===null){if(e===null)throw Error(u(308));Wr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wr=Wr.next=t;return r}var PT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},MT=d.unstable_scheduleCallback,xT=d.unstable_NormalPriority,Mt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $l(){return{controller:new PT,data:new Map,refCount:0}}function xa(e){e.refCount--,e.refCount===0&&MT(xT,function(){e.controller.abort()})}var Da=null,es=0,Qi=0,Yi=null;function DT(e,t){if(Da===null){var r=Da=[];es=0,Qi=rf(),Yi={status:"pending",value:void 0,then:function(n){r.push(n)}}}return es++,t.then(Xv,Xv),t}function Xv(){if(--es===0&&Da!==null){Yi!==null&&(Yi.status="fulfilled");var e=Da;Da=null,Qi=0,Yi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jT(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(s){r.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<r.length;s++)(0,r[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<r.length;s++)(0,r[s])(void 0)}),n}var Zv=j.S;j.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&DT(e,t),Zv!==null&&Zv(e,t)};var oi=x(null);function ts(){var e=oi.current;return e!==null?e:yt.pooledCache}function uc(e,t){t===null?I(oi,oi.current):I(oi,t.pool)}function Wv(){var e=ts();return e===null?null:{parent:Mt._currentValue,pool:e}}var ja=Error(u(460)),Jv=Error(u(474)),cc=Error(u(542)),rs={then:function(){}};function $v(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lc(){}function eh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(lc,lc),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rh(e),e;default:if(typeof t.status=="string")t.then(lc,lc);else{if(e=yt,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rh(e),e}throw Na=t,ja}}var Na=null;function th(){if(Na===null)throw Error(u(459));var e=Na;return Na=null,e}function rh(e){if(e===ja||e===cc)throw Error(u(483))}var An=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ln(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ct&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=tc(e),zv(e,null,r),t}return ec(e,n,t,r),tc(e)}function qa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rt(e,r)}}function as(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var M={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?s=m=M:m=m.next=M,r=r.next}while(r!==null);m===null?s=m=t:m=m.next=t}else s=m=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:m,shared:n.shared,callbacks:n.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var os=!1;function Ua(){if(os){var e=Yi;if(e!==null)throw e}}function Ba(e,t,r,n){os=!1;var s=e.updateQueue;An=!1;var m=s.firstBaseUpdate,M=s.lastBaseUpdate,H=s.shared.pending;if(H!==null){s.shared.pending=null;var re=H,le=re.next;re.next=null,M===null?m=le:M.next=le,M=re;var ye=e.alternate;ye!==null&&(ye=ye.updateQueue,H=ye.lastBaseUpdate,H!==M&&(H===null?ye.firstBaseUpdate=le:H.next=le,ye.lastBaseUpdate=re))}if(m!==null){var Se=s.baseState;M=0,ye=le=re=null,H=m;do{var se=H.lane&-536870913,fe=se!==H.lane;if(fe?(tt&se)===se:(n&se)===se){se!==0&&se===Qi&&(os=!0),ye!==null&&(ye=ye.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ve=e,Ue=H;se=t;var vt=r;switch(Ue.tag){case 1:if(Ve=Ue.payload,typeof Ve=="function"){Se=Ve.call(vt,Se,se);break e}Se=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ue.payload,se=typeof Ve=="function"?Ve.call(vt,Se,se):Ve,se==null)break e;Se=p({},Se,se);break e;case 2:An=!0}}se=H.callback,se!==null&&(e.flags|=64,fe&&(e.flags|=8192),fe=s.callbacks,fe===null?s.callbacks=[se]:fe.push(se))}else fe={lane:se,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ye===null?(le=ye=fe,re=Se):ye=ye.next=fe,M|=se;if(H=H.next,H===null){if(H=s.shared.pending,H===null)break;fe=H,H=fe.next,fe.next=null,s.lastBaseUpdate=fe,s.shared.pending=null}}while(!0);ye===null&&(re=Se),s.baseState=re,s.firstBaseUpdate=le,s.lastBaseUpdate=ye,m===null&&(s.shared.lanes=0),Bn|=M,e.lanes=M,e.memoizedState=Se}}function nh(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function ih(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)nh(r[e],t)}var Ki=x(null),sc=x(0);function ah(e,t){e=on,I(sc,e),I(Ki,t),on=e|t.baseLanes}function us(){I(sc,on),I(Ki,Ki.current)}function cs(){on=sc.current,L(Ki),L(sc)}var Mn=0,We=null,ft=null,Rt=null,fc=!1,Xi=!1,ui=!1,dc=0,Ia=0,Zi=null,NT=0;function kt(){throw Error(u(321))}function ls(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lr(e[r],t[r]))return!1;return!0}function ss(e,t,r,n,s,m){return Mn=m,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?zh:Hh,ui=!1,m=r(n,s),ui=!1,Xi&&(m=uh(t,r,n,s)),oh(e),m}function oh(e){j.H=_c;var t=ft!==null&&ft.next!==null;if(Mn=0,Rt=ft=We=null,fc=!1,Ia=0,Zi=null,t)throw Error(u(300));e===null||Nt||(e=e.dependencies,e!==null&&ac(e)&&(Nt=!0))}function uh(e,t,r,n){We=e;var s=0;do{if(Xi&&(Zi=null),Ia=0,Xi=!1,25<=s)throw Error(u(301));if(s+=1,Rt=ft=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=HT,m=t(r,n)}while(Xi);return m}function qT(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?Va(t):t,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(We.flags|=1024),t}function fs(){var e=dc!==0;return dc=0,e}function ds(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function vs(e){if(fc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fc=!1}Mn=0,Rt=ft=We=null,Xi=!1,Ia=dc=0,Zi=null}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?We.memoizedState=Rt=e:Rt=Rt.next=e,Rt}function Ct(){if(ft===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=Rt===null?We.memoizedState:Rt.next;if(t!==null)Rt=t,ft=e;else{if(e===null)throw We.alternate===null?Error(u(467)):Error(u(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Rt===null?We.memoizedState=Rt=e:Rt=Rt.next=e}return Rt}function hs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Va(e){var t=Ia;return Ia+=1,Zi===null&&(Zi=[]),e=eh(Zi,e,t),t=We,(Rt===null?t.memoizedState:Rt.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?zh:Hh),e}function vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Va(e);if(e.$$typeof===P)return Ft(e)}throw Error(u(438,String(e)))}function ps(e){var t=null,r=We.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var n=We.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=hs(),We.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=U;return t.index++,r}function $r(e,t){return typeof t=="function"?t(e):t}function hc(e){var t=Ct();return ms(t,ft,e)}function ms(e,t,r){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=r;var s=e.baseQueue,m=n.pending;if(m!==null){if(s!==null){var M=s.next;s.next=m.next,m.next=M}t.baseQueue=s=m,n.pending=null}if(m=e.baseState,s===null)e.memoizedState=m;else{t=s.next;var H=M=null,re=null,le=t,ye=!1;do{var Se=le.lane&-536870913;if(Se!==le.lane?(tt&Se)===Se:(Mn&Se)===Se){var se=le.revertLane;if(se===0)re!==null&&(re=re.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Se===Qi&&(ye=!0);else if((Mn&se)===se){le=le.next,se===Qi&&(ye=!0);continue}else Se={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},re===null?(H=re=Se,M=m):re=re.next=Se,We.lanes|=se,Bn|=se;Se=le.action,ui&&r(m,Se),m=le.hasEagerState?le.eagerState:r(m,Se)}else se={lane:Se,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},re===null?(H=re=se,M=m):re=re.next=se,We.lanes|=Se,Bn|=Se;le=le.next}while(le!==null&&le!==t);if(re===null?M=m:re.next=H,!lr(m,e.memoizedState)&&(Nt=!0,ye&&(r=Yi,r!==null)))throw r;e.memoizedState=m,e.baseState=M,e.baseQueue=re,n.lastRenderedState=m}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ys(e){var t=Ct(),r=t.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,m=t.memoizedState;if(s!==null){r.pending=null;var M=s=s.next;do m=e(m,M.action),M=M.next;while(M!==s);lr(m,t.memoizedState)||(Nt=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),r.lastRenderedState=m}return[m,n]}function ch(e,t,r){var n=We,s=Ct(),m=ot;if(m){if(r===void 0)throw Error(u(407));r=r()}else r=t();var M=!lr((ft||s).memoizedState,r);M&&(s.memoizedState=r,Nt=!0),s=s.queue;var H=fh.bind(null,n,s,e);if(za(2048,8,H,[e]),s.getSnapshot!==t||M||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Wi(9,pc(),sh.bind(null,n,s,r,t),null),yt===null)throw Error(u(349));m||(Mn&124)!==0||lh(n,t,r)}return r}function lh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=We.updateQueue,t===null?(t=hs(),We.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sh(e,t,r,n){t.value=r,t.getSnapshot=n,dh(t)&&vh(e)}function fh(e,t,r){return r(function(){dh(t)&&vh(e)})}function dh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lr(e,r)}catch{return!0}}function vh(e){var t=zi(e,2);t!==null&&pr(t,e,2)}function _s(e){var t=ir();if(typeof e=="function"){var r=e;if(e=r(),ui){Ke(!0);try{r()}finally{Ke(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:e},t}function hh(e,t,r,n){return e.baseState=r,ms(e,ft,typeof n=="function"?n:$r)}function UT(e,t,r,n,s){if(yc(e))throw Error(u(485));if(e=t.action,e!==null){var m={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){m.listeners.push(M)}};j.T!==null?r(!0):m.isTransition=!1,n(m),r=t.pending,r===null?(m.next=t.pending=m,ph(t,m)):(m.next=r.next,t.pending=r.next=m)}}function ph(e,t){var r=t.action,n=t.payload,s=e.state;if(t.isTransition){var m=j.T,M={};j.T=M;try{var H=r(s,n),re=j.S;re!==null&&re(M,H),mh(e,t,H)}catch(le){gs(e,t,le)}finally{j.T=m}}else try{m=r(s,n),mh(e,t,m)}catch(le){gs(e,t,le)}}function mh(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){yh(e,t,n)},function(n){return gs(e,t,n)}):yh(e,t,r)}function yh(e,t,r){t.status="fulfilled",t.value=r,_h(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,ph(e,r)))}function gs(e,t,r){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=r,_h(t),t=t.next;while(t!==n)}e.action=null}function _h(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gh(e,t){return t}function Sh(e,t){if(ot){var r=yt.formState;if(r!==null){e:{var n=We;if(ot){if(Tt){t:{for(var s=Tt,m=Ur;s.nodeType!==8;){if(!m){s=null;break t}if(s=Mr(s.nextSibling),s===null){s=null;break t}}m=s.data,s=m==="F!"||m==="F"?s:null}if(s){Tt=Mr(s.nextSibling),n=s.data==="F!";break e}}ni(n)}n=!1}n&&(t=r[0])}}return r=ir(),r.memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:t},r.queue=n,r=Bh.bind(null,We,n),n.dispatch=r,n=_s(!1),m=ks.bind(null,We,!1,n.queue),n=ir(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,r=UT.bind(null,We,s,m,r),s.dispatch=r,n.memoizedState=e,[t,r,!1]}function bh(e){var t=Ct();return Th(t,ft,e)}function Th(e,t,r){if(t=ms(e,t,gh)[0],e=hc($r)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Va(t)}catch(M){throw M===ja?cc:M}else n=t;t=Ct();var s=t.queue,m=s.dispatch;return r!==t.memoizedState&&(We.flags|=2048,Wi(9,pc(),BT.bind(null,s,r),null)),[n,m,e]}function BT(e,t){e.action=t}function wh(e){var t=Ct(),r=ft;if(r!==null)return Th(t,r,e);Ct(),t=t.memoizedState,r=Ct();var n=r.queue.dispatch;return r.memoizedState=e,[t,n,!1]}function Wi(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},t=We.updateQueue,t===null&&(t=hs(),We.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function pc(){return{destroy:void 0,resource:void 0}}function kh(){return Ct().memoizedState}function mc(e,t,r,n){var s=ir();n=n===void 0?null:n,We.flags|=e,s.memoizedState=Wi(1|t,pc(),r,n)}function za(e,t,r,n){var s=Ct();n=n===void 0?null:n;var m=s.memoizedState.inst;ft!==null&&n!==null&&ls(n,ft.memoizedState.deps)?s.memoizedState=Wi(t,m,r,n):(We.flags|=e,s.memoizedState=Wi(1|t,m,r,n))}function Eh(e,t){mc(8390656,8,e,t)}function Oh(e,t){za(2048,8,e,t)}function Rh(e,t){return za(4,2,e,t)}function Ch(e,t){return za(4,4,e,t)}function Ah(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lh(e,t,r){r=r!=null?r.concat([e]):null,za(4,4,Ah.bind(null,t,e),r)}function Ss(){}function Ph(e,t){var r=Ct();t=t===void 0?null:t;var n=r.memoizedState;return t!==null&&ls(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Mh(e,t){var r=Ct();t=t===void 0?null:t;var n=r.memoizedState;if(t!==null&&ls(t,n[1]))return n[0];if(n=e(),ui){Ke(!0);try{e()}finally{Ke(!1)}}return r.memoizedState=[n,t],n}function bs(e,t,r){return r===void 0||(Mn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=r,e=jp(),We.lanes|=e,Bn|=e,r)}function xh(e,t,r,n){return lr(r,t)?r:Ki.current!==null?(e=bs(e,r,n),lr(e,t)||(Nt=!0),e):(Mn&42)===0?(Nt=!0,e.memoizedState=r):(e=jp(),We.lanes|=e,Bn|=e,t)}function Dh(e,t,r,n,s){var m=Q.p;Q.p=m!==0&&8>m?m:8;var M=j.T,H={};j.T=H,ks(e,!1,t,r);try{var re=s(),le=j.S;if(le!==null&&le(H,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var ye=jT(re,n);Ha(e,t,ye,hr(e))}else Ha(e,t,n,hr(e))}catch(Se){Ha(e,t,{then:function(){},status:"rejected",reason:Se},hr())}finally{Q.p=m,j.T=M}}function IT(){}function Ts(e,t,r,n){if(e.tag!==5)throw Error(u(476));var s=jh(e).queue;Dh(e,s,t,Z,r===null?IT:function(){return Nh(e),r(n)})}function jh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:Z},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nh(e){var t=jh(e).next.queue;Ha(e,t,{},hr())}function ws(){return Ft(uo)}function qh(){return Ct().memoizedState}function Uh(){return Ct().memoizedState}function VT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=hr();e=Ln(r);var n=Pn(t,e,r);n!==null&&(pr(n,t,r),qa(n,t,r)),t={cache:$l()},e.payload=t;return}t=t.return}}function zT(e,t,r){var n=hr();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},yc(e)?Ih(t,r):(r=Hl(e,t,r,n),r!==null&&(pr(r,e,n),Vh(r,t,n)))}function Bh(e,t,r){var n=hr();Ha(e,t,r,n)}function Ha(e,t,r,n){var s={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(yc(e))Ih(t,s);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var M=t.lastRenderedState,H=m(M,r);if(s.hasEagerState=!0,s.eagerState=H,lr(H,M))return ec(e,t,s,0),yt===null&&$u(),!1}catch{}finally{}if(r=Hl(e,t,s,n),r!==null)return pr(r,e,n),Vh(r,t,n),!0}return!1}function ks(e,t,r,n){if(n={lane:2,revertLane:rf(),action:n,hasEagerState:!1,eagerState:null,next:null},yc(e)){if(t)throw Error(u(479))}else t=Hl(e,r,n,2),t!==null&&pr(t,e,2)}function yc(e){var t=e.alternate;return e===We||t!==null&&t===We}function Ih(e,t){Xi=fc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Vh(e,t,r){if((r&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rt(e,r)}}var _c={readContext:Ft,use:vc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},zh={readContext:Ft,use:vc,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:Eh,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,mc(4194308,4,Ah.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mc(4194308,4,e,t)},useInsertionEffect:function(e,t){mc(4,2,e,t)},useMemo:function(e,t){var r=ir();t=t===void 0?null:t;var n=e();if(ui){Ke(!0);try{e()}finally{Ke(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=ir();if(r!==void 0){var s=r(t);if(ui){Ke(!0);try{r(t)}finally{Ke(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=zT.bind(null,We,e),[n.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:function(e){e=_s(e);var t=e.queue,r=Bh.bind(null,We,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Ss,useDeferredValue:function(e,t){var r=ir();return bs(r,e,t)},useTransition:function(){var e=_s(!1);return e=Dh.bind(null,We,e.queue,!0,!1),ir().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=We,s=ir();if(ot){if(r===void 0)throw Error(u(407));r=r()}else{if(r=t(),yt===null)throw Error(u(349));(tt&124)!==0||lh(n,t,r)}s.memoizedState=r;var m={value:r,getSnapshot:t};return s.queue=m,Eh(fh.bind(null,n,m,e),[e]),n.flags|=2048,Wi(9,pc(),sh.bind(null,n,m,r,t),null),r},useId:function(){var e=ir(),t=yt.identifierPrefix;if(ot){var r=Zr,n=Xr;r=(n&~(1<<32-Xe(n)-1)).toString(32)+r,t="«"+t+"R"+r,r=dc++,0<r&&(t+="H"+r.toString(32)),t+="»"}else r=NT++,t="«"+t+"r"+r.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:ws,useFormState:Sh,useActionState:Sh,useOptimistic:function(e){var t=ir();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=ks.bind(null,We,!0,r),r.dispatch=t,[e,t]},useMemoCache:ps,useCacheRefresh:function(){return ir().memoizedState=VT.bind(null,We)}},Hh={readContext:Ft,use:vc,useCallback:Ph,useContext:Ft,useEffect:Oh,useImperativeHandle:Lh,useInsertionEffect:Rh,useLayoutEffect:Ch,useMemo:Mh,useReducer:hc,useRef:kh,useState:function(){return hc($r)},useDebugValue:Ss,useDeferredValue:function(e,t){var r=Ct();return xh(r,ft.memoizedState,e,t)},useTransition:function(){var e=hc($r)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:Va(e),t]},useSyncExternalStore:ch,useId:qh,useHostTransitionStatus:ws,useFormState:bh,useActionState:bh,useOptimistic:function(e,t){var r=Ct();return hh(r,ft,e,t)},useMemoCache:ps,useCacheRefresh:Uh},HT={readContext:Ft,use:vc,useCallback:Ph,useContext:Ft,useEffect:Oh,useImperativeHandle:Lh,useInsertionEffect:Rh,useLayoutEffect:Ch,useMemo:Mh,useReducer:ys,useRef:kh,useState:function(){return ys($r)},useDebugValue:Ss,useDeferredValue:function(e,t){var r=Ct();return ft===null?bs(r,e,t):xh(r,ft.memoizedState,e,t)},useTransition:function(){var e=ys($r)[0],t=Ct().memoizedState;return[typeof e=="boolean"?e:Va(e),t]},useSyncExternalStore:ch,useId:qh,useHostTransitionStatus:ws,useFormState:wh,useActionState:wh,useOptimistic:function(e,t){var r=Ct();return ft!==null?hh(r,ft,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ps,useCacheRefresh:Uh},Ji=null,Fa=0;function gc(e){var t=Fa;return Fa+=1,Ji===null&&(Ji=[]),eh(Ji,e,t)}function Ga(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Sc(e,t){throw t.$$typeof===y?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Fh(e){var t=e._init;return t(e._payload)}function Gh(e){function t(ue,ne){if(e){var ce=ue.deletions;ce===null?(ue.deletions=[ne],ue.flags|=16):ce.push(ne)}}function r(ue,ne){if(!e)return null;for(;ne!==null;)t(ue,ne),ne=ne.sibling;return null}function n(ue){for(var ne=new Map;ue!==null;)ue.key!==null?ne.set(ue.key,ue):ne.set(ue.index,ue),ue=ue.sibling;return ne}function s(ue,ne){return ue=Kr(ue,ne),ue.index=0,ue.sibling=null,ue}function m(ue,ne,ce){return ue.index=ce,e?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<ne?(ue.flags|=67108866,ne):ce):(ue.flags|=67108866,ne)):(ue.flags|=1048576,ne)}function M(ue){return e&&ue.alternate===null&&(ue.flags|=67108866),ue}function H(ue,ne,ce,ge){return ne===null||ne.tag!==6?(ne=Gl(ce,ue.mode,ge),ne.return=ue,ne):(ne=s(ne,ce),ne.return=ue,ne)}function re(ue,ne,ce,ge){var Me=ce.type;return Me===_?ye(ue,ne,ce.props.children,ge,ce.key):ne!==null&&(ne.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&Fh(Me)===ne.type)?(ne=s(ne,ce.props),Ga(ne,ce),ne.return=ue,ne):(ne=rc(ce.type,ce.key,ce.props,null,ue.mode,ge),Ga(ne,ce),ne.return=ue,ne)}function le(ue,ne,ce,ge){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=Ql(ce,ue.mode,ge),ne.return=ue,ne):(ne=s(ne,ce.children||[]),ne.return=ue,ne)}function ye(ue,ne,ce,ge,Me){return ne===null||ne.tag!==7?(ne=$n(ce,ue.mode,ge,Me),ne.return=ue,ne):(ne=s(ne,ce),ne.return=ue,ne)}function Se(ue,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Gl(""+ne,ue.mode,ce),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ce=rc(ne.type,ne.key,ne.props,null,ue.mode,ce),Ga(ce,ne),ce.return=ue,ce;case w:return ne=Ql(ne,ue.mode,ce),ne.return=ue,ne;case O:var ge=ne._init;return ne=ge(ne._payload),Se(ue,ne,ce)}if(D(ne)||G(ne))return ne=$n(ne,ue.mode,ce,null),ne.return=ue,ne;if(typeof ne.then=="function")return Se(ue,gc(ne),ce);if(ne.$$typeof===P)return Se(ue,oc(ue,ne),ce);Sc(ue,ne)}return null}function se(ue,ne,ce,ge){var Me=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Me!==null?null:H(ue,ne,""+ce,ge);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return ce.key===Me?re(ue,ne,ce,ge):null;case w:return ce.key===Me?le(ue,ne,ce,ge):null;case O:return Me=ce._init,ce=Me(ce._payload),se(ue,ne,ce,ge)}if(D(ce)||G(ce))return Me!==null?null:ye(ue,ne,ce,ge,null);if(typeof ce.then=="function")return se(ue,ne,gc(ce),ge);if(ce.$$typeof===P)return se(ue,ne,oc(ue,ce),ge);Sc(ue,ce)}return null}function fe(ue,ne,ce,ge,Me){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ue=ue.get(ce)||null,H(ne,ue,""+ge,Me);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case g:return ue=ue.get(ge.key===null?ce:ge.key)||null,re(ne,ue,ge,Me);case w:return ue=ue.get(ge.key===null?ce:ge.key)||null,le(ne,ue,ge,Me);case O:var Je=ge._init;return ge=Je(ge._payload),fe(ue,ne,ce,ge,Me)}if(D(ge)||G(ge))return ue=ue.get(ce)||null,ye(ne,ue,ge,Me,null);if(typeof ge.then=="function")return fe(ue,ne,ce,gc(ge),Me);if(ge.$$typeof===P)return fe(ue,ne,ce,oc(ne,ge),Me);Sc(ne,ge)}return null}function Ve(ue,ne,ce,ge){for(var Me=null,Je=null,qe=ne,Ie=ne=0,Ut=null;qe!==null&&Ie<ce.length;Ie++){qe.index>Ie?(Ut=qe,qe=null):Ut=qe.sibling;var it=se(ue,qe,ce[Ie],ge);if(it===null){qe===null&&(qe=Ut);break}e&&qe&&it.alternate===null&&t(ue,qe),ne=m(it,ne,Ie),Je===null?Me=it:Je.sibling=it,Je=it,qe=Ut}if(Ie===ce.length)return r(ue,qe),ot&&ti(ue,Ie),Me;if(qe===null){for(;Ie<ce.length;Ie++)qe=Se(ue,ce[Ie],ge),qe!==null&&(ne=m(qe,ne,Ie),Je===null?Me=qe:Je.sibling=qe,Je=qe);return ot&&ti(ue,Ie),Me}for(qe=n(qe);Ie<ce.length;Ie++)Ut=fe(qe,ue,Ie,ce[Ie],ge),Ut!==null&&(e&&Ut.alternate!==null&&qe.delete(Ut.key===null?Ie:Ut.key),ne=m(Ut,ne,Ie),Je===null?Me=Ut:Je.sibling=Ut,Je=Ut);return e&&qe.forEach(function(Kn){return t(ue,Kn)}),ot&&ti(ue,Ie),Me}function Ue(ue,ne,ce,ge){if(ce==null)throw Error(u(151));for(var Me=null,Je=null,qe=ne,Ie=ne=0,Ut=null,it=ce.next();qe!==null&&!it.done;Ie++,it=ce.next()){qe.index>Ie?(Ut=qe,qe=null):Ut=qe.sibling;var Kn=se(ue,qe,it.value,ge);if(Kn===null){qe===null&&(qe=Ut);break}e&&qe&&Kn.alternate===null&&t(ue,qe),ne=m(Kn,ne,Ie),Je===null?Me=Kn:Je.sibling=Kn,Je=Kn,qe=Ut}if(it.done)return r(ue,qe),ot&&ti(ue,Ie),Me;if(qe===null){for(;!it.done;Ie++,it=ce.next())it=Se(ue,it.value,ge),it!==null&&(ne=m(it,ne,Ie),Je===null?Me=it:Je.sibling=it,Je=it);return ot&&ti(ue,Ie),Me}for(qe=n(qe);!it.done;Ie++,it=ce.next())it=fe(qe,ue,Ie,it.value,ge),it!==null&&(e&&it.alternate!==null&&qe.delete(it.key===null?Ie:it.key),ne=m(it,ne,Ie),Je===null?Me=it:Je.sibling=it,Je=it);return e&&qe.forEach(function(Fw){return t(ue,Fw)}),ot&&ti(ue,Ie),Me}function vt(ue,ne,ce,ge){if(typeof ce=="object"&&ce!==null&&ce.type===_&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:e:{for(var Me=ce.key;ne!==null;){if(ne.key===Me){if(Me=ce.type,Me===_){if(ne.tag===7){r(ue,ne.sibling),ge=s(ne,ce.props.children),ge.return=ue,ue=ge;break e}}else if(ne.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&Fh(Me)===ne.type){r(ue,ne.sibling),ge=s(ne,ce.props),Ga(ge,ce),ge.return=ue,ue=ge;break e}r(ue,ne);break}else t(ue,ne);ne=ne.sibling}ce.type===_?(ge=$n(ce.props.children,ue.mode,ge,ce.key),ge.return=ue,ue=ge):(ge=rc(ce.type,ce.key,ce.props,null,ue.mode,ge),Ga(ge,ce),ge.return=ue,ue=ge)}return M(ue);case w:e:{for(Me=ce.key;ne!==null;){if(ne.key===Me)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){r(ue,ne.sibling),ge=s(ne,ce.children||[]),ge.return=ue,ue=ge;break e}else{r(ue,ne);break}else t(ue,ne);ne=ne.sibling}ge=Ql(ce,ue.mode,ge),ge.return=ue,ue=ge}return M(ue);case O:return Me=ce._init,ce=Me(ce._payload),vt(ue,ne,ce,ge)}if(D(ce))return Ve(ue,ne,ce,ge);if(G(ce)){if(Me=G(ce),typeof Me!="function")throw Error(u(150));return ce=Me.call(ce),Ue(ue,ne,ce,ge)}if(typeof ce.then=="function")return vt(ue,ne,gc(ce),ge);if(ce.$$typeof===P)return vt(ue,ne,oc(ue,ce),ge);Sc(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ne!==null&&ne.tag===6?(r(ue,ne.sibling),ge=s(ne,ce),ge.return=ue,ue=ge):(r(ue,ne),ge=Gl(ce,ue.mode,ge),ge.return=ue,ue=ge),M(ue)):r(ue,ne)}return function(ue,ne,ce,ge){try{Fa=0;var Me=vt(ue,ne,ce,ge);return Ji=null,Me}catch(qe){if(qe===ja||qe===cc)throw qe;var Je=sr(29,qe,null,ue.mode);return Je.lanes=ge,Je.return=ue,Je}finally{}}}var $i=Gh(!0),Qh=Gh(!1),wr=x(null),Br=null;function xn(e){var t=e.alternate;I(xt,xt.current&1),I(wr,e),Br===null&&(t===null||Ki.current!==null||t.memoizedState!==null)&&(Br=e)}function Yh(e){if(e.tag===22){if(I(xt,xt.current),I(wr,e),Br===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Br=e)}}else Dn()}function Dn(){I(xt,xt.current),I(wr,wr.current)}function en(e){L(wr),Br===e&&(Br=null),L(xt)}var xt=x(0);function bc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||pf(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Es(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:p({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Os={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=hr(),s=Ln(n);s.payload=t,r!=null&&(s.callback=r),t=Pn(e,s,n),t!==null&&(pr(t,e,n),qa(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=hr(),s=Ln(n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Pn(e,s,n),t!==null&&(pr(t,e,n),qa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=hr(),n=Ln(r);n.tag=2,t!=null&&(n.callback=t),t=Pn(e,n,r),t!==null&&(pr(t,e,r),qa(t,e,r))}};function Kh(e,t,r,n,s,m,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,m,M):t.prototype&&t.prototype.isPureReactComponent?!Ra(r,n)||!Ra(s,m):!0}function Xh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Os.enqueueReplaceState(t,t.state,null)}function ci(e,t){var r=t;if("ref"in t){r={};for(var n in t)n!=="ref"&&(r[n]=t[n])}if(e=e.defaultProps){r===t&&(r=p({},r));for(var s in e)r[s]===void 0&&(r[s]=e[s])}return r}var Tc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Zh(e){Tc(e)}function Wh(e){console.error(e)}function Jh(e){Tc(e)}function wc(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function $h(e,t,r){try{var n=e.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Rs(e,t,r){return r=Ln(r),r.tag=3,r.payload={element:null},r.callback=function(){wc(e,t)},r}function ep(e){return e=Ln(e),e.tag=3,e}function tp(e,t,r,n){var s=r.type.getDerivedStateFromError;if(typeof s=="function"){var m=n.value;e.payload=function(){return s(m)},e.callback=function(){$h(t,r,n)}}var M=r.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(e.callback=function(){$h(t,r,n),typeof s!="function"&&(In===null?In=new Set([this]):In.add(this));var H=n.stack;this.componentDidCatch(n.value,{componentStack:H!==null?H:""})})}function FT(e,t,r,n,s){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=r.alternate,t!==null&&Ma(t,r,s,!0),r=wr.current,r!==null){switch(r.tag){case 13:return Br===null?Ws():r.alternate===null&&wt===0&&(wt=3),r.flags&=-257,r.flags|=65536,r.lanes=s,n===rs?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([n]):t.add(n),$s(e,n,s)),!1;case 22:return r.flags|=65536,n===rs?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([n]):r.add(n)),$s(e,n,s)),!1}throw Error(u(435,r.tag))}return $s(e,n,s),Ws(),!1}if(ot)return t=wr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Xl&&(e=Error(u(422),{cause:n}),Pa(gr(e,r)))):(n!==Xl&&(t=Error(u(423),{cause:n}),Pa(gr(t,r))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=gr(n,r),s=Rs(e.stateNode,n,s),as(e,s),wt!==4&&(wt=2)),!1;var m=Error(u(520),{cause:n});if(m=gr(m,r),Ja===null?Ja=[m]:Ja.push(m),wt!==4&&(wt=2),t===null)return!0;n=gr(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=s&-s,r.lanes|=e,e=Rs(r.stateNode,n,e),as(r,e),!1;case 1:if(t=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(In===null||!In.has(m))))return r.flags|=65536,s&=-s,r.lanes|=s,s=ep(s),tp(s,e,r,n),as(r,s),!1}r=r.return}while(r!==null);return!1}var rp=Error(u(461)),Nt=!1;function Vt(e,t,r,n){t.child=e===null?Qh(t,null,r,n):$i(t,e.child,r,n)}function np(e,t,r,n,s){r=r.render;var m=t.ref;if("ref"in n){var M={};for(var H in n)H!=="ref"&&(M[H]=n[H])}else M=n;return ai(t),n=ss(e,t,r,M,m,s),H=fs(),e!==null&&!Nt?(ds(e,t,s),tn(e,t,s)):(ot&&H&&Yl(t),t.flags|=1,Vt(e,t,n,s),t.child)}function ip(e,t,r,n,s){if(e===null){var m=r.type;return typeof m=="function"&&!Fl(m)&&m.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=m,ap(e,t,m,n,s)):(e=rc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!js(e,s)){var M=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ra,r(M,n)&&e.ref===t.ref)return tn(e,t,s)}return t.flags|=1,e=Kr(m,n),e.ref=t.ref,e.return=t,t.child=e}function ap(e,t,r,n,s){if(e!==null){var m=e.memoizedProps;if(Ra(m,n)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=n=m,js(e,s))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,tn(e,t,s)}return Cs(e,t,r,n,s)}function op(e,t,r){var n=t.pendingProps,s=n.children,m=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=m!==null?m.baseLanes|r:r,e!==null){for(s=t.child=e.child,m=0;s!==null;)m=m|s.lanes|s.childLanes,s=s.sibling;t.childLanes=m&~n}else t.childLanes=0,t.child=null;return up(e,t,n,r)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&uc(t,m!==null?m.cachePool:null),m!==null?ah(t,m):us(),Yh(t);else return t.lanes=t.childLanes=536870912,up(e,t,m!==null?m.baseLanes|r:r,r)}else m!==null?(uc(t,m.cachePool),ah(t,m),Dn(),t.memoizedState=null):(e!==null&&uc(t,null),us(),Dn());return Vt(e,t,s,r),t.child}function up(e,t,r,n){var s=ts();return s=s===null?null:{parent:Mt._currentValue,pool:s},t.memoizedState={baseLanes:r,cachePool:s},e!==null&&uc(t,null),us(),Yh(t),e!==null&&Ma(e,t,n,!0),null}function kc(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(u(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Cs(e,t,r,n,s){return ai(t),r=ss(e,t,r,n,void 0,s),n=fs(),e!==null&&!Nt?(ds(e,t,s),tn(e,t,s)):(ot&&n&&Yl(t),t.flags|=1,Vt(e,t,r,s),t.child)}function cp(e,t,r,n,s,m){return ai(t),t.updateQueue=null,r=uh(t,n,r,s),oh(e),n=fs(),e!==null&&!Nt?(ds(e,t,m),tn(e,t,m)):(ot&&n&&Yl(t),t.flags|=1,Vt(e,t,r,m),t.child)}function lp(e,t,r,n,s){if(ai(t),t.stateNode===null){var m=Hi,M=r.contextType;typeof M=="object"&&M!==null&&(m=Ft(M)),m=new r(n,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Os,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=n,m.state=t.memoizedState,m.refs={},ns(t),M=r.contextType,m.context=typeof M=="object"&&M!==null?Ft(M):Hi,m.state=t.memoizedState,M=r.getDerivedStateFromProps,typeof M=="function"&&(Es(t,r,M,n),m.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(M=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),M!==m.state&&Os.enqueueReplaceState(m,m.state,null),Ba(t,n,m,s),Ua(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){m=t.stateNode;var H=t.memoizedProps,re=ci(r,H);m.props=re;var le=m.context,ye=r.contextType;M=Hi,typeof ye=="object"&&ye!==null&&(M=Ft(ye));var Se=r.getDerivedStateFromProps;ye=typeof Se=="function"||typeof m.getSnapshotBeforeUpdate=="function",H=t.pendingProps!==H,ye||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(H||le!==M)&&Xh(t,m,n,M),An=!1;var se=t.memoizedState;m.state=se,Ba(t,n,m,s),Ua(),le=t.memoizedState,H||se!==le||An?(typeof Se=="function"&&(Es(t,r,Se,n),le=t.memoizedState),(re=An||Kh(t,r,re,n,se,le,M))?(ye||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=le),m.props=n,m.state=le,m.context=M,n=re):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{m=t.stateNode,is(e,t),M=t.memoizedProps,ye=ci(r,M),m.props=ye,Se=t.pendingProps,se=m.context,le=r.contextType,re=Hi,typeof le=="object"&&le!==null&&(re=Ft(le)),H=r.getDerivedStateFromProps,(le=typeof H=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(M!==Se||se!==re)&&Xh(t,m,n,re),An=!1,se=t.memoizedState,m.state=se,Ba(t,n,m,s),Ua();var fe=t.memoizedState;M!==Se||se!==fe||An||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof H=="function"&&(Es(t,r,H,n),fe=t.memoizedState),(ye=An||Kh(t,r,ye,n,se,fe,re)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(le||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(n,fe,re),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(n,fe,re)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||M===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=fe),m.props=n,m.state=fe,m.context=re,n=ye):(typeof m.componentDidUpdate!="function"||M===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),n=!1)}return m=n,kc(e,t),n=(t.flags&128)!==0,m||n?(m=t.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&n?(t.child=$i(t,e.child,null,s),t.child=$i(t,null,r,s)):Vt(e,t,r,s),t.memoizedState=m.state,e=t.child):e=tn(e,t,s),e}function sp(e,t,r,n){return La(),t.flags|=256,Vt(e,t,r,n),t.child}var As={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ls(e){return{baseLanes:e,cachePool:Wv()}}function Ps(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=kr),e}function fp(e,t,r){var n=t.pendingProps,s=!1,m=(t.flags&128)!==0,M;if((M=m)||(M=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),M&&(s=!0,t.flags&=-129),M=(t.flags&32)!==0,t.flags&=-33,e===null){if(ot){if(s?xn(t):Dn(),ot){var H=Tt,re;if(re=H){e:{for(re=H,H=Ur;re.nodeType!==8;){if(!H){H=null;break e}if(re=Mr(re.nextSibling),re===null){H=null;break e}}H=re}H!==null?(t.memoizedState={dehydrated:H,treeContext:ei!==null?{id:Xr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},re=sr(18,null,null,0),re.stateNode=H,re.return=t,t.child=re,Wt=t,Tt=null,re=!0):re=!1}re||ni(t)}if(H=t.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return pf(H)?t.lanes=32:t.lanes=536870912,null;en(t)}return H=n.children,n=n.fallback,s?(Dn(),s=t.mode,H=Ec({mode:"hidden",children:H},s),n=$n(n,s,r,null),H.return=t,n.return=t,H.sibling=n,t.child=H,s=t.child,s.memoizedState=Ls(r),s.childLanes=Ps(e,M,r),t.memoizedState=As,n):(xn(t),Ms(t,H))}if(re=e.memoizedState,re!==null&&(H=re.dehydrated,H!==null)){if(m)t.flags&256?(xn(t),t.flags&=-257,t=xs(e,t,r)):t.memoizedState!==null?(Dn(),t.child=e.child,t.flags|=128,t=null):(Dn(),s=n.fallback,H=t.mode,n=Ec({mode:"visible",children:n.children},H),s=$n(s,H,r,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,$i(t,e.child,null,r),n=t.child,n.memoizedState=Ls(r),n.childLanes=Ps(e,M,r),t.memoizedState=As,t=s);else if(xn(t),pf(H)){if(M=H.nextSibling&&H.nextSibling.dataset,M)var le=M.dgst;M=le,n=Error(u(419)),n.stack="",n.digest=M,Pa({value:n,source:null,stack:null}),t=xs(e,t,r)}else if(Nt||Ma(e,t,r,!1),M=(r&e.childLanes)!==0,Nt||M){if(M=yt,M!==null&&(n=r&-r,n=(n&42)!==0?1:at(n),n=(n&(M.suspendedLanes|r))!==0?0:n,n!==0&&n!==re.retryLane))throw re.retryLane=n,zi(e,n),pr(M,e,n),rp;H.data==="$?"||Ws(),t=xs(e,t,r)}else H.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=re.treeContext,Tt=Mr(H.nextSibling),Wt=t,ot=!0,ri=null,Ur=!1,e!==null&&(br[Tr++]=Xr,br[Tr++]=Zr,br[Tr++]=ei,Xr=e.id,Zr=e.overflow,ei=t),t=Ms(t,n.children),t.flags|=4096);return t}return s?(Dn(),s=n.fallback,H=t.mode,re=e.child,le=re.sibling,n=Kr(re,{mode:"hidden",children:n.children}),n.subtreeFlags=re.subtreeFlags&65011712,le!==null?s=Kr(le,s):(s=$n(s,H,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,H=e.child.memoizedState,H===null?H=Ls(r):(re=H.cachePool,re!==null?(le=Mt._currentValue,re=re.parent!==le?{parent:le,pool:le}:re):re=Wv(),H={baseLanes:H.baseLanes|r,cachePool:re}),s.memoizedState=H,s.childLanes=Ps(e,M,r),t.memoizedState=As,n):(xn(t),r=e.child,e=r.sibling,r=Kr(r,{mode:"visible",children:n.children}),r.return=t,r.sibling=null,e!==null&&(M=t.deletions,M===null?(t.deletions=[e],t.flags|=16):M.push(e)),t.child=r,t.memoizedState=null,r)}function Ms(e,t){return t=Ec({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ec(e,t){return e=sr(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function xs(e,t,r){return $i(t,e.child,null,r),e=Ms(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Wl(e.return,t,r)}function Ds(e,t,r,n,s){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=r,m.tailMode=s)}function vp(e,t,r){var n=t.pendingProps,s=n.revealOrder,m=n.tail;if(Vt(e,t,n.children,r),n=xt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dp(e,r,t);else if(e.tag===19)dp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(I(xt,n),s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&bc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ds(t,!1,s,r,m);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ds(t,!0,r,null,m);break;case"together":Ds(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Ma(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,r=Kr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function js(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function GT(e,t,r){switch(t.tag){case 3:pe(t,t.stateNode.containerInfo),Cn(t,Mt,e.memoizedState.cache),La();break;case 27:case 5:xe(t);break;case 4:pe(t,t.stateNode.containerInfo);break;case 10:Cn(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(xn(t),t.flags|=128,null):(r&t.child.childLanes)!==0?fp(e,t,r):(xn(t),e=tn(e,t,r),e!==null?e.sibling:null);xn(t);break;case 19:var s=(e.flags&128)!==0;if(n=(r&t.childLanes)!==0,n||(Ma(e,t,r,!1),n=(r&t.childLanes)!==0),s){if(n)return vp(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),I(xt,xt.current),n)break;return null;case 22:case 23:return t.lanes=0,op(e,t,r);case 24:Cn(t,Mt,e.memoizedState.cache)}return tn(e,t,r)}function hp(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!js(e,r)&&(t.flags&128)===0)return Nt=!1,GT(e,t,r);Nt=(e.flags&131072)!==0}else Nt=!1,ot&&(t.flags&1048576)!==0&&Fv(t,ic,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,typeof n=="function")Fl(n)?(e=ci(n,e),t.tag=1,t=lp(null,t,n,e,r)):(t.tag=0,t=Cs(null,t,n,e,r));else{if(n!=null){if(s=n.$$typeof,s===R){t.tag=11,t=np(null,t,n,e,r);break e}else if(s===T){t.tag=14,t=ip(null,t,n,e,r);break e}}throw t=z(n)||n,Error(u(306,t,""))}}return t;case 0:return Cs(e,t,t.type,t.pendingProps,r);case 1:return n=t.type,s=ci(n,t.pendingProps),lp(e,t,n,s,r);case 3:e:{if(pe(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var m=t.memoizedState;s=m.element,is(e,t),Ba(t,n,null,r);var M=t.memoizedState;if(n=M.cache,Cn(t,Mt,n),n!==m.cache&&Jl(t,[Mt],r,!0),Ua(),n=M.element,m.isDehydrated)if(m={element:n,isDehydrated:!1,cache:M.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=sp(e,t,n,r);break e}else if(n!==s){s=gr(Error(u(424)),t),Pa(s),t=sp(e,t,n,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Mr(e.firstChild),Wt=t,ot=!0,ri=null,Ur=!0,r=Qh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(La(),n===s){t=tn(e,t,r);break e}Vt(e,t,n,r)}t=t.child}return t;case 26:return kc(e,t),e===null?(r=_m(t.type,null,t.pendingProps,null))?t.memoizedState=r:ot||(r=t.type,e=t.pendingProps,n=Bc($.current).createElement(r),n[jt]=t,n[Pt]=e,Ht(n,r,e),gt(n),t.stateNode=n):t.memoizedState=_m(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xe(t),e===null&&ot&&(n=t.stateNode=pm(t.type,t.pendingProps,$.current),Wt=t,Ur=!0,s=Tt,Hn(t.type)?(mf=s,Tt=Mr(n.firstChild)):Tt=s),Vt(e,t,t.pendingProps.children,r),kc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ot&&((s=n=Tt)&&(n=gw(n,t.type,t.pendingProps,Ur),n!==null?(t.stateNode=n,Wt=t,Tt=Mr(n.firstChild),Ur=!1,s=!0):s=!1),s||ni(t)),xe(t),s=t.type,m=t.pendingProps,M=e!==null?e.memoizedProps:null,n=m.children,df(s,m)?n=null:M!==null&&df(s,M)&&(t.flags|=32),t.memoizedState!==null&&(s=ss(e,t,qT,null,null,r),uo._currentValue=s),kc(e,t),Vt(e,t,n,r),t.child;case 6:return e===null&&ot&&((e=r=Tt)&&(r=Sw(r,t.pendingProps,Ur),r!==null?(t.stateNode=r,Wt=t,Tt=null,e=!0):e=!1),e||ni(t)),null;case 13:return fp(e,t,r);case 4:return pe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$i(t,null,n,r):Vt(e,t,n,r),t.child;case 11:return np(e,t,t.type,t.pendingProps,r);case 7:return Vt(e,t,t.pendingProps,r),t.child;case 8:return Vt(e,t,t.pendingProps.children,r),t.child;case 12:return Vt(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,Cn(t,t.type,n.value),Vt(e,t,n.children,r),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,ai(t),s=Ft(s),n=n(s),t.flags|=1,Vt(e,t,n,r),t.child;case 14:return ip(e,t,t.type,t.pendingProps,r);case 15:return ap(e,t,t.type,t.pendingProps,r);case 19:return vp(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},e===null?(r=Ec(n,r),r.ref=t.ref,t.child=r,r.return=t,t=r):(r=Kr(e.child,n),r.ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return op(e,t,r);case 24:return ai(t),n=Ft(Mt),e===null?(s=ts(),s===null&&(s=yt,m=$l(),s.pooledCache=m,m.refCount++,m!==null&&(s.pooledCacheLanes|=r),s=m),t.memoizedState={parent:n,cache:s},ns(t),Cn(t,Mt,s)):((e.lanes&r)!==0&&(is(e,t),Ba(t,null,null,r),Ua()),s=e.memoizedState,m=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Cn(t,Mt,n)):(n=m.cache,Cn(t,Mt,n),n!==s.cache&&Jl(t,[Mt],r,!0))),Vt(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function rn(e){e.flags|=4}function pp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wm(t)){if(t=wr.current,t!==null&&((tt&4194048)===tt?Br!==null:(tt&62914560)!==tt&&(tt&536870912)===0||t!==Br))throw Na=rs,Jv;e.flags|=8192}}function Oc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?be():536870912,e.lanes|=t,na|=t)}function Qa(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function QT(e,t,r){var n=t.pendingProps;switch(Kl(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return bt(t),null;case 3:return r=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Jr(Mt),Te(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?rn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yv())),bt(t),null;case 26:return r=t.memoizedState,e===null?(rn(t),r!==null?(bt(t),pp(t,r)):(bt(t),t.flags&=-16777217)):r?r!==e.memoizedState?(rn(t),bt(t),pp(t,r)):(bt(t),t.flags&=-16777217):(e.memoizedProps!==n&&rn(t),bt(t),t.flags&=-16777217),null;case 27:Ee(t),r=$.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&rn(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return bt(t),null}e=W.current,Aa(t)?Gv(t):(e=pm(s,n,r),t.stateNode=e,rn(t))}return bt(t),null;case 5:if(Ee(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&rn(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return bt(t),null}if(e=W.current,Aa(t))Gv(t);else{switch(s=Bc($.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?s.createElement(r,{is:n.is}):s.createElement(r)}}e[jt]=t,e[Pt]=n;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Ht(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&rn(t)}}return bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&rn(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=$.current,Aa(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,s=Wt,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[jt]=t,e=!!(e.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||cm(e.nodeValue,r)),e||ni(t)}else e=Bc(e).createTextNode(n),e[jt]=t,t.stateNode=e}return bt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Aa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(u(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));s[jt]=t}else La(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),s=!1}else s=Yv(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(en(t),t):(en(t),null)}if(en(t),(t.flags&128)!==0)return t.lanes=r,t;if(r=n!==null,e=e!==null&&e.memoizedState!==null,r){n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var m=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(m=n.memoizedState.cachePool.pool),m!==s&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),Oc(t,t.updateQueue),bt(t),null;case 4:return Te(),e===null&&uf(t.stateNode.containerInfo),bt(t),null;case 10:return Jr(t.type),bt(t),null;case 19:if(L(xt),s=t.memoizedState,s===null)return bt(t),null;if(n=(t.flags&128)!==0,m=s.rendering,m===null)if(n)Qa(s,!1);else{if(wt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=bc(e),m!==null){for(t.flags|=128,Qa(s,!1),e=m.updateQueue,t.updateQueue=e,Oc(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Hv(r,e),r=r.sibling;return I(xt,xt.current&1|2),t.child}e=e.sibling}s.tail!==null&&je()>Ac&&(t.flags|=128,n=!0,Qa(s,!1),t.lanes=4194304)}else{if(!n)if(e=bc(m),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Oc(t,e),Qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!m.alternate&&!ot)return bt(t),null}else 2*je()-s.renderingStartTime>Ac&&r!==536870912&&(t.flags|=128,n=!0,Qa(s,!1),t.lanes=4194304);s.isBackwards?(m.sibling=t.child,t.child=m):(e=s.last,e!==null?e.sibling=m:t.child=m,s.last=m)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=je(),t.sibling=null,e=xt.current,I(xt,n?e&1|2:e&1),t):(bt(t),null);case 22:case 23:return en(t),cs(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(r&536870912)!==0&&(t.flags&128)===0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),r=t.updateQueue,r!==null&&Oc(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),e!==null&&L(oi),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Jr(Mt),bt(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function YT(e,t){switch(Kl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(Mt),Te(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ee(t),null;case 13:if(en(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));La()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(xt),null;case 4:return Te(),null;case 10:return Jr(t.type),null;case 22:case 23:return en(t),cs(),e!==null&&L(oi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Jr(Mt),null;case 25:return null;default:return null}}function mp(e,t){switch(Kl(t),t.tag){case 3:Jr(Mt),Te();break;case 26:case 27:case 5:Ee(t);break;case 4:Te();break;case 13:en(t);break;case 19:L(xt);break;case 10:Jr(t.type);break;case 22:case 23:en(t),cs(),e!==null&&L(oi);break;case 24:Jr(Mt)}}function Ya(e,t){try{var r=t.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var s=n.next;r=s;do{if((r.tag&e)===e){n=void 0;var m=r.create,M=r.inst;n=m(),M.destroy=n}r=r.next}while(r!==s)}}catch(H){pt(t,t.return,H)}}function jn(e,t,r){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var m=s.next;n=m;do{if((n.tag&e)===e){var M=n.inst,H=M.destroy;if(H!==void 0){M.destroy=void 0,s=t;var re=r,le=H;try{le()}catch(ye){pt(s,re,ye)}}}n=n.next}while(n!==m)}}catch(ye){pt(t,t.return,ye)}}function yp(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{ih(t,r)}catch(n){pt(e,e.return,n)}}}function _p(e,t,r){r.props=ci(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){pt(e,t,n)}}function Ka(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof r=="function"?e.refCleanup=r(n):r.current=n}}catch(s){pt(e,t,s)}}function Ir(e,t){var r=e.ref,n=e.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(s){pt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(s){pt(e,t,s)}else r.current=null}function gp(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(s){pt(e,e.return,s)}}function Ns(e,t,r){try{var n=e.stateNode;hw(n,e.type,r,t),n[Pt]=t}catch(s){pt(e,e.return,s)}}function Sp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hn(e.type)||e.tag===4}function qs(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Us(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Uc));else if(n!==4&&(n===27&&Hn(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Us(e,t,r),e=e.sibling;e!==null;)Us(e,t,r),e=e.sibling}function Rc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(n===27&&Hn(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Rc(e,t,r),e=e.sibling;e!==null;)Rc(e,t,r),e=e.sibling}function bp(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ht(t,n,r),t[jt]=e,t[Pt]=r}catch(m){pt(e,e.return,m)}}var nn=!1,Et=!1,Bs=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,qt=null;function KT(e,t){if(e=e.containerInfo,sf=Gc,e=xv(e),ql(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,m=n.focusNode;n=n.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var M=0,H=-1,re=-1,le=0,ye=0,Se=e,se=null;t:for(;;){for(var fe;Se!==r||s!==0&&Se.nodeType!==3||(H=M+s),Se!==m||n!==0&&Se.nodeType!==3||(re=M+n),Se.nodeType===3&&(M+=Se.nodeValue.length),(fe=Se.firstChild)!==null;)se=Se,Se=fe;for(;;){if(Se===e)break t;if(se===r&&++le===s&&(H=M),se===m&&++ye===n&&(re=M),(fe=Se.nextSibling)!==null)break;Se=se,se=Se.parentNode}Se=fe}r=H===-1||re===-1?null:{start:H,end:re}}else r=null}r=r||{start:0,end:0}}else r=null;for(ff={focusedElem:e,selectionRange:r},Gc=!1,qt=t;qt!==null;)if(t=qt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,qt=e;else for(;qt!==null;){switch(t=qt,m=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=t,s=m.memoizedProps,m=m.memoizedState,n=r.stateNode;try{var Ve=ci(r.type,s,r.elementType===r.type);e=n.getSnapshotBeforeUpdate(Ve,m),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){pt(r,r.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)hf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,qt=e;break}qt=t.return}}function wp(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Nn(e,r),n&4&&Ya(5,r);break;case 1:if(Nn(e,r),n&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(M){pt(r,r.return,M)}else{var s=ci(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(M){pt(r,r.return,M)}}n&64&&yp(r),n&512&&Ka(r,r.return);break;case 3:if(Nn(e,r),n&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{ih(e,t)}catch(M){pt(r,r.return,M)}}break;case 27:t===null&&n&4&&bp(r);case 26:case 5:Nn(e,r),t===null&&n&4&&gp(r),n&512&&Ka(r,r.return);break;case 12:Nn(e,r);break;case 13:Nn(e,r),n&4&&Op(e,r),n&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=nw.bind(null,r),bw(e,r))));break;case 22:if(n=r.memoizedState!==null||nn,!n){t=t!==null&&t.memoizedState!==null||Et,s=nn;var m=Et;nn=n,(Et=t)&&!m?qn(e,r,(r.subtreeFlags&8772)!==0):Nn(e,r),nn=s,Et=m}break;case 30:break;default:Nn(e,r)}}function kp(e){var t=e.alternate;t!==null&&(e.alternate=null,kp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Fr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var St=null,ar=!1;function an(e,t,r){for(r=r.child;r!==null;)Ep(e,t,r),r=r.sibling}function Ep(e,t,r){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Re,r)}catch{}switch(r.tag){case 26:Et||Ir(r,t),an(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Et||Ir(r,t);var n=St,s=ar;Hn(r.type)&&(St=r.stateNode,ar=!1),an(e,t,r),no(r.stateNode),St=n,ar=s;break;case 5:Et||Ir(r,t);case 6:if(n=St,s=ar,St=null,an(e,t,r),St=n,ar=s,St!==null)if(ar)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(r.stateNode)}catch(m){pt(r,t,m)}else try{St.removeChild(r.stateNode)}catch(m){pt(r,t,m)}break;case 18:St!==null&&(ar?(e=St,vm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),fo(e)):vm(St,r.stateNode));break;case 4:n=St,s=ar,St=r.stateNode.containerInfo,ar=!0,an(e,t,r),St=n,ar=s;break;case 0:case 11:case 14:case 15:Et||jn(2,r,t),Et||jn(4,r,t),an(e,t,r);break;case 1:Et||(Ir(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"&&_p(r,t,n)),an(e,t,r);break;case 21:an(e,t,r);break;case 22:Et=(n=Et)||r.memoizedState!==null,an(e,t,r),Et=n;break;default:an(e,t,r)}}function Op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fo(e)}catch(r){pt(t,t.return,r)}}function XT(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Tp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Tp),t;default:throw Error(u(435,e.tag))}}function Is(e,t){var r=XT(e);t.forEach(function(n){var s=iw.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}function fr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n],m=e,M=t,H=M;e:for(;H!==null;){switch(H.tag){case 27:if(Hn(H.type)){St=H.stateNode,ar=!1;break e}break;case 5:St=H.stateNode,ar=!1;break e;case 3:case 4:St=H.stateNode.containerInfo,ar=!0;break e}H=H.return}if(St===null)throw Error(u(160));Ep(m,M,s),St=null,ar=!1,m=s.alternate,m!==null&&(m.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Rp(t,e),t=t.sibling}var Pr=null;function Rp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fr(t,e),dr(e),n&4&&(jn(3,e,e.return),Ya(3,e),jn(5,e,e.return));break;case 1:fr(t,e),dr(e),n&512&&(Et||r===null||Ir(r,r.return)),n&64&&nn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var s=Pr;if(fr(t,e),dr(e),n&512&&(Et||r===null||Ir(r,r.return)),n&4){var m=r!==null?r.memoizedState:null;if(n=e.memoizedState,r===null)if(n===null)if(e.stateNode===null){e:{n=e.type,r=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":m=s.getElementsByTagName("title")[0],(!m||m[Or]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=s.createElement(n),s.head.insertBefore(m,s.querySelector("head > title"))),Ht(m,n,r),m[jt]=e,gt(m),n=m;break e;case"link":var M=bm("link","href",s).get(n+(r.href||""));if(M){for(var H=0;H<M.length;H++)if(m=M[H],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){M.splice(H,1);break t}}m=s.createElement(n),Ht(m,n,r),s.head.appendChild(m);break;case"meta":if(M=bm("meta","content",s).get(n+(r.content||""))){for(H=0;H<M.length;H++)if(m=M[H],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){M.splice(H,1);break t}}m=s.createElement(n),Ht(m,n,r),s.head.appendChild(m);break;default:throw Error(u(468,n))}m[jt]=e,gt(m),n=m}e.stateNode=n}else Tm(s,e.type,e.stateNode);else e.stateNode=Sm(s,n,e.memoizedProps);else m!==n?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,n===null?Tm(s,e.type,e.stateNode):Sm(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ns(e,e.memoizedProps,r.memoizedProps)}break;case 27:fr(t,e),dr(e),n&512&&(Et||r===null||Ir(r,r.return)),r!==null&&n&4&&Ns(e,e.memoizedProps,r.memoizedProps);break;case 5:if(fr(t,e),dr(e),n&512&&(Et||r===null||Ir(r,r.return)),e.flags&32){s=e.stateNode;try{ji(s,"")}catch(fe){pt(e,e.return,fe)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,Ns(e,s,r!==null?r.memoizedProps:s)),n&1024&&(Bs=!0);break;case 6:if(fr(t,e),dr(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(fe){pt(e,e.return,fe)}}break;case 3:if(zc=null,s=Pr,Pr=Ic(t.containerInfo),fr(t,e),Pr=s,dr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fo(t.containerInfo)}catch(fe){pt(e,e.return,fe)}Bs&&(Bs=!1,Cp(e));break;case 4:n=Pr,Pr=Ic(e.stateNode.containerInfo),fr(t,e),dr(e),Pr=n;break;case 12:fr(t,e),dr(e);break;case 13:fr(t,e),dr(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Qs=je()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Is(e,n)));break;case 22:s=e.memoizedState!==null;var re=r!==null&&r.memoizedState!==null,le=nn,ye=Et;if(nn=le||s,Et=ye||re,fr(t,e),Et=ye,nn=le,dr(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(r===null||re||nn||Et||li(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){re=r=t;try{if(m=re.stateNode,s)M=m.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{H=re.stateNode;var Se=re.memoizedProps.style,se=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;H.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(fe){pt(re,re.return,fe)}}}else if(t.tag===6){if(r===null){re=t;try{re.stateNode.nodeValue=s?"":re.memoizedProps}catch(fe){pt(re,re.return,fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,Is(e,r))));break;case 19:fr(t,e),dr(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Is(e,n)));break;case 30:break;case 21:break;default:fr(t,e),dr(e)}}function dr(e){var t=e.flags;if(t&2){try{for(var r,n=e.return;n!==null;){if(Sp(n)){r=n;break}n=n.return}if(r==null)throw Error(u(160));switch(r.tag){case 27:var s=r.stateNode,m=qs(e);Rc(e,m,s);break;case 5:var M=r.stateNode;r.flags&32&&(ji(M,""),r.flags&=-33);var H=qs(e);Rc(e,H,M);break;case 3:case 4:var re=r.stateNode.containerInfo,le=qs(e);Us(e,le,re);break;default:throw Error(u(161))}}catch(ye){pt(e,e.return,ye)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Cp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Nn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wp(e,t.alternate,t),t=t.sibling}function li(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:jn(4,t,t.return),li(t);break;case 1:Ir(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&_p(t,t.return,r),li(t);break;case 27:no(t.stateNode);case 26:case 5:Ir(t,t.return),li(t);break;case 22:t.memoizedState===null&&li(t);break;case 30:li(t);break;default:li(t)}e=e.sibling}}function qn(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,m=t,M=m.flags;switch(m.tag){case 0:case 11:case 15:qn(s,m,r),Ya(4,m);break;case 1:if(qn(s,m,r),n=m,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(le){pt(n,n.return,le)}if(n=m,s=n.updateQueue,s!==null){var H=n.stateNode;try{var re=s.shared.hiddenCallbacks;if(re!==null)for(s.shared.hiddenCallbacks=null,s=0;s<re.length;s++)nh(re[s],H)}catch(le){pt(n,n.return,le)}}r&&M&64&&yp(m),Ka(m,m.return);break;case 27:bp(m);case 26:case 5:qn(s,m,r),r&&n===null&&M&4&&gp(m),Ka(m,m.return);break;case 12:qn(s,m,r);break;case 13:qn(s,m,r),r&&M&4&&Op(s,m);break;case 22:m.memoizedState===null&&qn(s,m,r),Ka(m,m.return);break;case 30:break;default:qn(s,m,r)}t=t.sibling}}function Vs(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&xa(r))}function zs(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xa(e))}function Vr(e,t,r,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ap(e,t,r,n),t=t.sibling}function Ap(e,t,r,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Vr(e,t,r,n),s&2048&&Ya(9,t);break;case 1:Vr(e,t,r,n);break;case 3:Vr(e,t,r,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xa(e)));break;case 12:if(s&2048){Vr(e,t,r,n),e=t.stateNode;try{var m=t.memoizedProps,M=m.id,H=m.onPostCommit;typeof H=="function"&&H(M,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(re){pt(t,t.return,re)}}else Vr(e,t,r,n);break;case 13:Vr(e,t,r,n);break;case 23:break;case 22:m=t.stateNode,M=t.alternate,t.memoizedState!==null?m._visibility&2?Vr(e,t,r,n):Xa(e,t):m._visibility&2?Vr(e,t,r,n):(m._visibility|=2,ea(e,t,r,n,(t.subtreeFlags&10256)!==0)),s&2048&&Vs(M,t);break;case 24:Vr(e,t,r,n),s&2048&&zs(t.alternate,t);break;default:Vr(e,t,r,n)}}function ea(e,t,r,n,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var m=e,M=t,H=r,re=n,le=M.flags;switch(M.tag){case 0:case 11:case 15:ea(m,M,H,re,s),Ya(8,M);break;case 23:break;case 22:var ye=M.stateNode;M.memoizedState!==null?ye._visibility&2?ea(m,M,H,re,s):Xa(m,M):(ye._visibility|=2,ea(m,M,H,re,s)),s&&le&2048&&Vs(M.alternate,M);break;case 24:ea(m,M,H,re,s),s&&le&2048&&zs(M.alternate,M);break;default:ea(m,M,H,re,s)}t=t.sibling}}function Xa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,n=t,s=n.flags;switch(n.tag){case 22:Xa(r,n),s&2048&&Vs(n.alternate,n);break;case 24:Xa(r,n),s&2048&&zs(n.alternate,n);break;default:Xa(r,n)}t=t.sibling}}var Za=8192;function ta(e){if(e.subtreeFlags&Za)for(e=e.child;e!==null;)Lp(e),e=e.sibling}function Lp(e){switch(e.tag){case 26:ta(e),e.flags&Za&&e.memoizedState!==null&&Dw(Pr,e.memoizedState,e.memoizedProps);break;case 5:ta(e);break;case 3:case 4:var t=Pr;Pr=Ic(e.stateNode.containerInfo),ta(e),Pr=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Za,Za=16777216,ta(e),Za=t):ta(e));break;default:ta(e)}}function Pp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Wa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var n=t[r];qt=n,xp(n,e)}Pp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mp(e),e=e.sibling}function Mp(e){switch(e.tag){case 0:case 11:case 15:Wa(e),e.flags&2048&&jn(9,e,e.return);break;case 3:Wa(e);break;case 12:Wa(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cc(e)):Wa(e);break;default:Wa(e)}}function Cc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var n=t[r];qt=n,xp(n,e)}Pp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:jn(8,t,t.return),Cc(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,Cc(t));break;default:Cc(t)}e=e.sibling}}function xp(e,t){for(;qt!==null;){var r=qt;switch(r.tag){case 0:case 11:case 15:jn(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:xa(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,qt=n;else e:for(r=e;qt!==null;){n=qt;var s=n.sibling,m=n.return;if(kp(n),n===r){qt=null;break e}if(s!==null){s.return=m,qt=s;break e}qt=m}}}var ZT={getCacheForType:function(e){var t=Ft(Mt),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r}},WT=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,$e=null,tt=0,lt=0,vr=null,Un=!1,ra=!1,Hs=!1,on=0,wt=0,Bn=0,si=0,Fs=0,kr=0,na=0,Ja=null,or=null,Gs=!1,Qs=0,Ac=1/0,Lc=null,In=null,zt=0,Vn=null,ia=null,aa=0,Ys=0,Ks=null,Dp=null,$a=0,Xs=null;function hr(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(j.T!==null){var e=Qi;return e!==0?e:rf()}return st()}function jp(){kr===0&&(kr=(tt&536870912)===0||ot?ve():536870912);var e=wr.current;return e!==null&&(e.flags|=32),kr}function pr(e,t,r){(e===yt&&(lt===2||lt===9)||e.cancelPendingCommit!==null)&&(oa(e,0),zn(e,tt,kr,!1)),Ze(e,r),((ct&2)===0||e!==yt)&&(e===yt&&((ct&2)===0&&(si|=r),wt===4&&zn(e,tt,kr,!1)),zr(e))}function Np(e,t,r){if((ct&6)!==0)throw Error(u(327));var n=!r&&(t&124)===0&&(t&e.expiredLanes)===0||te(e,t),s=n?ew(e,t):Js(e,t,!0),m=n;do{if(s===0){ra&&!n&&zn(e,t,0,!1);break}else{if(r=e.current.alternate,m&&!JT(r)){s=Js(e,t,!1),m=!1;continue}if(s===2){if(m=t,e.errorRecoveryDisabledLanes&m)var M=0;else M=e.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){t=M;e:{var H=e;s=Ja;var re=H.current.memoizedState.isDehydrated;if(re&&(oa(H,M).flags|=256),M=Js(H,M,!1),M!==2){if(Hs&&!re){H.errorRecoveryDisabledLanes|=m,si|=m,s=4;break e}m=or,or=s,m!==null&&(or===null?or=m:or.push.apply(or,m))}s=M}if(m=!1,s!==2)continue}}if(s===1){oa(e,0),zn(e,t,0,!0);break}e:{switch(n=e,m=s,m){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:zn(n,t,kr,!Un);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(s=Qs+300-je(),10<s)){if(zn(n,t,kr,!Un),X(n,0,!0)!==0)break e;n.timeoutHandle=fm(qp.bind(null,n,r,or,Lc,Gs,t,kr,si,na,Un,m,2,-0,0),s);break e}qp(n,r,or,Lc,Gs,t,kr,si,na,Un,m,0,-0,0)}}break}while(!0);zr(e)}function qp(e,t,r,n,s,m,M,H,re,le,ye,Se,se,fe){if(e.timeoutHandle=-1,Se=t.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(oo={stylesheets:null,count:0,unsuspend:xw},Lp(t),Se=jw(),Se!==null)){e.cancelPendingCommit=Se(Fp.bind(null,e,t,m,r,n,s,M,H,re,ye,1,se,fe)),zn(e,m,M,!le);return}Fp(e,t,m,r,n,s,M,H,re)}function JT(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var s=r[n],m=s.getSnapshot;s=s.value;try{if(!lr(m(),s))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t,r,n){t&=~Fs,t&=~si,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var m=31-Xe(s),M=1<<m;n[m]=-1,s&=~M}r!==0&&mt(e,r,t)}function Pc(){return(ct&6)===0?(eo(0),!1):!0}function Zs(){if($e!==null){if(lt===0)var e=$e.return;else e=$e,Wr=ii=null,vs(e),Ji=null,Fa=0,e=$e;for(;e!==null;)mp(e.alternate,e),e=e.return;$e=null}}function oa(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,mw(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Zs(),yt=e,$e=r=Kr(e.current,null),tt=t,lt=0,vr=null,Un=!1,ra=te(e,t),Hs=!1,na=kr=Fs=si=Bn=wt=0,or=Ja=null,Gs=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-Xe(n),m=1<<s;t|=e[s],n&=~m}return on=t,$u(),r}function Up(e,t){We=null,j.H=_c,t===ja||t===cc?(t=th(),lt=3):t===Jv?(t=th(),lt=4):lt=t===rp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,vr=t,$e===null&&(wt=1,wc(e,gr(t,e.current)))}function Bp(){var e=j.H;return j.H=_c,e===null?_c:e}function Ip(){var e=j.A;return j.A=ZT,e}function Ws(){wt=4,Un||(tt&4194048)!==tt&&wr.current!==null||(ra=!0),(Bn&134217727)===0&&(si&134217727)===0||yt===null||zn(yt,tt,kr,!1)}function Js(e,t,r){var n=ct;ct|=2;var s=Bp(),m=Ip();(yt!==e||tt!==t)&&(Lc=null,oa(e,t)),t=!1;var M=wt;e:do try{if(lt!==0&&$e!==null){var H=$e,re=vr;switch(lt){case 8:Zs(),M=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(t=!0);var le=lt;if(lt=0,vr=null,ua(e,H,re,le),r&&ra){M=0;break e}break;default:le=lt,lt=0,vr=null,ua(e,H,re,le)}}$T(),M=wt;break}catch(ye){Up(e,ye)}while(!0);return t&&e.shellSuspendCounter++,Wr=ii=null,ct=n,j.H=s,j.A=m,$e===null&&(yt=null,tt=0,$u()),M}function $T(){for(;$e!==null;)Vp($e)}function ew(e,t){var r=ct;ct|=2;var n=Bp(),s=Ip();yt!==e||tt!==t?(Lc=null,Ac=je()+500,oa(e,t)):ra=te(e,t);e:do try{if(lt!==0&&$e!==null){t=$e;var m=vr;t:switch(lt){case 1:lt=0,vr=null,ua(e,t,m,1);break;case 2:case 9:if($v(m)){lt=0,vr=null,zp(t);break}t=function(){lt!==2&&lt!==9||yt!==e||(lt=7),zr(e)},m.then(t,t);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:$v(m)?(lt=0,vr=null,zp(t)):(lt=0,vr=null,ua(e,t,m,7));break;case 5:var M=null;switch($e.tag){case 26:M=$e.memoizedState;case 5:case 27:var H=$e;if(!M||wm(M)){lt=0,vr=null;var re=H.sibling;if(re!==null)$e=re;else{var le=H.return;le!==null?($e=le,Mc(le)):$e=null}break t}}lt=0,vr=null,ua(e,t,m,5);break;case 6:lt=0,vr=null,ua(e,t,m,6);break;case 8:Zs(),wt=6;break e;default:throw Error(u(462))}}tw();break}catch(ye){Up(e,ye)}while(!0);return Wr=ii=null,j.H=n,j.A=s,ct=r,$e!==null?0:(yt=null,tt=0,$u(),wt)}function tw(){for(;$e!==null&&!Oe();)Vp($e)}function Vp(e){var t=hp(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?Mc(e):$e=t}function zp(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=cp(r,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=cp(r,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:vs(t);default:mp(r,t),t=$e=Hv(t,on),t=hp(r,t,on)}e.memoizedProps=e.pendingProps,t===null?Mc(e):$e=t}function ua(e,t,r,n){Wr=ii=null,vs(t),Ji=null,Fa=0;var s=t.return;try{if(FT(e,s,t,r,tt)){wt=1,wc(e,gr(r,e.current)),$e=null;return}}catch(m){if(s!==null)throw $e=s,m;wt=1,wc(e,gr(r,e.current)),$e=null;return}t.flags&32768?(ot||n===1?e=!0:ra||(tt&536870912)!==0?e=!1:(Un=e=!0,(n===2||n===9||n===3||n===6)&&(n=wr.current,n!==null&&n.tag===13&&(n.flags|=16384))),Hp(t,e)):Mc(t)}function Mc(e){var t=e;do{if((t.flags&32768)!==0){Hp(t,Un);return}e=t.return;var r=QT(t.alternate,t,on);if(r!==null){$e=r;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);wt===0&&(wt=5)}function Hp(e,t){do{var r=YT(e.alternate,e);if(r!==null){r.flags&=32767,$e=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){$e=e;return}$e=e=r}while(e!==null);wt=6,$e=null}function Fp(e,t,r,n,s,m,M,H,re){e.cancelPendingCommit=null;do xc();while(zt!==0);if((ct&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(m=t.lanes|t.childLanes,m|=zl,_t(e,r,m,M,H,re),e===yt&&($e=yt=null,tt=0),ia=t,Vn=e,aa=r,Ys=m,Ks=s,Dp=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,aw(oe,function(){return Xp(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=j.T,j.T=null,s=Q.p,Q.p=2,M=ct,ct|=4;try{KT(e,t,r)}finally{ct=M,Q.p=s,j.T=n}}zt=1,Gp(),Qp(),Yp()}}function Gp(){if(zt===1){zt=0;var e=Vn,t=ia,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=j.T,j.T=null;var n=Q.p;Q.p=2;var s=ct;ct|=4;try{Rp(t,e);var m=ff,M=xv(e.containerInfo),H=m.focusedElem,re=m.selectionRange;if(M!==H&&H&&H.ownerDocument&&Mv(H.ownerDocument.documentElement,H)){if(re!==null&&ql(H)){var le=re.start,ye=re.end;if(ye===void 0&&(ye=le),"selectionStart"in H)H.selectionStart=le,H.selectionEnd=Math.min(ye,H.value.length);else{var Se=H.ownerDocument||document,se=Se&&Se.defaultView||window;if(se.getSelection){var fe=se.getSelection(),Ve=H.textContent.length,Ue=Math.min(re.start,Ve),vt=re.end===void 0?Ue:Math.min(re.end,Ve);!fe.extend&&Ue>vt&&(M=vt,vt=Ue,Ue=M);var ue=Pv(H,Ue),ne=Pv(H,vt);if(ue&&ne&&(fe.rangeCount!==1||fe.anchorNode!==ue.node||fe.anchorOffset!==ue.offset||fe.focusNode!==ne.node||fe.focusOffset!==ne.offset)){var ce=Se.createRange();ce.setStart(ue.node,ue.offset),fe.removeAllRanges(),Ue>vt?(fe.addRange(ce),fe.extend(ne.node,ne.offset)):(ce.setEnd(ne.node,ne.offset),fe.addRange(ce))}}}}for(Se=[],fe=H;fe=fe.parentNode;)fe.nodeType===1&&Se.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Se.length;H++){var ge=Se[H];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Gc=!!sf,ff=sf=null}finally{ct=s,Q.p=n,j.T=r}}e.current=t,zt=2}}function Qp(){if(zt===2){zt=0;var e=Vn,t=ia,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=j.T,j.T=null;var n=Q.p;Q.p=2;var s=ct;ct|=4;try{wp(e,t.alternate,t)}finally{ct=s,Q.p=n,j.T=r}}zt=3}}function Yp(){if(zt===4||zt===3){zt=0,_e();var e=Vn,t=ia,r=aa,n=Dp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?zt=5:(zt=0,ia=Vn=null,Kp(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(In=null),Fe(r),t=t.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Re,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=j.T,s=Q.p,Q.p=2,j.T=null;try{for(var m=e.onRecoverableError,M=0;M<n.length;M++){var H=n[M];m(H.value,{componentStack:H.stack})}}finally{j.T=t,Q.p=s}}(aa&3)!==0&&xc(),zr(e),s=e.pendingLanes,(r&4194090)!==0&&(s&42)!==0?e===Xs?$a++:($a=0,Xs=e):$a=0,eo(0)}}function Kp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,xa(t)))}function xc(e){return Gp(),Qp(),Yp(),Xp()}function Xp(){if(zt!==5)return!1;var e=Vn,t=Ys;Ys=0;var r=Fe(aa),n=j.T,s=Q.p;try{Q.p=32>r?32:r,j.T=null,r=Ks,Ks=null;var m=Vn,M=aa;if(zt=0,ia=Vn=null,aa=0,(ct&6)!==0)throw Error(u(331));var H=ct;if(ct|=4,Mp(m.current),Ap(m,m.current,M,r),ct=H,eo(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Re,m)}catch{}return!0}finally{Q.p=s,j.T=n,Kp(e,t)}}function Zp(e,t,r){t=gr(r,t),t=Rs(e.stateNode,t,2),e=Pn(e,t,2),e!==null&&(Ze(e,2),zr(e))}function pt(e,t,r){if(e.tag===3)Zp(e,e,r);else for(;t!==null;){if(t.tag===3){Zp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(In===null||!In.has(n))){e=gr(r,e),r=ep(2),n=Pn(t,r,2),n!==null&&(tp(r,n,t,e),Ze(n,2),zr(n));break}}t=t.return}}function $s(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new WT;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(Hs=!0,s.add(r),e=rw.bind(null,e,t,r),t.then(e,e))}function rw(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,yt===e&&(tt&r)===r&&(wt===4||wt===3&&(tt&62914560)===tt&&300>je()-Qs?(ct&2)===0&&oa(e,0):Fs|=r,na===tt&&(na=0)),zr(e)}function Wp(e,t){t===0&&(t=be()),e=zi(e,t),e!==null&&(Ze(e,t),zr(e))}function nw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wp(e,r)}function iw(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),Wp(e,r)}function aw(e,t){return Le(e,t)}var Dc=null,ca=null,ef=!1,jc=!1,tf=!1,fi=0;function zr(e){e!==ca&&e.next===null&&(ca===null?Dc=ca=e:ca=ca.next=e),jc=!0,ef||(ef=!0,uw())}function eo(e,t){if(!tf&&jc){tf=!0;do for(var r=!1,n=Dc;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var m=0;else{var M=n.suspendedLanes,H=n.pingedLanes;m=(1<<31-Xe(42|e)+1)-1,m&=s&~(M&~H),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,tm(n,m))}else m=tt,m=X(n,n===yt?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(m&3)===0||te(n,m)||(r=!0,tm(n,m));n=n.next}while(r);tf=!1}}function ow(){Jp()}function Jp(){jc=ef=!1;var e=0;fi!==0&&(pw()&&(e=fi),fi=0);for(var t=je(),r=null,n=Dc;n!==null;){var s=n.next,m=$p(n,t);m===0?(n.next=null,r===null?Dc=s:r.next=s,s===null&&(ca=r)):(r=n,(e!==0||(m&3)!==0)&&(jc=!0)),n=s}eo(e)}function $p(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var M=31-Xe(m),H=1<<M,re=s[M];re===-1?((H&r)===0||(H&n)!==0)&&(s[M]=de(H,t)):re<=t&&(e.expiredLanes|=H),m&=~H}if(t=yt,r=tt,r=X(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,r===0||e===t&&(lt===2||lt===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Pe(n),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||te(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(n!==null&&Pe(n),Fe(r)){case 2:case 8:r=ee;break;case 32:r=oe;break;case 268435456:r=V;break;default:r=oe}return n=em.bind(null,e),r=Le(r,n),e.callbackPriority=t,e.callbackNode=r,t}return n!==null&&n!==null&&Pe(n),e.callbackPriority=2,e.callbackNode=null,2}function em(e,t){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(xc()&&e.callbackNode!==r)return null;var n=tt;return n=X(e,e===yt?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Np(e,n,t),$p(e,je()),e.callbackNode!=null&&e.callbackNode===r?em.bind(null,e):null)}function tm(e,t){if(xc())return null;Np(e,t,!0)}function uw(){yw(function(){(ct&6)!==0?Le(Qe,ow):Jp()})}function rf(){return fi===0&&(fi=ve()),fi}function rm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qu(""+e)}function nm(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function cw(e,t,r,n,s){if(t==="submit"&&r&&r.stateNode===s){var m=rm((s[Pt]||null).action),M=n.submitter;M&&(t=(t=M[Pt]||null)?rm(t.formAction):M.getAttribute("formAction"),t!==null&&(m=t,M=null));var H=new Zu("action","action",null,n,s);e.push({event:H,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(fi!==0){var re=M?nm(s,M):new FormData(s);Ts(r,{pending:!0,data:re,method:s.method,action:m},null,re)}}else typeof m=="function"&&(H.preventDefault(),re=M?nm(s,M):new FormData(s),Ts(r,{pending:!0,data:re,method:s.method,action:m},m,re))},currentTarget:s}]})}}for(var nf=0;nf<Vl.length;nf++){var af=Vl[nf],lw=af.toLowerCase(),sw=af[0].toUpperCase()+af.slice(1);Lr(lw,"on"+sw)}Lr(Nv,"onAnimationEnd"),Lr(qv,"onAnimationIteration"),Lr(Uv,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(RT,"onTransitionRun"),Lr(CT,"onTransitionStart"),Lr(AT,"onTransitionCancel"),Lr(Bv,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),It("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),It("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),It("onBeforeInput",["compositionend","keypress","textInput","paste"]),It("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(to));function im(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var m=void 0;if(t)for(var M=n.length-1;0<=M;M--){var H=n[M],re=H.instance,le=H.currentTarget;if(H=H.listener,re!==m&&s.isPropagationStopped())break e;m=H,s.currentTarget=le;try{m(s)}catch(ye){Tc(ye)}s.currentTarget=null,m=re}else for(M=0;M<n.length;M++){if(H=n[M],re=H.instance,le=H.currentTarget,H=H.listener,re!==m&&s.isPropagationStopped())break e;m=H,s.currentTarget=le;try{m(s)}catch(ye){Tc(ye)}s.currentTarget=null,m=re}}}}function et(e,t){var r=t[Pi];r===void 0&&(r=t[Pi]=new Set);var n=e+"__bubble";r.has(n)||(am(t,e,2,!1),r.add(n))}function of(e,t,r){var n=0;t&&(n|=4),am(r,e,n,t)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function uf(e){if(!e[Nc]){e[Nc]=!0,Mi.forEach(function(r){r!=="selectionchange"&&(fw.has(r)||of(r,!1,e),of(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nc]||(t[Nc]=!0,of("selectionchange",!1,t))}}function am(e,t,r,n){switch(Am(t)){case 2:var s=Uw;break;case 8:s=Bw;break;default:s=bf}r=s.bind(null,t,r,e),s=void 0,!Cl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function cf(e,t,r,n,s){var m=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var M=n.tag;if(M===3||M===4){var H=n.stateNode.containerInfo;if(H===s)break;if(M===4)for(M=n.return;M!==null;){var re=M.tag;if((re===3||re===4)&&M.stateNode.containerInfo===s)return;M=M.return}for(;H!==null;){if(M=Gr(H),M===null)return;if(re=M.tag,re===5||re===6||re===26||re===27){n=m=M;continue e}H=H.parentNode}}n=n.return}dv(function(){var le=m,ye=Ol(r),Se=[];e:{var se=Iv.get(e);if(se!==void 0){var fe=Zu,Ve=e;switch(e){case"keypress":if(Ku(r)===0)break e;case"keydown":case"keyup":fe=aT;break;case"focusin":Ve="focus",fe=Ml;break;case"focusout":Ve="blur",fe=Ml;break;case"beforeblur":case"afterblur":fe=Ml;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=pv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=cT;break;case Nv:case qv:case Uv:fe=Zb;break;case Bv:fe=sT;break;case"scroll":case"scrollend":fe=Gb;break;case"wheel":fe=dT;break;case"copy":case"cut":case"paste":fe=Jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=yv;break;case"toggle":case"beforetoggle":fe=hT}var Ue=(t&4)!==0,vt=!Ue&&(e==="scroll"||e==="scrollend"),ue=Ue?se!==null?se+"Capture":null:se;Ue=[];for(var ne=le,ce;ne!==null;){var ge=ne;if(ce=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ce===null||ue===null||(ge=Sa(ne,ue),ge!=null&&Ue.push(ro(ne,ge,ce))),vt)break;ne=ne.return}0<Ue.length&&(se=new fe(se,Ve,null,r,ye),Se.push({event:se,listeners:Ue}))}}if((t&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",se&&r!==El&&(Ve=r.relatedTarget||r.fromElement)&&(Gr(Ve)||Ve[mr]))break e;if((fe||se)&&(se=ye.window===ye?ye:(se=ye.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(Ve=r.relatedTarget||r.toElement,fe=le,Ve=Ve?Gr(Ve):null,Ve!==null&&(vt=i(Ve),Ue=Ve.tag,Ve!==vt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ve=null)):(fe=null,Ve=le),fe!==Ve)){if(Ue=pv,ge="onMouseLeave",ue="onMouseEnter",ne="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=yv,ge="onPointerLeave",ue="onPointerEnter",ne="pointer"),vt=fe==null?se:Cr(fe),ce=Ve==null?se:Cr(Ve),se=new Ue(ge,ne+"leave",fe,r,ye),se.target=vt,se.relatedTarget=ce,ge=null,Gr(ye)===le&&(Ue=new Ue(ue,ne+"enter",Ve,r,ye),Ue.target=ce,Ue.relatedTarget=vt,ge=Ue),vt=ge,fe&&Ve)t:{for(Ue=fe,ue=Ve,ne=0,ce=Ue;ce;ce=la(ce))ne++;for(ce=0,ge=ue;ge;ge=la(ge))ce++;for(;0<ne-ce;)Ue=la(Ue),ne--;for(;0<ce-ne;)ue=la(ue),ce--;for(;ne--;){if(Ue===ue||ue!==null&&Ue===ue.alternate)break t;Ue=la(Ue),ue=la(ue)}Ue=null}else Ue=null;fe!==null&&om(Se,se,fe,Ue,!1),Ve!==null&&vt!==null&&om(Se,vt,Ve,Ue,!0)}}e:{if(se=le?Cr(le):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Me=Ev;else if(wv(se))if(Ov)Me=kT;else{Me=TT;var Je=bT}else fe=se.nodeName,!fe||fe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?le&&kl(le.elementType)&&(Me=Ev):Me=wT;if(Me&&(Me=Me(e,le))){kv(Se,Me,r,ye);break e}Je&&Je(e,se,le),e==="focusout"&&le&&se.type==="number"&&le.memoizedProps.value!=null&&wl(se,"number",se.value)}switch(Je=le?Cr(le):window,e){case"focusin":(wv(Je)||Je.contentEditable==="true")&&(Bi=Je,Ul=le,Ca=null);break;case"focusout":Ca=Ul=Bi=null;break;case"mousedown":Bl=!0;break;case"contextmenu":case"mouseup":case"dragend":Bl=!1,Dv(Se,r,ye);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":Dv(Se,r,ye)}var qe;if(Dl)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ui?bv(e,r)&&(Ie="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ie="onCompositionStart");Ie&&(_v&&r.locale!=="ko"&&(Ui||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ui&&(qe=vv()):(Rn=ye,Al="value"in Rn?Rn.value:Rn.textContent,Ui=!0)),Je=qc(le,Ie),0<Je.length&&(Ie=new mv(Ie,e,null,r,ye),Se.push({event:Ie,listeners:Je}),qe?Ie.data=qe:(qe=Tv(r),qe!==null&&(Ie.data=qe)))),(qe=mT?yT(e,r):_T(e,r))&&(Ie=qc(le,"onBeforeInput"),0<Ie.length&&(Je=new mv("onBeforeInput","beforeinput",null,r,ye),Se.push({event:Je,listeners:Ie}),Je.data=qe)),cw(Se,e,le,r,ye)}im(Se,t)})}function ro(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,m=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||m===null||(s=Sa(e,r),s!=null&&n.unshift(ro(e,s,m)),s=Sa(e,t),s!=null&&n.push(ro(e,s,m))),e.tag===3)return n;e=e.return}return[]}function la(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function om(e,t,r,n,s){for(var m=t._reactName,M=[];r!==null&&r!==n;){var H=r,re=H.alternate,le=H.stateNode;if(H=H.tag,re!==null&&re===n)break;H!==5&&H!==26&&H!==27||le===null||(re=le,s?(le=Sa(r,m),le!=null&&M.unshift(ro(r,le,re))):s||(le=Sa(r,m),le!=null&&M.push(ro(r,le,re)))),r=r.return}M.length!==0&&e.push({event:t,listeners:M})}var dw=/\r\n?/g,vw=/\u0000|\uFFFD/g;function um(e){return(typeof e=="string"?e:""+e).replace(dw,`
`).replace(vw,"")}function cm(e,t){return t=um(t),um(e)===t}function Uc(){}function dt(e,t,r,n,s,m){switch(r){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||ji(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&ji(e,""+n);break;case"className":Hu(e,"class",n);break;case"tabIndex":Hu(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Hu(e,r,n);break;case"style":sv(e,n,m);break;case"data":if(t!=="object"){Hu(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(r);break}n=Qu(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(t!=="input"&&dt(e,t,"name",s.name,s,null),dt(e,t,"formEncType",s.formEncType,s,null),dt(e,t,"formMethod",s.formMethod,s,null),dt(e,t,"formTarget",s.formTarget,s,null)):(dt(e,t,"encType",s.encType,s,null),dt(e,t,"method",s.method,s,null),dt(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(r);break}n=Qu(""+n),e.setAttribute(r,n);break;case"onClick":n!=null&&(e.onclick=Uc);break;case"onScroll":n!=null&&et("scroll",e);break;case"onScrollEnd":n!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}r=Qu(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":n===!0?e.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":et("beforetoggle",e),et("toggle",e),zu(e,"popover",n);break;case"xlinkActuate":Qr(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Qr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Qr(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Qr(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Qr(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Qr(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Qr(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Qr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Qr(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":zu(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Hb.get(r)||r,zu(e,r,n))}}function lf(e,t,r,n,s,m){switch(r){case"style":sv(e,n,m);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(r=n.__html,r!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=r}}break;case"children":typeof n=="string"?ji(e,n):(typeof n=="number"||typeof n=="bigint")&&ji(e,""+n);break;case"onScroll":n!=null&&et("scroll",e);break;case"onScrollEnd":n!=null&&et("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rr.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(s=r.endsWith("Capture"),t=r.slice(2,s?r.length-7:void 0),m=e[Pt]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(t,m,s),typeof n=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,s);break e}r in e?e[r]=n:n===!0?e.setAttribute(r,""):zu(e,r,n)}}}function Ht(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var n=!1,s=!1,m;for(m in r)if(r.hasOwnProperty(m)){var M=r[m];if(M!=null)switch(m){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:dt(e,t,m,M,r,null)}}s&&dt(e,t,"srcSet",r.srcSet,r,null),n&&dt(e,t,"src",r.src,r,null);return;case"input":et("invalid",e);var H=m=M=s=null,re=null,le=null;for(n in r)if(r.hasOwnProperty(n)){var ye=r[n];if(ye!=null)switch(n){case"name":s=ye;break;case"type":M=ye;break;case"checked":re=ye;break;case"defaultChecked":le=ye;break;case"value":m=ye;break;case"defaultValue":H=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(u(137,t));break;default:dt(e,t,n,ye,r,null)}}ov(e,m,H,re,le,M,s,!1),Fu(e);return;case"select":et("invalid",e),n=M=m=null;for(s in r)if(r.hasOwnProperty(s)&&(H=r[s],H!=null))switch(s){case"value":m=H;break;case"defaultValue":M=H;break;case"multiple":n=H;default:dt(e,t,s,H,r,null)}t=m,r=M,e.multiple=!!n,t!=null?Di(e,!!n,t,!1):r!=null&&Di(e,!!n,r,!0);return;case"textarea":et("invalid",e),m=s=n=null;for(M in r)if(r.hasOwnProperty(M)&&(H=r[M],H!=null))switch(M){case"value":n=H;break;case"defaultValue":s=H;break;case"children":m=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(u(91));break;default:dt(e,t,M,H,r,null)}cv(e,n,s,m),Fu(e);return;case"option":for(re in r)if(r.hasOwnProperty(re)&&(n=r[re],n!=null))switch(re){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:dt(e,t,re,n,r,null)}return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(n=0;n<to.length;n++)et(to[n],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in r)if(r.hasOwnProperty(le)&&(n=r[le],n!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:dt(e,t,le,n,r,null)}return;default:if(kl(t)){for(ye in r)r.hasOwnProperty(ye)&&(n=r[ye],n!==void 0&&lf(e,t,ye,n,r,void 0));return}}for(H in r)r.hasOwnProperty(H)&&(n=r[H],n!=null&&dt(e,t,H,n,r,null))}function hw(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,m=null,M=null,H=null,re=null,le=null,ye=null;for(fe in r){var Se=r[fe];if(r.hasOwnProperty(fe)&&Se!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":re=Se;default:n.hasOwnProperty(fe)||dt(e,t,fe,null,n,Se)}}for(var se in n){var fe=n[se];if(Se=r[se],n.hasOwnProperty(se)&&(fe!=null||Se!=null))switch(se){case"type":m=fe;break;case"name":s=fe;break;case"checked":le=fe;break;case"defaultChecked":ye=fe;break;case"value":M=fe;break;case"defaultValue":H=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(u(137,t));break;default:fe!==Se&&dt(e,t,se,fe,n,Se)}}Tl(e,M,H,re,le,ye,m,s);return;case"select":fe=M=H=se=null;for(m in r)if(re=r[m],r.hasOwnProperty(m)&&re!=null)switch(m){case"value":break;case"multiple":fe=re;default:n.hasOwnProperty(m)||dt(e,t,m,null,n,re)}for(s in n)if(m=n[s],re=r[s],n.hasOwnProperty(s)&&(m!=null||re!=null))switch(s){case"value":se=m;break;case"defaultValue":H=m;break;case"multiple":M=m;default:m!==re&&dt(e,t,s,m,n,re)}t=H,r=M,n=fe,se!=null?Di(e,!!r,se,!1):!!n!=!!r&&(t!=null?Di(e,!!r,t,!0):Di(e,!!r,r?[]:"",!1));return;case"textarea":fe=se=null;for(H in r)if(s=r[H],r.hasOwnProperty(H)&&s!=null&&!n.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:dt(e,t,H,null,n,s)}for(M in n)if(s=n[M],m=r[M],n.hasOwnProperty(M)&&(s!=null||m!=null))switch(M){case"value":se=s;break;case"defaultValue":fe=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(u(91));break;default:s!==m&&dt(e,t,M,s,n,m)}uv(e,se,fe);return;case"option":for(var Ve in r)if(se=r[Ve],r.hasOwnProperty(Ve)&&se!=null&&!n.hasOwnProperty(Ve))switch(Ve){case"selected":e.selected=!1;break;default:dt(e,t,Ve,null,n,se)}for(re in n)if(se=n[re],fe=r[re],n.hasOwnProperty(re)&&se!==fe&&(se!=null||fe!=null))switch(re){case"selected":e.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:dt(e,t,re,se,n,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in r)se=r[Ue],r.hasOwnProperty(Ue)&&se!=null&&!n.hasOwnProperty(Ue)&&dt(e,t,Ue,null,n,se);for(le in n)if(se=n[le],fe=r[le],n.hasOwnProperty(le)&&se!==fe&&(se!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(u(137,t));break;default:dt(e,t,le,se,n,fe)}return;default:if(kl(t)){for(var vt in r)se=r[vt],r.hasOwnProperty(vt)&&se!==void 0&&!n.hasOwnProperty(vt)&&lf(e,t,vt,void 0,n,se);for(ye in n)se=n[ye],fe=r[ye],!n.hasOwnProperty(ye)||se===fe||se===void 0&&fe===void 0||lf(e,t,ye,se,n,fe);return}}for(var ue in r)se=r[ue],r.hasOwnProperty(ue)&&se!=null&&!n.hasOwnProperty(ue)&&dt(e,t,ue,null,n,se);for(Se in n)se=n[Se],fe=r[Se],!n.hasOwnProperty(Se)||se===fe||se==null&&fe==null||dt(e,t,Se,se,n,fe)}var sf=null,ff=null;function Bc(e){return e.nodeType===9?e:e.ownerDocument}function lm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function df(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vf=null;function pw(){var e=window.event;return e&&e.type==="popstate"?e===vf?!1:(vf=e,!0):(vf=null,!1)}var fm=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,yw=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(e){return dm.resolve(null).then(e).catch(_w)}:fm;function _w(e){setTimeout(function(){throw e})}function Hn(e){return e==="head"}function vm(e,t){var r=t,n=0,s=0;do{var m=r.nextSibling;if(e.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"){if(0<n&&8>n){r=n;var M=e.ownerDocument;if(r&1&&no(M.documentElement),r&2&&no(M.body),r&4)for(r=M.head,no(r),M=r.firstChild;M;){var H=M.nextSibling,re=M.nodeName;M[Or]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&M.rel.toLowerCase()==="stylesheet"||r.removeChild(M),M=H}}if(s===0){e.removeChild(m),fo(t);return}s--}else r==="$"||r==="$?"||r==="$!"?s++:n=r.charCodeAt(0)-48;else n=0;r=m}while(r);fo(t)}function hf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":hf(r),Fr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function gw(e,t,r,n){for(;e.nodeType===1;){var s=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Or])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Mr(e.nextSibling),e===null)break}return null}function Sw(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Mr(e.nextSibling),e===null))return null;return e}function pf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function bw(e,t){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var mf=null;function hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}function pm(e,t,r){switch(t=Bc(r),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function no(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fr(e)}var Er=new Map,mm=new Set;function Ic(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var un=Q.d;Q.d={f:Tw,r:ww,D:kw,C:Ew,L:Ow,m:Rw,X:Aw,S:Cw,M:Lw};function Tw(){var e=un.f(),t=Pc();return e||t}function ww(e){var t=Rr(e);t!==null&&t.tag===5&&t.type==="form"?Nh(t):un.r(e)}var sa=typeof document>"u"?null:document;function ym(e,t,r){var n=sa;if(n&&typeof t=="string"&&t){var s=_r(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof r=="string"&&(s+='[crossorigin="'+r+'"]'),mm.has(s)||(mm.add(s),e={rel:e,crossOrigin:r,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Ht(t,"link",e),gt(t),n.head.appendChild(t)))}}function kw(e){un.D(e),ym("dns-prefetch",e,null)}function Ew(e,t){un.C(e,t),ym("preconnect",e,t)}function Ow(e,t,r){un.L(e,t,r);var n=sa;if(n&&e&&t){var s='link[rel="preload"][as="'+_r(t)+'"]';t==="image"&&r&&r.imageSrcSet?(s+='[imagesrcset="'+_r(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(s+='[imagesizes="'+_r(r.imageSizes)+'"]')):s+='[href="'+_r(e)+'"]';var m=s;switch(t){case"style":m=fa(e);break;case"script":m=da(e)}Er.has(m)||(e=p({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Er.set(m,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(io(m))||t==="script"&&n.querySelector(ao(m))||(t=n.createElement("link"),Ht(t,"link",e),gt(t),n.head.appendChild(t)))}}function Rw(e,t){un.m(e,t);var r=sa;if(r&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+_r(n)+'"][href="'+_r(e)+'"]',m=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=da(e)}if(!Er.has(m)&&(e=p({rel:"modulepreload",href:e},t),Er.set(m,e),r.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ao(m)))return}n=r.createElement("link"),Ht(n,"link",e),gt(n),r.head.appendChild(n)}}}function Cw(e,t,r){un.S(e,t,r);var n=sa;if(n&&e){var s=Ar(n).hoistableStyles,m=fa(e);t=t||"default";var M=s.get(m);if(!M){var H={loading:0,preload:null};if(M=n.querySelector(io(m)))H.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Er.get(m))&&yf(e,r);var re=M=n.createElement("link");gt(re),Ht(re,"link",e),re._p=new Promise(function(le,ye){re.onload=le,re.onerror=ye}),re.addEventListener("load",function(){H.loading|=1}),re.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Vc(M,t,n)}M={type:"stylesheet",instance:M,count:1,state:H},s.set(m,M)}}}function Aw(e,t){un.X(e,t);var r=sa;if(r&&e){var n=Ar(r).hoistableScripts,s=da(e),m=n.get(s);m||(m=r.querySelector(ao(s)),m||(e=p({src:e,async:!0},t),(t=Er.get(s))&&_f(e,t),m=r.createElement("script"),gt(m),Ht(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},n.set(s,m))}}function Lw(e,t){un.M(e,t);var r=sa;if(r&&e){var n=Ar(r).hoistableScripts,s=da(e),m=n.get(s);m||(m=r.querySelector(ao(s)),m||(e=p({src:e,async:!0,type:"module"},t),(t=Er.get(s))&&_f(e,t),m=r.createElement("script"),gt(m),Ht(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},n.set(s,m))}}function _m(e,t,r,n){var s=(s=$.current)?Ic(s):null;if(!s)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=fa(r.href),r=Ar(s).hoistableStyles,n=r.get(t),n||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=fa(r.href);var m=Ar(s).hoistableStyles,M=m.get(e);if(M||(s=s.ownerDocument||s,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,M),(m=s.querySelector(io(e)))&&!m._p&&(M.instance=m,M.state.loading=5),Er.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Er.set(e,r),m||Pw(s,e,r,M.state))),t&&n===null)throw Error(u(528,""));return M}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=da(r),r=Ar(s).hoistableScripts,n=r.get(t),n||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function fa(e){return'href="'+_r(e)+'"'}function io(e){return'link[rel="stylesheet"]['+e+"]"}function gm(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Pw(e,t,r,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Ht(t,"link",r),gt(t),e.head.appendChild(t))}function da(e){return'[src="'+_r(e)+'"]'}function ao(e){return"script[async]"+e}function Sm(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+_r(r.href)+'"]');if(n)return t.instance=n,gt(n),n;var s=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),gt(n),Ht(n,"style",s),Vc(n,r.precedence,e),t.instance=n;case"stylesheet":s=fa(r.href);var m=e.querySelector(io(s));if(m)return t.state.loading|=4,t.instance=m,gt(m),m;n=gm(r),(s=Er.get(s))&&yf(n,s),m=(e.ownerDocument||e).createElement("link"),gt(m);var M=m;return M._p=new Promise(function(H,re){M.onload=H,M.onerror=re}),Ht(m,"link",n),t.state.loading|=4,Vc(m,r.precedence,e),t.instance=m;case"script":return m=da(r.src),(s=e.querySelector(ao(m)))?(t.instance=s,gt(s),s):(n=r,(s=Er.get(m))&&(n=p({},r),_f(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),gt(s),Ht(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Vc(n,r.precedence,e));return t.instance}function Vc(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,m=s,M=0;M<n.length;M++){var H=n[M];if(H.dataset.precedence===t)m=H;else if(m!==s)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function yf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function _f(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var zc=null;function bm(e,t,r){if(zc===null){var n=new Map,s=zc=new Map;s.set(r,n)}else s=zc,n=s.get(r),n||(n=new Map,s.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),s=0;s<r.length;s++){var m=r[s];if(!(m[Or]||m[jt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var M=m.getAttribute(t)||"";M=e+M;var H=n.get(M);H?H.push(m):n.set(M,[m])}}return n}function Tm(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Mw(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function wm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var oo=null;function xw(){}function Dw(e,t,r){if(oo===null)throw Error(u(475));var n=oo;if(t.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var s=fa(r.href),m=e.querySelector(io(s));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Hc.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=m,gt(m);return}m=e.ownerDocument||e,r=gm(r),(s=Er.get(s))&&yf(r,s),m=m.createElement("link"),gt(m);var M=m;M._p=new Promise(function(H,re){M.onload=H,M.onerror=re}),Ht(m,"link",r),t.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=Hc.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function jw(){if(oo===null)throw Error(u(475));var e=oo;return e.stylesheets&&e.count===0&&gf(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&gf(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Hc(){if(this.count--,this.count===0){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fc=null;function gf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fc=new Map,t.forEach(Nw,e),Fc=null,Hc.call(e))}function Nw(e,t){if(!(t.state.loading&4)){var r=Fc.get(e);if(r)var n=r.get(null);else{r=new Map,Fc.set(e,r);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<s.length;m++){var M=s[m];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(r.set(M.dataset.precedence,M),n=M)}n&&r.set(null,n)}s=t.instance,M=s.getAttribute("data-precedence"),m=r.get(M)||n,m===n&&r.set(null,s),r.set(M,s),this.count++,n=Hc.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),m?m.parentNode.insertBefore(s,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var uo={$$typeof:P,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function qw(e,t,r,n,s,m,M,H){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ze(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.hiddenUpdates=ze(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=m,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function km(e,t,r,n,s,m,M,H,re,le,ye,Se){return e=new qw(e,t,r,M,H,re,le,Se),t=1,m===!0&&(t|=24),m=sr(3,null,null,t),e.current=m,m.stateNode=e,t=$l(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:n,isDehydrated:r,cache:t},ns(m),e}function Em(e){return e?(e=Hi,e):Hi}function Om(e,t,r,n,s,m){s=Em(s),n.context===null?n.context=s:n.pendingContext=s,n=Ln(t),n.payload={element:r},m=m===void 0?null:m,m!==null&&(n.callback=m),r=Pn(e,n,t),r!==null&&(pr(r,e,t),qa(r,e,t))}function Rm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Sf(e,t){Rm(e,t),(e=e.alternate)&&Rm(e,t)}function Cm(e){if(e.tag===13){var t=zi(e,67108864);t!==null&&pr(t,e,67108864),Sf(e,67108864)}}var Gc=!0;function Uw(e,t,r,n){var s=j.T;j.T=null;var m=Q.p;try{Q.p=2,bf(e,t,r,n)}finally{Q.p=m,j.T=s}}function Bw(e,t,r,n){var s=j.T;j.T=null;var m=Q.p;try{Q.p=8,bf(e,t,r,n)}finally{Q.p=m,j.T=s}}function bf(e,t,r,n){if(Gc){var s=Tf(n);if(s===null)cf(e,t,n,Qc,r),Lm(e,n);else if(Vw(s,e,t,r,n))n.stopPropagation();else if(Lm(e,n),t&4&&-1<Iw.indexOf(e)){for(;s!==null;){var m=Rr(s);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var M=me(m.pendingLanes);if(M!==0){var H=m;for(H.pendingLanes|=2,H.entangledLanes|=2;M;){var re=1<<31-Xe(M);H.entanglements[1]|=re,M&=~re}zr(m),(ct&6)===0&&(Ac=je()+500,eo(0))}}break;case 13:H=zi(m,2),H!==null&&pr(H,m,2),Pc(),Sf(m,2)}if(m=Tf(n),m===null&&cf(e,t,n,Qc,r),m===s)break;s=m}s!==null&&n.stopPropagation()}else cf(e,t,n,null,r)}}function Tf(e){return e=Ol(e),wf(e)}var Qc=null;function wf(e){if(Qc=null,e=Gr(e),e!==null){var t=i(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=a(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qc=e,null}function Am(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case Qe:return 2;case ee:return 8;case oe:case Y:return 32;case V:return 268435456;default:return 32}default:return 32}}var kf=!1,Fn=null,Gn=null,Qn=null,co=new Map,lo=new Map,Yn=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lm(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":co.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(t.pointerId)}}function so(e,t,r,n,s,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:m,targetContainers:[s]},t!==null&&(t=Rr(t),t!==null&&Cm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Vw(e,t,r,n,s){switch(t){case"focusin":return Fn=so(Fn,e,t,r,n,s),!0;case"dragenter":return Gn=so(Gn,e,t,r,n,s),!0;case"mouseover":return Qn=so(Qn,e,t,r,n,s),!0;case"pointerover":var m=s.pointerId;return co.set(m,so(co.get(m)||null,e,t,r,n,s)),!0;case"gotpointercapture":return m=s.pointerId,lo.set(m,so(lo.get(m)||null,e,t,r,n,s)),!0}return!1}function Pm(e){var t=Gr(e.target);if(t!==null){var r=i(t);if(r!==null){if(t=r.tag,t===13){if(t=a(r),t!==null){e.blockedOn=t,Bt(e.priority,function(){if(r.tag===13){var n=hr();n=at(n);var s=zi(r,n);s!==null&&pr(s,r,n),Sf(r,n)}});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tf(e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);El=n,r.target.dispatchEvent(n),El=null}else return t=Rr(r),t!==null&&Cm(t),e.blockedOn=r,!1;t.shift()}return!0}function Mm(e,t,r){Yc(e)&&r.delete(t)}function zw(){kf=!1,Fn!==null&&Yc(Fn)&&(Fn=null),Gn!==null&&Yc(Gn)&&(Gn=null),Qn!==null&&Yc(Qn)&&(Qn=null),co.forEach(Mm),lo.forEach(Mm)}function Kc(e,t){e.blockedOn===t&&(e.blockedOn=null,kf||(kf=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,zw)))}var Xc=null;function xm(e){Xc!==e&&(Xc=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Xc===e&&(Xc=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(wf(n||r)===null)continue;break}var m=Rr(r);m!==null&&(e.splice(t,3),t-=3,Ts(m,{pending:!0,data:s,method:r.method,action:n},n,s))}}))}function fo(e){function t(re){return Kc(re,e)}Fn!==null&&Kc(Fn,e),Gn!==null&&Kc(Gn,e),Qn!==null&&Kc(Qn,e),co.forEach(t),lo.forEach(t);for(var r=0;r<Yn.length;r++){var n=Yn[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Yn.length&&(r=Yn[0],r.blockedOn===null);)Pm(r),r.blockedOn===null&&Yn.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var s=r[n],m=r[n+1],M=s[Pt]||null;if(typeof m=="function")M||xm(r);else if(M){var H=null;if(m&&m.hasAttribute("formAction")){if(s=m,M=m[Pt]||null)H=M.formAction;else if(wf(s)!==null)continue}else H=M.action;typeof H=="function"?r[n+1]=H:(r.splice(n,3),n-=3),xm(r)}}}function Ef(e){this._internalRoot=e}Zc.prototype.render=Ef.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var r=t.current,n=hr();Om(r,n,e,t,null,null)},Zc.prototype.unmount=Ef.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Om(e.current,2,null,e,null,null),Pc(),t[mr]=null}};function Zc(e){this._internalRoot=e}Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=st();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yn.length&&t!==0&&t<Yn[r].priority;r++);Yn.splice(r,0,e),r===0&&Pm(e)}};var Dm=v.version;if(Dm!=="19.1.0")throw Error(u(527,Dm,"19.1.0"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=l(t),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var Hw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Re=Wc.inject(Hw),De=Wc}catch{}}return ho.createRoot=function(e,t){if(!c(e))throw Error(u(299));var r=!1,n="",s=Zh,m=Wh,M=Jh,H=null;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(M=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(H=t.unstable_transitionCallbacks)),t=km(e,1,!1,null,null,r,n,s,m,M,H,null),e[mr]=t.current,uf(e),new Ef(t)},ho.hydrateRoot=function(e,t,r){if(!c(e))throw Error(u(299));var n=!1,s="",m=Zh,M=Wh,H=Jh,re=null,le=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(M=r.onCaughtError),r.onRecoverableError!==void 0&&(H=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(re=r.unstable_transitionCallbacks),r.formState!==void 0&&(le=r.formState)),t=km(e,1,!0,t,r??null,n,s,m,M,H,re,le),t.context=Em(null),r=t.current,n=hr(),n=at(n),s=Ln(n),s.callback=null,Pn(r,s,n),r=n,t.current.lanes=r,Ze(t,r),zr(t),e[mr]=t.current,uf(e),new Zc(t)},ho.version="19.1.0",ho}var Fm;function ek(){if(Fm)return Cf.exports;Fm=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(v){console.error(v)}}return d(),Cf.exports=$w(),Cf.exports}var tk=ek();function gS(d,v){return function(){return d.apply(v,arguments)}}const{toString:rk}=Object.prototype,{getPrototypeOf:Hd}=Object,{iterator:sl,toStringTag:SS}=Symbol,fl=(d=>v=>{const h=rk.call(v);return d[h]||(d[h]=h.slice(8,-1).toLowerCase())})(Object.create(null)),Nr=d=>(d=d.toLowerCase(),v=>fl(v)===d),dl=d=>v=>typeof v===d,{isArray:pa}=Array,Nu=dl("undefined");function nk(d){return d!==null&&!Nu(d)&&d.constructor!==null&&!Nu(d.constructor)&&ur(d.constructor.isBuffer)&&d.constructor.isBuffer(d)}const bS=Nr("ArrayBuffer");function ik(d){let v;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?v=ArrayBuffer.isView(d):v=d&&d.buffer&&bS(d.buffer),v}const ak=dl("string"),ur=dl("function"),TS=dl("number"),vl=d=>d!==null&&typeof d=="object",ok=d=>d===!0||d===!1,nl=d=>{if(fl(d)!=="object")return!1;const v=Hd(d);return(v===null||v===Object.prototype||Object.getPrototypeOf(v)===null)&&!(SS in d)&&!(sl in d)},uk=Nr("Date"),ck=Nr("File"),lk=Nr("Blob"),sk=Nr("FileList"),fk=d=>vl(d)&&ur(d.pipe),dk=d=>{let v;return d&&(typeof FormData=="function"&&d instanceof FormData||ur(d.append)&&((v=fl(d))==="formdata"||v==="object"&&ur(d.toString)&&d.toString()==="[object FormData]"))},vk=Nr("URLSearchParams"),[hk,pk,mk,yk]=["ReadableStream","Request","Response","Headers"].map(Nr),_k=d=>d.trim?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qu(d,v,{allOwnKeys:h=!1}={}){if(d===null||typeof d>"u")return;let u,c;if(typeof d!="object"&&(d=[d]),pa(d))for(u=0,c=d.length;u<c;u++)v.call(null,d[u],u,d);else{const i=h?Object.getOwnPropertyNames(d):Object.keys(d),a=i.length;let o;for(u=0;u<a;u++)o=i[u],v.call(null,d[o],o,d)}}function wS(d,v){v=v.toLowerCase();const h=Object.keys(d);let u=h.length,c;for(;u-- >0;)if(c=h[u],v===c.toLowerCase())return c;return null}const ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kS=d=>!Nu(d)&&d!==ki;function Nd(){const{caseless:d}=kS(this)&&this||{},v={},h=(u,c)=>{const i=d&&wS(v,c)||c;nl(v[i])&&nl(u)?v[i]=Nd(v[i],u):nl(u)?v[i]=Nd({},u):pa(u)?v[i]=u.slice():v[i]=u};for(let u=0,c=arguments.length;u<c;u++)arguments[u]&&qu(arguments[u],h);return v}const gk=(d,v,h,{allOwnKeys:u}={})=>(qu(v,(c,i)=>{h&&ur(c)?d[i]=gS(c,h):d[i]=c},{allOwnKeys:u}),d),Sk=d=>(d.charCodeAt(0)===65279&&(d=d.slice(1)),d),bk=(d,v,h,u)=>{d.prototype=Object.create(v.prototype,u),d.prototype.constructor=d,Object.defineProperty(d,"super",{value:v.prototype}),h&&Object.assign(d.prototype,h)},Tk=(d,v,h,u)=>{let c,i,a;const o={};if(v=v||{},d==null)return v;do{for(c=Object.getOwnPropertyNames(d),i=c.length;i-- >0;)a=c[i],(!u||u(a,d,v))&&!o[a]&&(v[a]=d[a],o[a]=!0);d=h!==!1&&Hd(d)}while(d&&(!h||h(d,v))&&d!==Object.prototype);return v},wk=(d,v,h)=>{d=String(d),(h===void 0||h>d.length)&&(h=d.length),h-=v.length;const u=d.indexOf(v,h);return u!==-1&&u===h},kk=d=>{if(!d)return null;if(pa(d))return d;let v=d.length;if(!TS(v))return null;const h=new Array(v);for(;v-- >0;)h[v]=d[v];return h},Ek=(d=>v=>d&&v instanceof d)(typeof Uint8Array<"u"&&Hd(Uint8Array)),Ok=(d,v)=>{const u=(d&&d[sl]).call(d);let c;for(;(c=u.next())&&!c.done;){const i=c.value;v.call(d,i[0],i[1])}},Rk=(d,v)=>{let h;const u=[];for(;(h=d.exec(v))!==null;)u.push(h);return u},Ck=Nr("HTMLFormElement"),Ak=d=>d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(h,u,c){return u.toUpperCase()+c}),Gm=(({hasOwnProperty:d})=>(v,h)=>d.call(v,h))(Object.prototype),Lk=Nr("RegExp"),ES=(d,v)=>{const h=Object.getOwnPropertyDescriptors(d),u={};qu(h,(c,i)=>{let a;(a=v(c,i,d))!==!1&&(u[i]=a||c)}),Object.defineProperties(d,u)},Pk=d=>{ES(d,(v,h)=>{if(ur(d)&&["arguments","caller","callee"].indexOf(h)!==-1)return!1;const u=d[h];if(ur(u)){if(v.enumerable=!1,"writable"in v){v.writable=!1;return}v.set||(v.set=()=>{throw Error("Can not rewrite read-only method '"+h+"'")})}})},Mk=(d,v)=>{const h={},u=c=>{c.forEach(i=>{h[i]=!0})};return pa(d)?u(d):u(String(d).split(v)),h},xk=()=>{},Dk=(d,v)=>d!=null&&Number.isFinite(d=+d)?d:v;function jk(d){return!!(d&&ur(d.append)&&d[SS]==="FormData"&&d[sl])}const Nk=d=>{const v=new Array(10),h=(u,c)=>{if(vl(u)){if(v.indexOf(u)>=0)return;if(!("toJSON"in u)){v[c]=u;const i=pa(u)?[]:{};return qu(u,(a,o)=>{const l=h(a,c+1);!Nu(l)&&(i[o]=l)}),v[c]=void 0,i}}return u};return h(d,0)},qk=Nr("AsyncFunction"),Uk=d=>d&&(vl(d)||ur(d))&&ur(d.then)&&ur(d.catch),OS=((d,v)=>d?setImmediate:v?((h,u)=>(ki.addEventListener("message",({source:c,data:i})=>{c===ki&&i===h&&u.length&&u.shift()()},!1),c=>{u.push(c),ki.postMessage(h,"*")}))(`axios@${Math.random()}`,[]):h=>setTimeout(h))(typeof setImmediate=="function",ur(ki.postMessage)),Bk=typeof queueMicrotask<"u"?queueMicrotask.bind(ki):typeof process<"u"&&process.nextTick||OS,Ik=d=>d!=null&&ur(d[sl]),he={isArray:pa,isArrayBuffer:bS,isBuffer:nk,isFormData:dk,isArrayBufferView:ik,isString:ak,isNumber:TS,isBoolean:ok,isObject:vl,isPlainObject:nl,isReadableStream:hk,isRequest:pk,isResponse:mk,isHeaders:yk,isUndefined:Nu,isDate:uk,isFile:ck,isBlob:lk,isRegExp:Lk,isFunction:ur,isStream:fk,isURLSearchParams:vk,isTypedArray:Ek,isFileList:sk,forEach:qu,merge:Nd,extend:gk,trim:_k,stripBOM:Sk,inherits:bk,toFlatObject:Tk,kindOf:fl,kindOfTest:Nr,endsWith:wk,toArray:kk,forEachEntry:Ok,matchAll:Rk,isHTMLForm:Ck,hasOwnProperty:Gm,hasOwnProp:Gm,reduceDescriptors:ES,freezeMethods:Pk,toObjectSet:Mk,toCamelCase:Ak,noop:xk,toFiniteNumber:Dk,findKey:wS,global:ki,isContextDefined:kS,isSpecCompliantForm:jk,toJSONObject:Nk,isAsyncFn:qk,isThenable:Uk,setImmediate:OS,asap:Bk,isIterable:Ik};function Ge(d,v,h,u,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=d,this.name="AxiosError",v&&(this.code=v),h&&(this.config=h),u&&(this.request=u),c&&(this.response=c,this.status=c.status?c.status:null)}he.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const RS=Ge.prototype,CS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(d=>{CS[d]={value:d}});Object.defineProperties(Ge,CS);Object.defineProperty(RS,"isAxiosError",{value:!0});Ge.from=(d,v,h,u,c,i)=>{const a=Object.create(RS);return he.toFlatObject(d,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Ge.call(a,d.message,v,h,u,c),a.cause=d,a.name=d.name,i&&Object.assign(a,i),a};const Vk=null;function qd(d){return he.isPlainObject(d)||he.isArray(d)}function AS(d){return he.endsWith(d,"[]")?d.slice(0,-2):d}function Qm(d,v,h){return d?d.concat(v).map(function(c,i){return c=AS(c),!h&&i?"["+c+"]":c}).join(h?".":""):v}function zk(d){return he.isArray(d)&&!d.some(qd)}const Hk=he.toFlatObject(he,{},null,function(v){return/^is[A-Z]/.test(v)});function hl(d,v,h){if(!he.isObject(d))throw new TypeError("target must be an object");v=v||new FormData,h=he.toFlatObject(h,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,b){return!he.isUndefined(b[E])});const u=h.metaTokens,c=h.visitor||p,i=h.dots,a=h.indexes,l=(h.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(v);if(!he.isFunction(c))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(he.isDate(_))return _.toISOString();if(he.isBoolean(_))return _.toString();if(!l&&he.isBlob(_))throw new Ge("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(_)||he.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,E,b){let C=_;if(_&&!b&&typeof _=="object"){if(he.endsWith(E,"{}"))E=u?E:E.slice(0,-2),_=JSON.stringify(_);else if(he.isArray(_)&&zk(_)||(he.isFileList(_)||he.endsWith(E,"[]"))&&(C=he.toArray(_)))return E=AS(E),C.forEach(function(P,R){!(he.isUndefined(P)||P===null)&&v.append(a===!0?Qm([E],R,i):a===null?E:E+"[]",f(P))}),!1}return qd(_)?!0:(v.append(Qm(b,E,i),f(_)),!1)}const y=[],g=Object.assign(Hk,{defaultVisitor:p,convertValue:f,isVisitable:qd});function w(_,E){if(!he.isUndefined(_)){if(y.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(_),he.forEach(_,function(C,N){(!(he.isUndefined(C)||C===null)&&c.call(v,C,he.isString(N)?N.trim():N,E,g))===!0&&w(C,E?E.concat(N):[N])}),y.pop()}}if(!he.isObject(d))throw new TypeError("data must be an object");return w(d),v}function Ym(d){const v={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(d).replace(/[!'()~]|%20|%00/g,function(u){return v[u]})}function Fd(d,v){this._pairs=[],d&&hl(d,this,v)}const LS=Fd.prototype;LS.append=function(v,h){this._pairs.push([v,h])};LS.toString=function(v){const h=v?function(u){return v.call(this,u,Ym)}:Ym;return this._pairs.map(function(c){return h(c[0])+"="+h(c[1])},"").join("&")};function Fk(d){return encodeURIComponent(d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function PS(d,v,h){if(!v)return d;const u=h&&h.encode||Fk;he.isFunction(h)&&(h={serialize:h});const c=h&&h.serialize;let i;if(c?i=c(v,h):i=he.isURLSearchParams(v)?v.toString():new Fd(v,h).toString(u),i){const a=d.indexOf("#");a!==-1&&(d=d.slice(0,a)),d+=(d.indexOf("?")===-1?"?":"&")+i}return d}class Km{constructor(){this.handlers=[]}use(v,h,u){return this.handlers.push({fulfilled:v,rejected:h,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(v){this.handlers[v]&&(this.handlers[v]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(v){he.forEach(this.handlers,function(u){u!==null&&v(u)})}}const MS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gk=typeof URLSearchParams<"u"?URLSearchParams:Fd,Qk=typeof FormData<"u"?FormData:null,Yk=typeof Blob<"u"?Blob:null,Kk={isBrowser:!0,classes:{URLSearchParams:Gk,FormData:Qk,Blob:Yk},protocols:["http","https","file","blob","url","data"]},Gd=typeof window<"u"&&typeof document<"u",Ud=typeof navigator=="object"&&navigator||void 0,Xk=Gd&&(!Ud||["ReactNative","NativeScript","NS"].indexOf(Ud.product)<0),Zk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wk=Gd&&window.location.href||"http://localhost",Jk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gd,hasStandardBrowserEnv:Xk,hasStandardBrowserWebWorkerEnv:Zk,navigator:Ud,origin:Wk},Symbol.toStringTag,{value:"Module"})),Kt={...Jk,...Kk};function $k(d,v){return hl(d,new Kt.classes.URLSearchParams,Object.assign({visitor:function(h,u,c,i){return Kt.isNode&&he.isBuffer(h)?(this.append(u,h.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},v))}function eE(d){return he.matchAll(/\w+|\[(\w*)]/g,d).map(v=>v[0]==="[]"?"":v[1]||v[0])}function tE(d){const v={},h=Object.keys(d);let u;const c=h.length;let i;for(u=0;u<c;u++)i=h[u],v[i]=d[i];return v}function xS(d){function v(h,u,c,i){let a=h[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=h.length;return a=!a&&he.isArray(c)?c.length:a,l?(he.hasOwnProp(c,a)?c[a]=[c[a],u]:c[a]=u,!o):((!c[a]||!he.isObject(c[a]))&&(c[a]=[]),v(h,u,c[a],i)&&he.isArray(c[a])&&(c[a]=tE(c[a])),!o)}if(he.isFormData(d)&&he.isFunction(d.entries)){const h={};return he.forEachEntry(d,(u,c)=>{v(eE(u),c,h,0)}),h}return null}function rE(d,v,h){if(he.isString(d))try{return(v||JSON.parse)(d),he.trim(d)}catch(u){if(u.name!=="SyntaxError")throw u}return(h||JSON.stringify)(d)}const Uu={transitional:MS,adapter:["xhr","http","fetch"],transformRequest:[function(v,h){const u=h.getContentType()||"",c=u.indexOf("application/json")>-1,i=he.isObject(v);if(i&&he.isHTMLForm(v)&&(v=new FormData(v)),he.isFormData(v))return c?JSON.stringify(xS(v)):v;if(he.isArrayBuffer(v)||he.isBuffer(v)||he.isStream(v)||he.isFile(v)||he.isBlob(v)||he.isReadableStream(v))return v;if(he.isArrayBufferView(v))return v.buffer;if(he.isURLSearchParams(v))return h.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),v.toString();let o;if(i){if(u.indexOf("application/x-www-form-urlencoded")>-1)return $k(v,this.formSerializer).toString();if((o=he.isFileList(v))||u.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return hl(o?{"files[]":v}:v,l&&new l,this.formSerializer)}}return i||c?(h.setContentType("application/json",!1),rE(v)):v}],transformResponse:[function(v){const h=this.transitional||Uu.transitional,u=h&&h.forcedJSONParsing,c=this.responseType==="json";if(he.isResponse(v)||he.isReadableStream(v))return v;if(v&&he.isString(v)&&(u&&!this.responseType||c)){const a=!(h&&h.silentJSONParsing)&&c;try{return JSON.parse(v)}catch(o){if(a)throw o.name==="SyntaxError"?Ge.from(o,Ge.ERR_BAD_RESPONSE,this,null,this.response):o}}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kt.classes.FormData,Blob:Kt.classes.Blob},validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],d=>{Uu.headers[d]={}});const nE=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iE=d=>{const v={};let h,u,c;return d&&d.split(`
`).forEach(function(a){c=a.indexOf(":"),h=a.substring(0,c).trim().toLowerCase(),u=a.substring(c+1).trim(),!(!h||v[h]&&nE[h])&&(h==="set-cookie"?v[h]?v[h].push(u):v[h]=[u]:v[h]=v[h]?v[h]+", "+u:u)}),v},Xm=Symbol("internals");function po(d){return d&&String(d).trim().toLowerCase()}function il(d){return d===!1||d==null?d:he.isArray(d)?d.map(il):String(d)}function aE(d){const v=Object.create(null),h=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let u;for(;u=h.exec(d);)v[u[1]]=u[2];return v}const oE=d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(d.trim());function Mf(d,v,h,u,c){if(he.isFunction(u))return u.call(this,v,h);if(c&&(v=h),!!he.isString(v)){if(he.isString(u))return v.indexOf(u)!==-1;if(he.isRegExp(u))return u.test(v)}}function uE(d){return d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(v,h,u)=>h.toUpperCase()+u)}function cE(d,v){const h=he.toCamelCase(" "+v);["get","set","has"].forEach(u=>{Object.defineProperty(d,u+h,{value:function(c,i,a){return this[u].call(this,v,c,i,a)},configurable:!0})})}let cr=class{constructor(v){v&&this.set(v)}set(v,h,u){const c=this;function i(o,l,f){const p=po(l);if(!p)throw new Error("header name must be a non-empty string");const y=he.findKey(c,p);(!y||c[y]===void 0||f===!0||f===void 0&&c[y]!==!1)&&(c[y||l]=il(o))}const a=(o,l)=>he.forEach(o,(f,p)=>i(f,p,l));if(he.isPlainObject(v)||v instanceof this.constructor)a(v,h);else if(he.isString(v)&&(v=v.trim())&&!oE(v))a(iE(v),h);else if(he.isObject(v)&&he.isIterable(v)){let o={},l,f;for(const p of v){if(!he.isArray(p))throw TypeError("Object iterator must return a key-value pair");o[f=p[0]]=(l=o[f])?he.isArray(l)?[...l,p[1]]:[l,p[1]]:p[1]}a(o,h)}else v!=null&&i(h,v,u);return this}get(v,h){if(v=po(v),v){const u=he.findKey(this,v);if(u){const c=this[u];if(!h)return c;if(h===!0)return aE(c);if(he.isFunction(h))return h.call(this,c,u);if(he.isRegExp(h))return h.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(v,h){if(v=po(v),v){const u=he.findKey(this,v);return!!(u&&this[u]!==void 0&&(!h||Mf(this,this[u],u,h)))}return!1}delete(v,h){const u=this;let c=!1;function i(a){if(a=po(a),a){const o=he.findKey(u,a);o&&(!h||Mf(u,u[o],o,h))&&(delete u[o],c=!0)}}return he.isArray(v)?v.forEach(i):i(v),c}clear(v){const h=Object.keys(this);let u=h.length,c=!1;for(;u--;){const i=h[u];(!v||Mf(this,this[i],i,v,!0))&&(delete this[i],c=!0)}return c}normalize(v){const h=this,u={};return he.forEach(this,(c,i)=>{const a=he.findKey(u,i);if(a){h[a]=il(c),delete h[i];return}const o=v?uE(i):String(i).trim();o!==i&&delete h[i],h[o]=il(c),u[o]=!0}),this}concat(...v){return this.constructor.concat(this,...v)}toJSON(v){const h=Object.create(null);return he.forEach(this,(u,c)=>{u!=null&&u!==!1&&(h[c]=v&&he.isArray(u)?u.join(", "):u)}),h}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([v,h])=>v+": "+h).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(v){return v instanceof this?v:new this(v)}static concat(v,...h){const u=new this(v);return h.forEach(c=>u.set(c)),u}static accessor(v){const u=(this[Xm]=this[Xm]={accessors:{}}).accessors,c=this.prototype;function i(a){const o=po(a);u[o]||(cE(c,a),u[o]=!0)}return he.isArray(v)?v.forEach(i):i(v),this}};cr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(cr.prototype,({value:d},v)=>{let h=v[0].toUpperCase()+v.slice(1);return{get:()=>d,set(u){this[h]=u}}});he.freezeMethods(cr);function xf(d,v){const h=this||Uu,u=v||h,c=cr.from(u.headers);let i=u.data;return he.forEach(d,function(o){i=o.call(h,i,c.normalize(),v?v.status:void 0)}),c.normalize(),i}function DS(d){return!!(d&&d.__CANCEL__)}function ma(d,v,h){Ge.call(this,d??"canceled",Ge.ERR_CANCELED,v,h),this.name="CanceledError"}he.inherits(ma,Ge,{__CANCEL__:!0});function jS(d,v,h){const u=h.config.validateStatus;!h.status||!u||u(h.status)?d(h):v(new Ge("Request failed with status code "+h.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(h.status/100)-4],h.config,h.request,h))}function lE(d){const v=/^([-+\w]{1,25})(:?\/\/|:)/.exec(d);return v&&v[1]||""}function sE(d,v){d=d||10;const h=new Array(d),u=new Array(d);let c=0,i=0,a;return v=v!==void 0?v:1e3,function(l){const f=Date.now(),p=u[i];a||(a=f),h[c]=l,u[c]=f;let y=i,g=0;for(;y!==c;)g+=h[y++],y=y%d;if(c=(c+1)%d,c===i&&(i=(i+1)%d),f-a<v)return;const w=p&&f-p;return w?Math.round(g*1e3/w):void 0}}function fE(d,v){let h=0,u=1e3/v,c,i;const a=(f,p=Date.now())=>{h=p,c=null,i&&(clearTimeout(i),i=null),d.apply(null,f)};return[(...f)=>{const p=Date.now(),y=p-h;y>=u?a(f,p):(c=f,i||(i=setTimeout(()=>{i=null,a(c)},u-y)))},()=>c&&a(c)]}const cl=(d,v,h=3)=>{let u=0;const c=sE(50,250);return fE(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-u,f=c(l),p=a<=o;u=a;const y={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:f||void 0,estimated:f&&o&&p?(o-a)/f:void 0,event:i,lengthComputable:o!=null,[v?"download":"upload"]:!0};d(y)},h)},Zm=(d,v)=>{const h=d!=null;return[u=>v[0]({lengthComputable:h,total:d,loaded:u}),v[1]]},Wm=d=>(...v)=>he.asap(()=>d(...v)),dE=Kt.hasStandardBrowserEnv?((d,v)=>h=>(h=new URL(h,Kt.origin),d.protocol===h.protocol&&d.host===h.host&&(v||d.port===h.port)))(new URL(Kt.origin),Kt.navigator&&/(msie|trident)/i.test(Kt.navigator.userAgent)):()=>!0,vE=Kt.hasStandardBrowserEnv?{write(d,v,h,u,c,i){const a=[d+"="+encodeURIComponent(v)];he.isNumber(h)&&a.push("expires="+new Date(h).toGMTString()),he.isString(u)&&a.push("path="+u),he.isString(c)&&a.push("domain="+c),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(d){const v=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return v?decodeURIComponent(v[3]):null},remove(d){this.write(d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hE(d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(d)}function pE(d,v){return v?d.replace(/\/?\/$/,"")+"/"+v.replace(/^\/+/,""):d}function NS(d,v,h){let u=!hE(v);return d&&(u||h==!1)?pE(d,v):v}const Jm=d=>d instanceof cr?{...d}:d;function Ri(d,v){v=v||{};const h={};function u(f,p,y,g){return he.isPlainObject(f)&&he.isPlainObject(p)?he.merge.call({caseless:g},f,p):he.isPlainObject(p)?he.merge({},p):he.isArray(p)?p.slice():p}function c(f,p,y,g){if(he.isUndefined(p)){if(!he.isUndefined(f))return u(void 0,f,y,g)}else return u(f,p,y,g)}function i(f,p){if(!he.isUndefined(p))return u(void 0,p)}function a(f,p){if(he.isUndefined(p)){if(!he.isUndefined(f))return u(void 0,f)}else return u(void 0,p)}function o(f,p,y){if(y in v)return u(f,p);if(y in d)return u(void 0,f)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,p,y)=>c(Jm(f),Jm(p),y,!0)};return he.forEach(Object.keys(Object.assign({},d,v)),function(p){const y=l[p]||c,g=y(d[p],v[p],p);he.isUndefined(g)&&y!==o||(h[p]=g)}),h}const qS=d=>{const v=Ri({},d);let{data:h,withXSRFToken:u,xsrfHeaderName:c,xsrfCookieName:i,headers:a,auth:o}=v;v.headers=a=cr.from(a),v.url=PS(NS(v.baseURL,v.url,v.allowAbsoluteUrls),d.params,d.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(he.isFormData(h)){if(Kt.hasStandardBrowserEnv||Kt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[f,...p]=l?l.split(";").map(y=>y.trim()).filter(Boolean):[];a.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Kt.hasStandardBrowserEnv&&(u&&he.isFunction(u)&&(u=u(v)),u||u!==!1&&dE(v.url))){const f=c&&i&&vE.read(i);f&&a.set(c,f)}return v},mE=typeof XMLHttpRequest<"u",yE=mE&&function(d){return new Promise(function(h,u){const c=qS(d);let i=c.data;const a=cr.from(c.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:f}=c,p,y,g,w,_;function E(){w&&w(),_&&_(),c.cancelToken&&c.cancelToken.unsubscribe(p),c.signal&&c.signal.removeEventListener("abort",p)}let b=new XMLHttpRequest;b.open(c.method.toUpperCase(),c.url,!0),b.timeout=c.timeout;function C(){if(!b)return;const P=cr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:P,config:d,request:b};jS(function(T){h(T),E()},function(T){u(T),E()},k),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(u(new Ge("Request aborted",Ge.ECONNABORTED,d,b)),b=null)},b.onerror=function(){u(new Ge("Network Error",Ge.ERR_NETWORK,d,b)),b=null},b.ontimeout=function(){let R=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const k=c.transitional||MS;c.timeoutErrorMessage&&(R=c.timeoutErrorMessage),u(new Ge(R,k.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,d,b)),b=null},i===void 0&&a.setContentType(null),"setRequestHeader"in b&&he.forEach(a.toJSON(),function(R,k){b.setRequestHeader(k,R)}),he.isUndefined(c.withCredentials)||(b.withCredentials=!!c.withCredentials),o&&o!=="json"&&(b.responseType=c.responseType),f&&([g,_]=cl(f,!0),b.addEventListener("progress",g)),l&&b.upload&&([y,w]=cl(l),b.upload.addEventListener("progress",y),b.upload.addEventListener("loadend",w)),(c.cancelToken||c.signal)&&(p=P=>{b&&(u(!P||P.type?new ma(null,d,b):P),b.abort(),b=null)},c.cancelToken&&c.cancelToken.subscribe(p),c.signal&&(c.signal.aborted?p():c.signal.addEventListener("abort",p)));const N=lE(c.url);if(N&&Kt.protocols.indexOf(N)===-1){u(new Ge("Unsupported protocol "+N+":",Ge.ERR_BAD_REQUEST,d));return}b.send(i||null)})},_E=(d,v)=>{const{length:h}=d=d?d.filter(Boolean):[];if(v||h){let u=new AbortController,c;const i=function(f){if(!c){c=!0,o();const p=f instanceof Error?f:this.reason;u.abort(p instanceof Ge?p:new ma(p instanceof Error?p.message:p))}};let a=v&&setTimeout(()=>{a=null,i(new Ge(`timeout ${v} of ms exceeded`,Ge.ETIMEDOUT))},v);const o=()=>{d&&(a&&clearTimeout(a),a=null,d.forEach(f=>{f.unsubscribe?f.unsubscribe(i):f.removeEventListener("abort",i)}),d=null)};d.forEach(f=>f.addEventListener("abort",i));const{signal:l}=u;return l.unsubscribe=()=>he.asap(o),l}},gE=function*(d,v){let h=d.byteLength;if(h<v){yield d;return}let u=0,c;for(;u<h;)c=u+v,yield d.slice(u,c),u=c},SE=async function*(d,v){for await(const h of bE(d))yield*gE(h,v)},bE=async function*(d){if(d[Symbol.asyncIterator]){yield*d;return}const v=d.getReader();try{for(;;){const{done:h,value:u}=await v.read();if(h)break;yield u}}finally{await v.cancel()}},$m=(d,v,h,u)=>{const c=SE(d,v);let i=0,a,o=l=>{a||(a=!0,u&&u(l))};return new ReadableStream({async pull(l){try{const{done:f,value:p}=await c.next();if(f){o(),l.close();return}let y=p.byteLength;if(h){let g=i+=y;h(g)}l.enqueue(new Uint8Array(p))}catch(f){throw o(f),f}},cancel(l){return o(l),c.return()}},{highWaterMark:2})},pl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",US=pl&&typeof ReadableStream=="function",TE=pl&&(typeof TextEncoder=="function"?(d=>v=>d.encode(v))(new TextEncoder):async d=>new Uint8Array(await new Response(d).arrayBuffer())),BS=(d,...v)=>{try{return!!d(...v)}catch{return!1}},wE=US&&BS(()=>{let d=!1;const v=new Request(Kt.origin,{body:new ReadableStream,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!v}),ey=64*1024,Bd=US&&BS(()=>he.isReadableStream(new Response("").body)),ll={stream:Bd&&(d=>d.body)};pl&&(d=>{["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!ll[v]&&(ll[v]=he.isFunction(d[v])?h=>h[v]():(h,u)=>{throw new Ge(`Response type '${v}' is not supported`,Ge.ERR_NOT_SUPPORT,u)})})})(new Response);const kE=async d=>{if(d==null)return 0;if(he.isBlob(d))return d.size;if(he.isSpecCompliantForm(d))return(await new Request(Kt.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(he.isArrayBufferView(d)||he.isArrayBuffer(d))return d.byteLength;if(he.isURLSearchParams(d)&&(d=d+""),he.isString(d))return(await TE(d)).byteLength},EE=async(d,v)=>{const h=he.toFiniteNumber(d.getContentLength());return h??kE(v)},OE=pl&&(async d=>{let{url:v,method:h,data:u,signal:c,cancelToken:i,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:f,headers:p,withCredentials:y="same-origin",fetchOptions:g}=qS(d);f=f?(f+"").toLowerCase():"text";let w=_E([c,i&&i.toAbortSignal()],a),_;const E=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let b;try{if(l&&wE&&h!=="get"&&h!=="head"&&(b=await EE(p,u))!==0){let k=new Request(v,{method:"POST",body:u,duplex:"half"}),S;if(he.isFormData(u)&&(S=k.headers.get("content-type"))&&p.setContentType(S),k.body){const[T,O]=Zm(b,cl(Wm(l)));u=$m(k.body,ey,T,O)}}he.isString(y)||(y=y?"include":"omit");const C="credentials"in Request.prototype;_=new Request(v,{...g,signal:w,method:h.toUpperCase(),headers:p.normalize().toJSON(),body:u,duplex:"half",credentials:C?y:void 0});let N=await fetch(_,g);const P=Bd&&(f==="stream"||f==="response");if(Bd&&(o||P&&E)){const k={};["status","statusText","headers"].forEach(q=>{k[q]=N[q]});const S=he.toFiniteNumber(N.headers.get("content-length")),[T,O]=o&&Zm(S,cl(Wm(o),!0))||[];N=new Response($m(N.body,ey,T,()=>{O&&O(),E&&E()}),k)}f=f||"text";let R=await ll[he.findKey(ll,f)||"text"](N,d);return!P&&E&&E(),await new Promise((k,S)=>{jS(k,S,{data:R,headers:cr.from(N.headers),status:N.status,statusText:N.statusText,config:d,request:_})})}catch(C){throw E&&E(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,d,_),{cause:C.cause||C}):Ge.from(C,C&&C.code,d,_)}}),Id={http:Vk,xhr:yE,fetch:OE};he.forEach(Id,(d,v)=>{if(d){try{Object.defineProperty(d,"name",{value:v})}catch{}Object.defineProperty(d,"adapterName",{value:v})}});const ty=d=>`- ${d}`,RE=d=>he.isFunction(d)||d===null||d===!1,IS={getAdapter:d=>{d=he.isArray(d)?d:[d];const{length:v}=d;let h,u;const c={};for(let i=0;i<v;i++){h=d[i];let a;if(u=h,!RE(h)&&(u=Id[(a=String(h)).toLowerCase()],u===void 0))throw new Ge(`Unknown adapter '${a}'`);if(u)break;c[a||"#"+i]=u}if(!u){const i=Object.entries(c).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=v?i.length>1?`since :
`+i.map(ty).join(`
`):" "+ty(i[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return u},adapters:Id};function Df(d){if(d.cancelToken&&d.cancelToken.throwIfRequested(),d.signal&&d.signal.aborted)throw new ma(null,d)}function ry(d){return Df(d),d.headers=cr.from(d.headers),d.data=xf.call(d,d.transformRequest),["post","put","patch"].indexOf(d.method)!==-1&&d.headers.setContentType("application/x-www-form-urlencoded",!1),IS.getAdapter(d.adapter||Uu.adapter)(d).then(function(u){return Df(d),u.data=xf.call(d,d.transformResponse,u),u.headers=cr.from(u.headers),u},function(u){return DS(u)||(Df(d),u&&u.response&&(u.response.data=xf.call(d,d.transformResponse,u.response),u.response.headers=cr.from(u.response.headers))),Promise.reject(u)})}const VS="1.10.0",ml={};["object","boolean","number","function","string","symbol"].forEach((d,v)=>{ml[d]=function(u){return typeof u===d||"a"+(v<1?"n ":" ")+d}});const ny={};ml.transitional=function(v,h,u){function c(i,a){return"[Axios v"+VS+"] Transitional option '"+i+"'"+a+(u?". "+u:"")}return(i,a,o)=>{if(v===!1)throw new Ge(c(a," has been removed"+(h?" in "+h:"")),Ge.ERR_DEPRECATED);return h&&!ny[a]&&(ny[a]=!0,console.warn(c(a," has been deprecated since v"+h+" and will be removed in the near future"))),v?v(i,a,o):!0}};ml.spelling=function(v){return(h,u)=>(console.warn(`${u} is likely a misspelling of ${v}`),!0)};function CE(d,v,h){if(typeof d!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const u=Object.keys(d);let c=u.length;for(;c-- >0;){const i=u[c],a=v[i];if(a){const o=d[i],l=o===void 0||a(o,i,d);if(l!==!0)throw new Ge("option "+i+" must be "+l,Ge.ERR_BAD_OPTION_VALUE);continue}if(h!==!0)throw new Ge("Unknown option "+i,Ge.ERR_BAD_OPTION)}}const al={assertOptions:CE,validators:ml},Hr=al.validators;let Oi=class{constructor(v){this.defaults=v||{},this.interceptors={request:new Km,response:new Km}}async request(v,h){try{return await this._request(v,h)}catch(u){if(u instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const i=c.stack?c.stack.replace(/^.+\n/,""):"";try{u.stack?i&&!String(u.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+i):u.stack=i}catch{}}throw u}}_request(v,h){typeof v=="string"?(h=h||{},h.url=v):h=v||{},h=Ri(this.defaults,h);const{transitional:u,paramsSerializer:c,headers:i}=h;u!==void 0&&al.assertOptions(u,{silentJSONParsing:Hr.transitional(Hr.boolean),forcedJSONParsing:Hr.transitional(Hr.boolean),clarifyTimeoutError:Hr.transitional(Hr.boolean)},!1),c!=null&&(he.isFunction(c)?h.paramsSerializer={serialize:c}:al.assertOptions(c,{encode:Hr.function,serialize:Hr.function},!0)),h.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?h.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:h.allowAbsoluteUrls=!0),al.assertOptions(h,{baseUrl:Hr.spelling("baseURL"),withXsrfToken:Hr.spelling("withXSRFToken")},!0),h.method=(h.method||this.defaults.method||"get").toLowerCase();let a=i&&he.merge(i.common,i[h.method]);i&&he.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),h.headers=cr.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(h)===!1||(l=l&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,y=0,g;if(!l){const _=[ry.bind(this),void 0];for(_.unshift.apply(_,o),_.push.apply(_,f),g=_.length,p=Promise.resolve(h);y<g;)p=p.then(_[y++],_[y++]);return p}g=o.length;let w=h;for(y=0;y<g;){const _=o[y++],E=o[y++];try{w=_(w)}catch(b){E.call(this,b);break}}try{p=ry.call(this,w)}catch(_){return Promise.reject(_)}for(y=0,g=f.length;y<g;)p=p.then(f[y++],f[y++]);return p}getUri(v){v=Ri(this.defaults,v);const h=NS(v.baseURL,v.url,v.allowAbsoluteUrls);return PS(h,v.params,v.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(v){Oi.prototype[v]=function(h,u){return this.request(Ri(u||{},{method:v,url:h,data:(u||{}).data}))}});he.forEach(["post","put","patch"],function(v){function h(u){return function(i,a,o){return this.request(Ri(o||{},{method:v,headers:u?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Oi.prototype[v]=h(),Oi.prototype[v+"Form"]=h(!0)});let AE=class zS{constructor(v){if(typeof v!="function")throw new TypeError("executor must be a function.");let h;this.promise=new Promise(function(i){h=i});const u=this;this.promise.then(c=>{if(!u._listeners)return;let i=u._listeners.length;for(;i-- >0;)u._listeners[i](c);u._listeners=null}),this.promise.then=c=>{let i;const a=new Promise(o=>{u.subscribe(o),i=o}).then(c);return a.cancel=function(){u.unsubscribe(i)},a},v(function(i,a,o){u.reason||(u.reason=new ma(i,a,o),h(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(v){if(this.reason){v(this.reason);return}this._listeners?this._listeners.push(v):this._listeners=[v]}unsubscribe(v){if(!this._listeners)return;const h=this._listeners.indexOf(v);h!==-1&&this._listeners.splice(h,1)}toAbortSignal(){const v=new AbortController,h=u=>{v.abort(u)};return this.subscribe(h),v.signal.unsubscribe=()=>this.unsubscribe(h),v.signal}static source(){let v;return{token:new zS(function(c){v=c}),cancel:v}}};function LE(d){return function(h){return d.apply(null,h)}}function PE(d){return he.isObject(d)&&d.isAxiosError===!0}const Vd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vd).forEach(([d,v])=>{Vd[v]=d});function HS(d){const v=new Oi(d),h=gS(Oi.prototype.request,v);return he.extend(h,Oi.prototype,v,{allOwnKeys:!0}),he.extend(h,v,null,{allOwnKeys:!0}),h.create=function(c){return HS(Ri(d,c))},h}const Ot=HS(Uu);Ot.Axios=Oi;Ot.CanceledError=ma;Ot.CancelToken=AE;Ot.isCancel=DS;Ot.VERSION=VS;Ot.toFormData=hl;Ot.AxiosError=Ge;Ot.Cancel=Ot.CanceledError;Ot.all=function(v){return Promise.all(v)};Ot.spread=LE;Ot.isAxiosError=PE;Ot.mergeConfig=Ri;Ot.AxiosHeaders=cr;Ot.formToJSON=d=>xS(he.isHTMLForm(d)?new FormData(d):d);Ot.getAdapter=IS.getAdapter;Ot.HttpStatusCode=Vd;Ot.default=Ot;const{Axios:NO,AxiosError:qO,CanceledError:UO,isCancel:BO,CancelToken:IO,VERSION:VO,all:zO,Cancel:HO,isAxiosError:FO,spread:GO,toFormData:QO,AxiosHeaders:YO,HttpStatusCode:KO,formToJSON:XO,getAdapter:ZO,mergeConfig:WO}=Ot,ME=({setToken:d,setName:v,setRoom:h,name:u,room:c})=>{async function i(a){a.preventDefault();const o=await Ot.post(`https://videocall-3386-dev.twil.io/videoToken?identity=${u}`,{identity:u,room:c});d(o.data)}return Yt.jsxs("form",{onSubmit:i,children:[Yt.jsxs("label",{htmlFor:"name",children:["Name",Yt.jsx("input",{type:"text",id:"name",value:u,onChange:a=>v(a.target.value)})]}),Yt.jsxs("label",{htmlFor:"room",children:["Room",Yt.jsx("input",{type:"text",id:"room",value:c,onChange:a=>h(a.target.value)})]}),Yt.jsx("br",{}),Yt.jsx("button",{type:"submit",children:"Join the chat"})]})};var ol={exports:{}},Jt={},xr={},cn={},jf,iy;function xE(){return iy||(iy=1,jf=function(d){var v=d.location,h=d.URL;return[v,h].some(function(u){return!u})?function(c){return Promise.reject(new Error("Failed to import: "+c+": dynamicImport is not supported"))}:(d.__twilioVideoImportedModules={},function(c){return c in d.__twilioVideoImportedModules?Promise.resolve(d.__twilioVideoImportedModules[c]):new Function("scope","return import('"+new h(c,v)+"').then(m => scope.__twilioVideoImportedModules['"+c+"'] = m);")(d)})}(globalThis)),jf}var Nf,ay;function FS(){if(ay)return Nf;ay=1;var d=function(){},v="undefined",h=typeof window!==v&&typeof window.navigator!==v&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"];function c(_,E){var b=_[E];if(typeof b.bind=="function")return b.bind(_);try{return Function.prototype.bind.call(b,_)}catch{return function(){return Function.prototype.apply.apply(b,[_,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(_){return _==="debug"&&(_="log"),typeof console===v?!1:_==="trace"&&h?i:console[_]!==void 0?c(console,_):console.log!==void 0?c(console,"log"):d}function o(_,E){for(var b=0;b<u.length;b++){var C=u[b];this[C]=b<_?d:this.methodFactory(C,_,E)}this.log=this.debug}function l(_,E,b){return function(){typeof console!==v&&(o.call(this,E,b),this[_].apply(this,arguments))}}function f(_,E,b){return a(_)||l.apply(this,arguments)}function p(_,E,b){var C=this,N,P="loglevel";typeof _=="string"?P+=":"+_:typeof _=="symbol"&&(P=void 0);function R(T){var O=(u[T]||"silent").toUpperCase();if(!(typeof window===v||!P)){try{window.localStorage[P]=O;return}catch{}try{window.document.cookie=encodeURIComponent(P)+"="+O+";"}catch{}}}function k(){var T;if(!(typeof window===v||!P)){try{T=window.localStorage[P]}catch{}if(typeof T===v)try{var O=window.document.cookie,q=O.indexOf(encodeURIComponent(P)+"=");q!==-1&&(T=/^([^;]+)/.exec(O.slice(q))[1])}catch{}return C.levels[T]===void 0&&(T=void 0),T}}C.name=_,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=b||f,C.getLevel=function(){return N},C.setLevel=function(T,O){if(typeof T=="string"&&C.levels[T.toUpperCase()]!==void 0&&(T=C.levels[T.toUpperCase()]),typeof T=="number"&&T>=0&&T<=C.levels.SILENT){if(N=T,O!==!1&&R(T),o.call(C,T,_),typeof console===v&&T<C.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+T},C.setDefaultLevel=function(T){k()||C.setLevel(T,!1)},C.enableAll=function(T){C.setLevel(C.levels.TRACE,T)},C.disableAll=function(T){C.setLevel(C.levels.SILENT,T)};var S=k();S==null&&(S=E??"WARN"),C.setLevel(S,!1)}var y=new p,g={};y.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var b=g[E];return b||(b=g[E]=new p(E,y.getLevel(),y.methodFactory)),b};var w=typeof window!==v?window.log:void 0;return y.noConflict=function(){return typeof window!==v&&window.log===y&&(window.log=w),y},y.getLoggers=function(){return g},y.default=y,Nf=y,Nf}var ul={exports:{}};const DE="twilio-video",jE="2.31.0",GS={name:DE,version:jE};ul.exports;var oy;function ht(){return oy||(oy=1,function(d){var v=GS;d.exports.SDK_NAME=v.name+".js",d.exports.SDK_VERSION=v.version,d.exports.SDP_FORMAT="unified",d.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},d.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},d.exports.DEFAULT_ENVIRONMENT="prod",d.exports.DEFAULT_REALM="us1",d.exports.DEFAULT_REGION="gll",d.exports.DEFAULT_LOG_LEVEL="warn",d.exports.DEFAULT_LOGGER_NAME="twilio-video",d.exports.WS_SERVER=function(u,c){return c=c==="gll"?"global":encodeURIComponent(c),u==="prod"?"wss://"+c+".vss.twilio.com/signaling":"wss://"+c+".vss."+u+".twilio.com/signaling"},d.exports.PUBLISH_MAX_ATTEMPTS=5,d.exports.PUBLISH_BACKOFF_JITTER=10,d.exports.PUBLISH_BACKOFF_MS=20;function h(u){return["a","e","i","o","u"].includes(u.toLowerCase()[0])?"an":"a"}d.exports.typeErrors={ILLEGAL_INVOKE:function(u,c){return new TypeError("Illegal call to "+u+": "+c)},INVALID_TYPE:function(u,c){return new TypeError(u+" must be "+h(c)+" "+c)},INVALID_VALUE:function(u,c){return new RangeError(u+" must be one of "+c.join(", "))},REQUIRED_ARGUMENT:function(u){return new TypeError(u+" must be specified")}},d.exports.DEFAULT_FRAME_RATE=24,d.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,d.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,d.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,d.exports.DEFAULT_NQ_LEVEL_LOCAL=1,d.exports.DEFAULT_NQ_LEVEL_REMOTE=0,d.exports.MAX_NQ_LEVEL=3,d.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,d.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,d.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:d.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},d.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},d.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},d.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},d.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},d.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},d.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}}(ul)),ul.exports}var di,uy;function qr(){if(uy)return di;uy=1;var d=di&&di.__read||function(E,b){var C=typeof Symbol=="function"&&E[Symbol.iterator];if(!C)return E;var N=C.call(E),P,R=[],k;try{for(;(b===void 0||b-- >0)&&!(P=N.next()).done;)R.push(P.value)}catch(S){k={error:S}}finally{try{P&&!P.done&&(C=N.return)&&C.call(N)}finally{if(k)throw k.error}}return R},v=di&&di.__spreadArray||function(E,b){for(var C=0,N=b.length,P=E.length;C<N;C++,P++)E[P]=b[C];return E},h=FS().getLogger,u=ht(),c=u.DEFAULT_LOG_LEVEL,i=u.DEFAULT_LOGGER_NAME,a=ht().typeErrors,o;function l(E){if(o=o||new Map,o.has(E))return o.get(E);var b=new Set;return o.set(E,b),b}var f=function(){function E(b,C,N,P,R){if(typeof b!="string")throw a.INVALID_TYPE("moduleName","string");if(!C)throw a.REQUIRED_ARGUMENT("component");typeof N!="object"&&(N={}),R=R||h,_(N),Object.defineProperties(this,{_component:{value:C},_logLevels:{value:N},_warnings:{value:new Set},_loggerName:{get:function(){var S=P&&typeof P=="string"?P:i;return this._logLevelsEqual||(S=S+"-"+b),S}},_logger:{get:function(){var S=R(this._loggerName),T=this._logLevels[b]||c;return T=T==="off"?"silent":T,S.setDefaultLevel(T),S}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return E.getLevelByName(N[b]||c)}},name:{get:C.toString.bind(C)}})}return E.getLevelByName=function(b){return isNaN(b)?(b=b.toUpperCase(),w(b),E[b]):parseInt(b,10)},E.prototype.createLog=function(b,C){var N=this._loggerName;return this._logLevelsEqual||(N=N.substring(0,N.lastIndexOf("-"))),new E(b,C,this._logLevels,N)},E.prototype.setLevels=function(b){return _(b),Object.assign(this._logLevels,b),this},E.prototype.log=function(b,C){var N=E._levels[b];if(!N)throw a.INVALID_VALUE("logLevel",y);N=N.toLowerCase();var P=[new Date().toISOString(),N,this.name];return(this._logger[N]||function(){}).apply(void 0,v([],d(P.concat(C)))),this},E.prototype.debug=function(){return this.log(E.DEBUG,[].slice.call(arguments))},E.prototype.deprecated=function(b){var C=l(this._component.constructor);return C.has(b)?this:(C.add(b),this.warn(b))},E.prototype.info=function(){return this.log(E.INFO,[].slice.call(arguments))},E.prototype.warn=function(){return this.log(E.WARN,[].slice.call(arguments))},E.prototype.warnOnce=function(b){return this._warnings.has(b)?this:(this._warnings.add(b),this.warn(b))},E.prototype.error=function(){return this.log(E.ERROR,[].slice.call(arguments))},E.prototype.throw=function(b,C){throw b.clone&&(b=b.clone(C)),this.log(E.ERROR,b),b},E}();Object.defineProperties(f,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var p={},y=[],g=f._levels.map(function(E,b){return p[E]=!0,y.push(b),E});function w(E){if(!(E in p))throw a.INVALID_VALUE("level",g)}function _(E){Object.keys(E).forEach(function(b){w(E[b].toUpperCase())})}return di=f,di}var cy;function NE(){if(cy)return cn;cy=1;var d=cn&&cn.__awaiter||function(o,l,f,p){function y(g){return g instanceof f?g:new f(function(w){w(g)})}return new(f||(f=Promise))(function(g,w){function _(C){try{b(p.next(C))}catch(N){w(N)}}function E(C){try{b(p.throw(C))}catch(N){w(N)}}function b(C){C.done?g(C.value):y(C.value).then(_,E)}b((p=p.apply(o,l||[])).next())})},v=cn&&cn.__generator||function(o,l){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,y,g,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(b){return function(C){return E([b,C])}}function E(b){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,y&&(g=b[0]&2?y.return:b[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,b[1])).done)return g;switch(y=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,y=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){f=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){f.label=b[1];break}if(b[0]===6&&f.label<g[1]){f.label=g[1],g=b;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(b);break}g[2]&&f.ops.pop(),f.trys.pop();continue}b=l.call(o,f)}catch(C){b=[6,C],y=0}finally{p=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(cn,"__esModule",{value:!0}),cn.createNoiseCancellationAudioProcessor=void 0;var h=xE();qr();var u={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},c=function(o){var l=o.supportedVersion,f=o.plugin,p=o.log;if(!f.getVersion||!f.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var y=f.getVersion();p.debug("Plugin Version = "+y);var g=l.split(".").map(function(b){return Number(b)}),w=y.split(".").map(function(b){return Number(b)});if(g.length!==3||w.length!==3)throw new Error("Unsupported Plugin version format: "+l+", "+y);if(g[0]!==w[0])throw new Error("Major version mismatch: [Plugin version "+y+"],  [Supported Version "+l+"]");if(w[1]<g[1])throw new Error("Minor version mismatch: [Plugin version "+y+"] < [Supported Version "+l+"]");var _=new AudioContext,E=f.isSupported(_);if(_.close(),!E)throw new Error("Noise Cancellation plugin is not supported on your browser")},i=new Map;function a(o,l){return d(this,void 0,void 0,function(){var f,p,y,g,w,_,E,b,C;return v(this,function(N){switch(N.label){case 0:if(f=i.get(o.vendor),f)return[3,6];if(p=u[o.vendor],!p)throw new Error("Unsupported NoiseCancellationOptions.vendor: "+o.vendor);y=p.supportedVersion,g=p.pluginFile,w=o.sdkAssetsPath,_=w+"/"+g,N.label=1;case 1:return N.trys.push([1,5,,6]),l.debug("loading noise cancellation sdk: ",_),[4,h(_)];case 2:return E=N.sent(),l.debug("Loaded noise cancellation sdk:",E),b=E.default,c({supportedVersion:y,plugin:b,log:l}),b.isInitialized()?[3,4]:(l.debug("initializing noise cancellation sdk: ",w),[4,b.init({rootDir:w})]);case 3:N.sent(),l.debug("noise cancellation sdk initialized!"),N.label=4;case 4:return f={vendor:o.vendor,isInitialized:function(){return b.isInitialized()},isConnected:function(){return b.isConnected()},isEnabled:function(){return b.isEnabled()},disconnect:function(){return b.disconnect()},enable:function(){return b.enable()},disable:function(){return b.disable()},destroy:function(){return b.destroy()},setLogging:function(P){return b.setLogging(P)},connect:function(P){l.debug("connect: ",P.id),b.isConnected()&&b.disconnect();var R=b.connect(new MediaStream([P]));if(!R)throw new Error("Error connecting with noise cancellation sdk");var k=R.getAudioTracks()[0];if(!k)throw new Error("Error getting clean track from noise cancellation sdk");return b.enable(),k}},i.set(o.vendor,f),[3,6];case 5:throw C=N.sent(),l.error("Error loading noise cancellation sdk:"+_,C),C;case 6:return[2,f]}})})}return cn.createNoiseCancellationAudioProcessor=a,cn}var ly;function qE(){if(ly)return xr;ly=1;var d=xr&&xr.__awaiter||function(i,a,o,l){function f(p){return p instanceof o?p:new o(function(y){y(p)})}return new(o||(o=Promise))(function(p,y){function g(E){try{_(l.next(E))}catch(b){y(b)}}function w(E){try{_(l.throw(E))}catch(b){y(b)}}function _(E){E.done?p(E.value):f(E.value).then(g,w)}_((l=l.apply(i,a||[])).next())})},v=xr&&xr.__generator||function(i,a){var o={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},l,f,p,y;return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(_){return function(E){return w([_,E])}}function w(_){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,f&&(p=_[0]&2?f.return:_[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,_[1])).done)return p;switch(f=0,p&&(_=[_[0]&2,p.value]),_[0]){case 0:case 1:p=_;break;case 4:return o.label++,{value:_[1],done:!1};case 5:o.label++,f=_[1],_=[0];continue;case 7:_=o.ops.pop(),o.trys.pop();continue;default:if(p=o.trys,!(p=p.length>0&&p[p.length-1])&&(_[0]===6||_[0]===2)){o=0;continue}if(_[0]===3&&(!p||_[1]>p[0]&&_[1]<p[3])){o.label=_[1];break}if(_[0]===6&&o.label<p[1]){o.label=p[1],p=_;break}if(p&&o.label<p[2]){o.label=p[2],o.ops.push(_);break}p[2]&&o.ops.pop(),o.trys.pop();continue}_=a.call(i,o)}catch(E){_=[6,E],f=0}finally{l=p=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(xr,"__esModule",{value:!0}),xr.applyNoiseCancellation=xr.NoiseCancellationImpl=void 0;var h=NE();qr();var u=function(){function i(a,o){this._processor=a,this._sourceTrack=o,this._disabledPermanent=!1}return Object.defineProperty(i.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),i.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},i.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},i.prototype.reacquireTrack=function(a){return d(this,void 0,void 0,function(){var o,l,f;return v(this,function(p){switch(p.label){case 0:return o=this._processor.isEnabled(),this._processor.disconnect(),[4,a()];case 1:return l=p.sent(),this._sourceTrack=l,[4,this._processor.connect(l)];case 2:return f=p.sent(),o?this._processor.enable():this._processor.disable(),[2,f]}})})},i.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},i.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},i}();xr.NoiseCancellationImpl=u;function c(i,a,o){return d(this,void 0,void 0,function(){var l,f,p,y;return v(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,h.createNoiseCancellationAudioProcessor(a,o)];case 1:return l=g.sent(),f=l.connect(i),p=new u(l,i),[2,{cleanTrack:f,noiseCancellation:p}];case 2:return y=g.sent(),o.warn("Failed to create noise cancellation. Returning normal audio track: "+y),[2,{cleanTrack:i}];case 3:return[2]}})})}return xr.applyNoiseCancellation=c,xr}var He={},At={},sy;function Xt(){if(sy)return At;sy=1;var d=At&&At.__read||function(k,S){var T=typeof Symbol=="function"&&k[Symbol.iterator];if(!T)return k;var O=T.call(k),q,U=[],F;try{for(;(S===void 0||S-- >0)&&!(q=O.next()).done;)U.push(q.value)}catch(G){F={error:G}}finally{try{q&&!q.done&&(T=O.return)&&T.call(O)}finally{if(F)throw F.error}}return U},v=At&&At.__spreadArray||function(k,S){for(var T=0,O=S.length,q=k.length;T<O;T++,q++)k[q]=S[T];return k};function h(){var k={};return k.promise=new Promise(function(S,T){k.resolve=S,k.reject=T}),k}function u(k,S,T,O){if(!(O in S)&&!O.match(/^on[a-z]+$/)){var q=!1;try{var U=Object.getOwnPropertyDescriptor(k,O);q=U&&!!U.get}catch{}if(!q){var F;try{F=typeof k[O]}catch{}F==="function"&&(S[O]=function(){return this[T][O].apply(this[T],arguments)})}}}function c(k,S,T){for(var O in k)u(k,S,T,O)}function i(k,S){k=Array.isArray(k)?new Set(k):new Set(k.values()),S=Array.isArray(S)?new Set(S):new Set(S.values());var T=new Set;return k.forEach(function(O){S.has(O)||T.add(O)}),T}function a(k,S){var T=k instanceof Map||k instanceof Set?Array.from(k.values()):k;return T.reduce(function(O,q){return O.concat(S(q))},[])}function o(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function l(k){return typeof k>"u"&&(k=o()),/Chrome|CriOS/.test(k)?"chrome":/Firefox|FxiOS/.test(k)?"firefox":/Safari|iPhone|iPad|iPod/.test(k)?"safari":null}function f(k){typeof k>"u"&&(k=o());var S={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[l(k)];if(!S)return null;var T=new RegExp("("+S+")/([^\\s]+)"),O=d(k.match(T)||[],3),q=O[2];if(!q)return null;var U=q.split(".").map(Number);return{major:isNaN(U[0])?null:U[0],minor:isNaN(U[1])?null:U[1]}}function p(k){return typeof k>"u"&&(k=o()),/Mobi/.test(k)&&l()==="chrome"&&/iPad|iPhone|iPod/.test(k)}function y(k,S){var T=null;Object.defineProperty(k,"on"+S,{get:function(){return T},set:function(O){T&&this.removeEventListener(S,T),typeof O=="function"?(T=O,this.addEventListener(S,T)):T=null}})}function g(k,S,T){return S?k.then(S,T):k}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){var S=Math.random()*16|0,T=k==="x"?S:S&3|8;return T.toString(16)})}function _(k,S,T){Object.getOwnPropertyNames(k).forEach(function(O){E(k,S,T,O)})}function E(k,S,T,O){if(!(O in S)){if(O.match(/^on[a-z]+$/)){Object.defineProperty(S,O,{value:null,writable:!0}),T.addEventListener(O.slice(2),function(){for(var q=[],U=0;U<arguments.length;U++)q[U]=arguments[U];return S.dispatchEvent.apply(S,v([],d(q)))});return}Object.defineProperty(S,O,{enumerable:!0,get:function(){return T[O]}})}}function b(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function C(k){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(k).codecs.map(function(T){var O=T.mimeType;return O.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var S=new RTCPeerConnection;return S.addTransceiver(k),S.createOffer().then(function(T){var O=T.sdp;return S.close(),new Set((O.match(/^a=rtpmap:.+$/gm)||[]).map(function(q){return q.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return S.close(),new Set})}var N=new Map;function P(k,S){var T=N.get(S);return T?Promise.resolve(T.has(k.toLowerCase())):C(S).then(function(O){return N.set(S,O),O.has(k.toLowerCase())})}function R(){N.clear()}return At.clearCachedSupportedCodecs=R,At.defer=h,At.delegateMethods=c,At.difference=i,At.flatMap=a,At.guessBrowser=l,At.guessBrowserVersion=f,At.isCodecSupported=P,At.isIOSChrome=p,At.interceptEvent=y,At.legacyPromise=g,At.makeUUID=w,At.proxyProperties=_,At.support=b,At}var Jc={},fy;function QS(){if(fy)return Jc;fy=1;var d="1234567890abcdef",v=32;function h(u){for(var c="",i=0;i<v;i++)c+=d.charAt(Math.floor(Math.random()*d.length));return""+u+c}return Jc.sessionSID=h("SS"),Jc.createSID=h,Jc}var qf,dy;function YS(){if(dy)return qf;dy=1;var d={recordingMediaLost:"recording-media-lost"};return qf=d,qf}var vy;function ut(){if(vy)return He;vy=1;var d=He&&He.__extends||function(){var ee=function(oe,Y){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,J){V.__proto__=J}||function(V,J){for(var we in J)Object.prototype.hasOwnProperty.call(J,we)&&(V[we]=J[we])},ee(oe,Y)};return function(oe,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");ee(oe,Y);function V(){this.constructor=oe}oe.prototype=Y===null?Object.create(Y):(V.prototype=Y.prototype,new V)}}(),v=He&&He.__read||function(ee,oe){var Y=typeof Symbol=="function"&&ee[Symbol.iterator];if(!Y)return ee;var V=Y.call(ee),J,we=[],Re;try{for(;(oe===void 0||oe-- >0)&&!(J=V.next()).done;)we.push(J.value)}catch(De){Re={error:De}}finally{try{J&&!J.done&&(Y=V.return)&&Y.call(V)}finally{if(Re)throw Re.error}}return we},h=He&&He.__spreadArray||function(ee,oe){for(var Y=0,V=oe.length,J=ee.length;Y<V;Y++,J++)ee[J]=oe[Y];return ee},u=ht(),c=u.typeErrors,i=u.trackPriority,a=Xt(),o=QS().sessionSID,l=YS();function f(ee,oe){if(ee instanceof oe.LocalAudioTrack||ee instanceof oe.LocalVideoTrack||ee instanceof oe.LocalDataTrack)return ee;if(ee instanceof oe.MediaStreamTrack)return ee.kind==="audio"?new oe.LocalAudioTrack(ee,oe):new oe.LocalVideoTrack(ee,oe);throw c.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function p(ee,oe,Y,V){var J={audio:V.LocalAudioTrackPublication,video:V.LocalVideoTrackPublication,data:V.LocalDataTrackPublication}[ee.kind];return new J(oe,ee,Y,V)}function y(ee){return ee[0].toUpperCase()+ee.slice(1)}function g(ee,oe,Y,V){var J=new Set;oe.on("newListener",function we(Re){Y.has(Re)&&!J.has(Re)&&(V.deprecated(ee+"#"+Re+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(Y.get(Re)?" Use "+ee+"#"+Y.get(Re)+" instead.":"")),J.add(Re)),J.size>=Y.size&&oe.removeListener("newListener",we)})}function w(ee,oe){ee=Array.isArray(ee)?new Set(ee):new Set(ee.values()),oe=Array.isArray(oe)?new Set(oe):new Set(oe.values());var Y=new Set;return ee.forEach(function(V){oe.has(V)||Y.add(V)}),Y}function _(ee,oe){return Object.keys(ee).reduce(function(Y,V){return ee[V]!==oe&&(Y[V]=ee[V]),Y},{})}function E(ee,oe){var Y=ee instanceof Map||ee instanceof Set?Array.from(ee.values()):ee;return oe=oe||function(J){return J},Y.reduce(function(V,J){var we=oe(J);return V.concat(we)},[])}function b(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function C(){var ee=b(),oe=v(ee.match(/\(([^)]+)\)/)||[],2),Y=oe[1],V=Y===void 0?"unknown":Y,J=v(V.split(";").map(function(Re){return Re.trim()}),1),we=J[0];return we.toLowerCase()}function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ee){var oe=Math.random()*16|0,Y=ee==="x"?oe:oe&3|8;return Y.toString(16)})}function P(ee){var oe=null;function Y(){oe=null,ee()}return function(){oe&&clearTimeout(oe),oe=setTimeout(Y)}}function R(ee,oe,Y,V){return new Promise(function(J,we){function Re(){var Ke=[].slice.call(arguments);V&&oe.removeListener(V,De),J.apply(void 0,h([],v(Ke)))}function De(){var Ke=[].slice.call(arguments);oe.removeListener(Y,Re),we.apply(void 0,h([],v(Ke)))}oe.once(Y,Re),V&&oe.once(V,De),ee()})}function k(ee,oe){return oe.split(".").reduce(function(Y,V){return Y?Y[V]:null},ee)}function S(){var ee={};return ee.promise=new Promise(function(oe,Y){ee.resolve=oe,ee.reject=Y}),ee}function T(ee,oe,Y,V){if(!(V in oe)&&!V.match(/^on[a-z]+$/)){var J;try{J=typeof ee[V]}catch{}J==="function"&&(oe[V]=function(){for(var we,Re=[],De=0;De<arguments.length;De++)Re[De]=arguments[De];return(we=this[Y])[V].apply(we,h([],v(Re)))})}}function O(ee,oe,Y){for(var V in ee)T(ee,oe,Y,V)}function q(ee,oe){if(ee===oe)return!0;if(typeof ee!=typeof oe)return!1;if(ee===null)return oe===null;if(oe===null)return!1;if(Array.isArray(ee))return Array.isArray(oe)&&ee.length===oe.length&&ee.every(function(J,we){return q(J,oe[we])});if(typeof ee=="object"){var Y=Object.keys(ee).sort(),V=Object.keys(oe).sort();return!Array.isArray(oe)&&q(Y,V)&&Y.every(function(J){return q(ee[J],oe[J])})}return!1}function U(ee){return typeof ee=="object"&&!Array.isArray(ee)}function F(ee,oe,Y){Object.getOwnPropertyNames(ee).forEach(function(V){G(ee,oe,Y,V)})}function G(ee,oe,Y,V){if(!(V in oe)){if(V.match(/^on[a-z]+$/)){Object.defineProperty(oe,V,{value:null,writable:!0}),Y.addEventListener(V.slice(2),function(){for(var J=[],we=0;we<arguments.length;we++)J[we]=arguments[we];oe.dispatchEvent.apply(oe,h([],v(J)))});return}Object.defineProperty(oe,V,{enumerable:!0,get:function(){return Y[V]}})}}function B(ee,oe,Y){return oe?ee.then(function(V){oe(V)},function(V){Y(V)}):ee}function z(ee){return typeof ee=="string"?{default:ee,media:ee,signaling:ee,webrtc:ee}:ee}function D(ee,oe){return oe=oe?"Local":"",oe+(ee.kind||"").replace(/\w{1}/,function(Y){return Y.toUpperCase()})+"Track"}function j(ee,oe){return oe=oe?"Local":"",oe+(ee.kind||"").replace(/\w{1}/,function(Y){return Y.toUpperCase()})+"TrackPublication"}function Q(ee){Object.getOwnPropertyNames(ee).forEach(function(oe){oe.startsWith("_")&&K(ee,oe)})}function Z(ee,oe){return function(Y){d(V,Y);function V(){for(var J=[],we=0;we<arguments.length;we++)J[we]=arguments[we];var Re=Y.apply(this,h([],v(J)))||this;return Q(Re),A(Re,oe),Re}return V}(ee)}function K(ee,oe){var Y=Object.getOwnPropertyDescriptor(ee,oe);Y.enumerable=!1,Object.defineProperty(ee,oe,Y)}function A(ee,oe){oe===void 0&&(oe=[]),oe.forEach(function(Y){ee.hasOwnProperty(Y)&&K(ee,Y)})}function x(ee){return ee.map(ie)}function L(ee){return x(h([],v(ee)))}function I(ee){return h([],v(ee.entries())).reduce(function(oe,Y){var V,J=v(Y,2),we=J[0],Re=J[1];return Object.assign((V={},V[we]=ie(Re),V),oe)},{})}function W(ee){return Object.entries(ee).reduce(function(oe,Y){var V,J=v(Y,2),we=J[0],Re=J[1];return Object.assign((V={},V[we]=ie(Re),V),oe)},{})}function ie(ee){return Array.isArray(ee)?x(ee):ee instanceof Set?L(ee):ee instanceof Map?I(ee):ee&&typeof ee=="object"?W(ee):ee}function $(ee){function oe(we){return we?"true":"false"}var Y={sessionSID:o,iceServers:(ee.iceServers||[]).length,audioTracks:(ee.tracks||[]).filter(function(we){return we.kind==="audio"}).length,videoTracks:(ee.tracks||[]).filter(function(we){return we.kind==="video"}).length,dataTracks:(ee.tracks||[]).filter(function(we){return we.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(we){var Re=v(we,2),De=Re[0],Ke=Re[1];Ke=Ke||De,Y[Ke]=oe(!!ee[De])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(we){var Re=v(we,2),De=Re[0],Ke=Re[1];Ke=Ke||De,typeof ee[De]=="number"?Y[Ke]=ee[De]:isNaN(Number(ee[De]))||(Y[Ke]=Number(ee[De]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(we){var Re=v(we,2),De=Re[0],Ke=Re[1];Ke=Ke||De,typeof ee[De]=="string"?Y[Ke]=ee[De]:typeof ee[De]=="number"&&De==="name"&&(Y[Ke]=ee[De].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(we){we in ee&&(Y[we]=JSON.stringify(ee[we]))}),"networkQuality"in ee&&(Y.networkQualityConfiguration={},U(ee.networkQuality)?["local","remote"].forEach(function(we){typeof ee.networkQuality[we]=="number"&&(Y.networkQualityConfiguration[we]=ee.networkQuality[we])}):(Y.networkQualityConfiguration.remote=0,Y.networkQualityConfiguration.local=ee.networkQuality?1:0)),ee.bandwidthProfile&&ee.bandwidthProfile.video){var V=ee.bandwidthProfile.video||{};Y.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(we){typeof V[we]=="number"||typeof V[we]=="string"?Y.bandwidthProfileOptions[we]=V[we]:typeof V[we]=="boolean"?Y.bandwidthProfileOptions[we]=oe(V[we]):typeof V[we]=="object"&&(Y.bandwidthProfileOptions[we]=JSON.stringify(V[we]))})}var J={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(J).forEach(function(we){var Re=v(we,2),De=Re[0],Ke=Re[1];Y[Ke]=oe(typeof ee[De]<"u")}),{group:"room",name:"connect",level:"info",payload:Y}}function ae(ee){return Ce(ee,[{prop:"video",type:"object",transform:pe}])}function pe(ee){return Ce(ee,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Ee},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function Te(ee,oe,Y,V,J,we){var Re={transports:[{type:"data-channel"}]};return Object.assign(ee?{active_speaker:Re}:{},oe?{network_quality:Re}:{},we?{render_hints:Re}:{},J?{publisher_hints:Re}:{},Y?{track_priority:Re}:{},V?{track_switch_off:Re}:{})}function xe(ee){return Ce(ee,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Ee(ee){var oe=i.PRIORITY_HIGH,Y=i.PRIORITY_LOW,V=i.PRIORITY_STANDARD;return Ce(ee,[{prop:oe,type:"object",transform:xe},{prop:Y,type:"object",transform:xe},{prop:V,type:"object",transform:xe}])}function Ce(ee,oe){return oe.reduce(function(Y,V){var J,we=V.prop,Re=V.type,De=V.payloadProp,Ke=De===void 0?we:De,Xe=V.transform,Be=Xe===void 0?function(Lt){return Lt}:Xe;return typeof ee[we]===Re?Object.assign((J={},J[Ke]=Be(ee[we]),J),Y):Y},{})}function Le(ee){return{rules:[{type:ee?"include":"exclude",all:!0}],revision:1}}function Pe(ee){var oe,Y=(oe={},oe[l.recordingMediaLost]="recordings",oe);return ee.map(function(V){return Y[V]}).filter(function(V){return!!V})}function Oe(ee,oe){var Y=Math.random();return ee-oe+Math.floor(2*oe*Y+.5)}function _e(ee,oe,Y){return oe<=ee&&ee<=Y}function je(ee){return a.guessBrowser()==="chrome"&&ee.kind==="video"&&"displaySurface"in ee.getSettings()}function Ae(ee){return ee===void 0&&(ee=10),new Promise(function(oe){return setTimeout(oe,ee)})}function Qe(ee,oe){return new Promise(function(Y){ee.addEventListener(oe,function V(J){ee.removeEventListener(oe,V),Y(J)})})}return He.constants=u,He.createBandwidthProfilePayload=ae,He.createMediaSignalingPayload=Te,He.createMediaWarningsPayload=Pe,He.createRoomConnectEventPayload=$,He.createSubscribePayload=Le,He.asLocalTrack=f,He.asLocalTrackPublication=p,He.capitalize=y,He.deprecateEvents=g,He.difference=w,He.filterObject=_,He.flatMap=E,He.getPlatform=C,He.getUserAgent=b,He.hidePrivateProperties=Q,He.hidePrivateAndCertainPublicPropertiesInClass=Z,He.isDeepEqual=q,He.isNonArrayObject=U,He.inRange=_e,He.makeUUID=N,He.oncePerTick=P,He.promiseFromEvents=R,He.getOrNull=k,He.defer=S,He.delegateMethods=O,He.proxyProperties=F,He.legacyPromise=B,He.buildLogLevels=z,He.trackClass=D,He.trackPublicationClass=j,He.valueToJSON=ie,He.withJitter=Oe,He.isChromeScreenShareTrack=je,He.waitForSometime=Ae,He.waitForEvent=Qe,He}var Dr={},hy;function Bu(){if(hy)return Dr;hy=1;var d=Xt(),v=d.flatMap,h=d.guessBrowser,u=null;function c(){if(typeof u=="boolean")return u;if(typeof RTCPeerConnection>"u")return u=!1,u;try{new RTCPeerConnection({sdpSemantics:"foo"}),u=!1}catch{u=!0}return u}var i=null;function a(){i=null}function o(){if(!i)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var q=new RTCPeerConnection;try{q.addTransceiver("audio"),i="unified"}catch{i="planb"}q.close()}else i="planb";return i}function l(q){return!q||!c()?o():{"plan-b":"planb","unified-plan":"unified"}[q]}function f(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function p(q){return{chrome:l(q),firefox:"unified",safari:f()}[h()]||null}function y(q,U){var F=U.match(new RegExp(q,"gm"))||[];return F.reduce(function(G,B){var z=B.match(new RegExp(q));return z?G.add(z[1]):G},new Set)}function g(q,U){return y(q,U)}function w(q){return g("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",q)}function _(q){return g("^a=msid:.+ +(.+) *$",q)}function E(q,U){var F="^a=ssrc:([0-9]+) +msid:[^ ]+ +"+U+" *$";return y(F,q)}function b(q,U,F){return U===void 0&&(U=".*"),F===void 0&&(F=".*"),q.split(`\r
m=`).slice(1).map(function(G){return"m="+G}).filter(function(G){var B=new RegExp("m="+U,"gm"),z=new RegExp("a="+F,"gm");return B.test(G)&&z.test(G)})}function C(q){return Array.from(y("^a=ssrc:([0-9]+) +.*$",q))}function N(q,U){var F=b(q),G=new RegExp("^a=msid:[^ ]+ +"+U+" *$","gm"),B=F.filter(function(z){return z.match(G)});return new Set(v(B,C))}function P(q,U,F){return new Map(Array.from(q(F)).map(function(G){return[G,U(F,G)]}))}function R(q){return P(w,E,q)}function k(q){return P(_,N,q)}function S(q,U,F){var G=q(F),B=new Map;G.forEach(function(j,Q){if(!U.has(Q)){U.set(Q,j);return}var Z=Array.from(U.get(Q)),K=Array.from(j);Z.forEach(function(A,x){var L=K[x];B.set(L,A);var I="^a=ssrc:"+L+" (.*)$",W="a=ssrc:"+A+" $1";F=F.replace(new RegExp(I,"gm"),W)})});var z="^(a=ssrc-group:[^ ]+ +)(.*)$",D=F.match(new RegExp(z,"gm"))||[];return D.forEach(function(j){var Q=j.match(new RegExp(z));if(Q){var Z=Q[1],K=Q[2],A=K.split(" ").map(function(x){var L=B.get(x);return L||x}).join(" ");F=F.replace(Q[0],Z+A)}}),F}function T(q,U){return S(R,q,U)}function O(q,U){return S(k,q,U)}return Dr.clearChromeCachedSdpFormat=a,Dr.getSdpFormat=p,Dr.getMediaSections=b,Dr.getPlanBTrackIds=w,Dr.getUnifiedPlanTrackIds=_,Dr.getPlanBSSRCs=E,Dr.getUnifiedPlanSSRCs=N,Dr.updatePlanBTrackIdsToSSRCs=T,Dr.updateUnifiedPlanTrackIdsToSSRCs=O,Dr}var vi,py;function UE(){if(py)return vi;py=1;var d=vi&&vi.__values||function(B){var z=typeof Symbol=="function"&&Symbol.iterator,D=z&&B[z],j=0;if(D)return D.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&j>=B.length&&(B=void 0),{value:B&&B[j++],done:!B}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},v=vi&&vi.__read||function(B,z){var D=typeof Symbol=="function"&&B[Symbol.iterator];if(!D)return B;var j=D.call(B),Q,Z=[],K;try{for(;(z===void 0||z-- >0)&&!(Q=j.next()).done;)Z.push(Q.value)}catch(A){K={error:A}}finally{try{Q&&!Q.done&&(D=j.return)&&D.call(j)}finally{if(K)throw K.error}}return Z},h=Xt(),u=h.flatMap,c=h.guessBrowser,i=h.guessBrowserVersion,a=Bu().getSdpFormat,o=c(),l=i(),f=o==="chrome",p=o==="firefox",y=o==="safari",g=f?l.major:null,w=32767;function _(B,z){return typeof B.get=="function"?B.get(z):B.find(function(D){return D.id===z})}function E(B,z,D){var j,Q,Z,K,A,x,L,I,W,ie,$,ae,pe,Te,xe,Ee,Ce,Le,Pe,Oe,_e,je;D===void 0&&(D=!1);var Ae;if(Array.isArray(B))Ae=new Map(B.map(function(nt){return[nt.id||String(Math.random()),nt]}));else if(B instanceof Map)Ae=B;else if(typeof B=="object"&&B!==null){var Qe=new Map;Object.keys(B).forEach(function(nt){Qe.set(nt,B[nt])}),Ae=Qe}else return new Map;if(!Ae||!z)return new Map;var ee=new Map,oe=z.id,Y=z.kind,V=null,J=null,we=null;try{for(var Re=d(Ae),De=Re.next();!De.done;De=Re.next()){var Ke=v(De.value,2),Xe=Ke[0],Be=Ke[1];if(D&&Be.type==="inbound-rtp"&&Be.trackIdentifier===oe){V=Be,J=Xe,we=Be.ssrc;break}else if(!D&&Be.type==="media-source"&&Be.trackIdentifier===oe){V=Be,J=Xe;break}else Be.type==="track"&&Be.trackIdentifier===oe&&(V||(V=Be,J=Xe))}}catch(nt){j={error:nt}}finally{try{De&&!De.done&&(Q=Re.return)&&Q.call(Re)}finally{if(j)throw j.error}}if(!V)if(D){var Lt=[];try{for(var tr=d(Ae),Dt=tr.next();!Dt.done;Dt=tr.next()){var ke=v(Dt.value,2),Xe=ke[0],Be=ke[1];Be.type==="inbound-rtp"&&(Be.kind===Y||Be.mediaType===Y)&&Lt.push({id:Xe,stat:Be})}}catch(nt){Z={error:nt}}finally{try{Dt&&!Dt.done&&(K=tr.return)&&K.call(tr)}finally{if(Z)throw Z.error}}(Lt.length===1||Lt.length>1)&&(V=Lt[0].stat,J=Lt[0].id,we=V.ssrc)}else try{for(var me=d(Ae),X=me.next();!X.done;X=me.next()){var te=v(X.value,2),Xe=te[0],Be=te[1];if(Be.type==="media-source"&&Be.kind===Y){V=Be,J=Xe;break}}}catch(nt){A={error:nt}}finally{try{X&&!X.done&&(x=me.return)&&x.call(me)}finally{if(A)throw A.error}}if(!V)return ee;ee.set(J,V);var de=new Set;if(D){if(V.codecId&&de.add(V.codecId),V.transportId&&de.add(V.transportId),V.remoteId&&de.add(V.remoteId),we)try{for(var ve=d(Ae),be=ve.next();!be.done;be=ve.next()){var ze=v(be.value,2),Xe=ze[0],Be=ze[1];Be.type==="remote-outbound-rtp"&&Be.ssrc===we&&de.add(Xe)}}catch(nt){L={error:nt}}finally{try{be&&!be.done&&(I=ve.return)&&I.call(ve)}finally{if(L)throw L.error}}try{for(var Ze=d(de),_t=Ze.next();!_t.done;_t=Ze.next()){var mt=_t.value;Ae.has(mt)&&ee.set(mt,Ae.get(mt))}}catch(nt){W={error:nt}}finally{try{_t&&!_t.done&&(ie=Ze.return)&&ie.call(Ze)}finally{if(W)throw W.error}}try{for(var rt=d(Ae),at=rt.next();!at.done;at=rt.next()){var Fe=v(at.value,2),Xe=Fe[0],Be=Fe[1];Be.type==="track"&&Be.trackIdentifier===oe&&ee.set(Xe,Be)}}catch(nt){$={error:nt}}finally{try{at&&!at.done&&(ae=rt.return)&&ae.call(rt)}finally{if($)throw $.error}}}else{try{for(var st=d(Ae),Bt=st.next();!Bt.done;Bt=st.next()){var Zt=v(Bt.value,2),Xe=Zt[0],Be=Zt[1];if(Be.type==="outbound-rtp"&&Be.mediaSourceId===J){ee.set(Xe,Be),Be.codecId&&de.add(Be.codecId),Be.transportId&&de.add(Be.transportId);var jt=Xe;try{for(var Pt=(xe=void 0,d(Ae)),mr=Pt.next();!mr.done;mr=Pt.next()){var Pi=v(mr.value,2),_l=Pi[0],ga=Pi[1];ga.type==="remote-inbound-rtp"&&ga.localId===jt&&ee.set(_l,ga)}}catch(Vu){xe={error:Vu}}finally{try{mr&&!mr.done&&(Ee=Pt.return)&&Ee.call(Pt)}finally{if(xe)throw xe.error}}}}}catch(nt){pe={error:nt}}finally{try{Bt&&!Bt.done&&(Te=st.return)&&Te.call(st)}finally{if(pe)throw pe.error}}try{for(var Xn=d(de),Or=Xn.next();!Or.done;Or=Xn.next()){var mt=Or.value;Ae.has(mt)&&ee.set(mt,Ae.get(mt))}}catch(nt){Ce={error:nt}}finally{try{Or&&!Or.done&&(Le=Xn.return)&&Le.call(Xn)}finally{if(Ce)throw Ce.error}}}var Fr=null,Gr=new Set;try{for(var Rr=d(ee.values()),Cr=Rr.next();!Cr.done;Cr=Rr.next()){var Be=Cr.value;Be.transportId&&Gr.add(Be.transportId)}}catch(nt){Pe={error:nt}}finally{try{Cr&&!Cr.done&&(Oe=Rr.return)&&Oe.call(Rr)}finally{if(Pe)throw Pe.error}}try{for(var Ar=d(Gr),gt=Ar.next();!gt.done;gt=Ar.next()){var Mi=gt.value;if(Ae.has(Mi)){var rr=Ae.get(Mi);ee.set(Mi,rr),rr.selectedCandidatePairId&&(Fr=rr.selectedCandidatePairId),rr.localCertificateId&&Ae.has(rr.localCertificateId)&&ee.set(rr.localCertificateId,Ae.get(rr.localCertificateId)),rr.remoteCertificateId&&Ae.has(rr.remoteCertificateId)&&ee.set(rr.remoteCertificateId,Ae.get(rr.remoteCertificateId))}}}catch(nt){_e={error:nt}}finally{try{gt&&!gt.done&&(je=Ar.return)&&je.call(Ar)}finally{if(_e)throw _e.error}}if(Fr&&Ae.has(Fr)){var It=Ae.get(Fr);ee.set(Fr,It),It.localCandidateId&&Ae.has(It.localCandidateId)&&ee.set(It.localCandidateId,Ae.get(It.localCandidateId)),It.remoteCandidateId&&Ae.has(It.remoteCandidateId)&&ee.set(It.remoteCandidateId,Ae.get(It.remoteCandidateId))}return ee}function b(B,z){return B&&typeof B.getStats=="function"?C(B,z):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function C(B,z){var D=k(B,"audio","local"),j=k(B,"video","local"),Q=k(B,"audio"),Z=k(B,"video"),K={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},A=u([[D,"localAudioTrackStats",!1],[j,"localVideoTrackStats",!1],[Q,"remoteAudioTrackStats",!0],[Z,"remoteVideoTrackStats",!0]],function(x){var L=v(x,3),I=L[0],W=L[1],ie=L[2];return I.map(function($){return T(B,$,Object.assign({isRemote:ie},z)).then(function(ae){ae.forEach(function(pe){pe.trackId=$.id,K[W].push(pe)})})})});return Promise.all(A).then(function(){return N(B,z)}).then(function(x){return K.activeIceCandidatePair=x,K})}function N(B,z){return z===void 0&&(z={}),typeof z.testForChrome<"u"||f||typeof z.testForSafari<"u"||y?B.getStats().then(P):typeof z.testForFirefox<"u"||p?B.getStats().then(R):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function P(B){var z=Array.from(B.values()).find(function(x){var L=x.nominated,I=x.type;return I==="candidate-pair"&&L});if(!z)return null;var D=_(B,z.localCandidateId),j=_(B,z.remoteCandidateId),Q=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],Z=Q.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),K=D?Z.reduce(function(x,L){var I=L.key,W=L.type;return x[I]=typeof D[I]===W?D[I]:I==="deleted"?!1:null,x},{}):null,A=j?Q.reduce(function(x,L){var I=L.key,W=L.type;return x[I]=typeof j[I]===W?j[I]:null,x},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(x){return x==="inprogress"?"in-progress":x}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(x,L){var I=L.key,W=L.type,ie=L.fixup;return x[I]=typeof z[I]===W?ie?ie(z[I]):z[I]:null,x},{localCandidate:K,remoteCandidate:A})}function R(B){var z=Array.from(B.values()).find(function(L){var I=L.nominated,W=L.type;return W==="candidate-pair"&&I});if(!z)return null;var D=_(B,z.localCandidateId),j=_(B,z.remoteCandidateId),Q=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],Z=Q.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),K={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},A=D?Z.reduce(function(L,I){var W=I.ffKeys,ie=I.key,$=I.type,ae=W&&W.find(function(pe){return pe in D})||ie;return L[ie]=typeof D[ae]===$?ae==="candidateType"&&K[D[ae]]||D[ae]:ae==="deleted"?!1:null,L},{}):null,x=j?Q.reduce(function(L,I){var W=I.ffKeys,ie=I.key,$=I.type,ae=W&&W.find(function(pe){return pe in j})||ie;return L[ie]=typeof j[ae]===$?ae==="candidateType"&&K[j[ae]]||j[ae]:null,L},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(L,I){var W=I.key,ie=I.type;return L[W]=typeof z[W]===ie?z[W]:null,L},{localCandidate:A,remoteCandidate:x})}function k(B,z,D){var j=D==="local"?"getSenders":"getReceivers";if(B[j])return B[j]().map(function(K){var A=K.track;return A}).filter(function(K){return K&&K.kind===z});var Q=D==="local"?"getLocalStreams":"getRemoteStreams",Z=z==="audio"?"getAudioTracks":"getVideoTracks";return u(B[Q](),function(K){return K[Z]()})}function S(B,z){var D,j,Q,Z,K,A;if(!B||!z)return!1;if(B.getReceivers){var x=B.getReceivers();try{for(var L=d(x),I=L.next();!I.done;I=L.next()){var W=I.value;if(W.track&&W.track.id===z.id)return!0}}catch(Le){D={error:Le}}finally{try{I&&!I.done&&(j=L.return)&&j.call(L)}finally{if(D)throw D.error}}}if(B.getRemoteStreams){var ie=B.getRemoteStreams();try{for(var $=d(ie),ae=$.next();!ae.done;ae=$.next()){var pe=ae.value,Te=pe.getTracks();try{for(var xe=(K=void 0,d(Te)),Ee=xe.next();!Ee.done;Ee=xe.next()){var Ce=Ee.value;if(Ce.id===z.id)return!0}}catch(Le){K={error:Le}}finally{try{Ee&&!Ee.done&&(A=xe.return)&&A.call(xe)}finally{if(K)throw K.error}}}}catch(Le){Q={error:Le}}finally{try{ae&&!ae.done&&(Z=$.return)&&Z.call($)}finally{if(Q)throw Q.error}}}return!1}function T(B,z,D){return D===void 0&&(D={}),typeof D.testForChrome<"u"||f?O(B,z,D):typeof D.testForFirefox<"u"||p?q(B,z,D):typeof D.testForSafari<"u"||y?typeof D.testForSafari<"u"||a()==="unified"?O(B,z,D):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function O(B,z,D){var j=D.log;return g&&g<67?new Promise(function(Q,Z){B.getStats(function(K){Q([U(K,z)])},null,Z)}):B.getStats(z).then(function(Q){return j.info("getStats by track successful"),F(Q,D)}).catch(function(){return j.warn("getStats by track failed. Getting default stats"),B.getStats().then(function(Q){j.info("getStats by default successful");var Z=S(B,z);j.info("Starting filtering stats for "+(Z?"remote":"local")+" track");var K=E(Q,z,Z);return j.info("Completed filtering stats for "+(Z?"remote":"local")+" track"),F(K,D)})})}function q(B,z,D){return B.getStats(z).then(function(j){return[G(j,D)]})}function U(B,z){var D=B.result().find(function(Q){return Q.type==="ssrc"&&Q.stat("googTrackId")===z.id}),j={};return D&&(j.timestamp=Math.round(Number(D.timestamp)),j=D.names().reduce(function(Q,Z){switch(Z){case"googCodecName":Q.codecName=D.stat(Z);break;case"googRtt":Q.roundTripTime=Number(D.stat(Z));break;case"googJitterReceived":Q.jitter=Number(D.stat(Z));break;case"googFrameWidthInput":Q.frameWidthInput=Number(D.stat(Z));break;case"googFrameHeightInput":Q.frameHeightInput=Number(D.stat(Z));break;case"googFrameWidthSent":Q.frameWidthSent=Number(D.stat(Z));break;case"googFrameHeightSent":Q.frameHeightSent=Number(D.stat(Z));break;case"googFrameWidthReceived":Q.frameWidthReceived=Number(D.stat(Z));break;case"googFrameHeightReceived":Q.frameHeightReceived=Number(D.stat(Z));break;case"googFrameRateInput":Q.frameRateInput=Number(D.stat(Z));break;case"googFrameRateSent":Q.frameRateSent=Number(D.stat(Z));break;case"googFrameRateReceived":Q.frameRateReceived=Number(D.stat(Z));break;case"ssrc":Q[Z]=D.stat(Z);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":Q[Z]=Number(D.stat(Z));break}return Q},j)),j}function F(B,z){var D=z.simulateExceptionWhileStandardizingStats,j=D===void 0?!1:D;if(j)throw new Error("Error while gathering stats");var Q=null,Z=[],K=null,A=null,x=null,L=null,I=null;B.forEach(function(pe){var Te=pe.type;switch(Te){case"inbound-rtp":Q=pe;break;case"outbound-rtp":Z.push(pe);break;case"media-source":I=pe;break;case"track":x=pe;break;case"codec":L=pe;break;case"remote-inbound-rtp":K=pe;break;case"remote-outbound-rtp":A=pe;break}});var W=x?x.remoteSource:!I,ie=W?[Q]:Z,$=[],ae=W?A:K;return ie.forEach(function(pe){var Te={},xe=[pe,I,x,L,ae&&ae.ssrc===pe.ssrc?ae:null];function Ee(ke){var me=xe.find(function(X){return X&&typeof X[ke]<"u"})||null;return me?me[ke]:null}var Ce=Ee("ssrc");typeof Ce=="number"&&(Te.ssrc=String(Ce));var Le=Ee("timestamp");Te.timestamp=Math.round(Le);var Pe=Ee("mimeType");typeof Pe=="string"&&(Pe=Pe.split("/"),Te.codecName=Pe[Pe.length-1]);var Oe=Ee("roundTripTime");typeof Oe=="number"&&(Te.roundTripTime=Math.round(Oe*1e3));var _e=Ee("jitter");typeof _e=="number"&&(Te.jitter=Math.round(_e*1e3));var je=Ee("frameWidth");typeof je=="number"&&(W?Te.frameWidthReceived=je:(Te.frameWidthSent=je,Te.frameWidthInput=x?x.frameWidth:I.width));var Ae=Ee("frameHeight");typeof Ae=="number"&&(W?Te.frameHeightReceived=Ae:(Te.frameHeightSent=Ae,Te.frameHeightInput=x?x.frameHeight:I.height));var Qe=Ee("framesPerSecond");typeof Qe=="number"&&(Te[W?"frameRateReceived":"frameRateSent"]=Qe);var ee=Ee("bytesReceived");typeof ee=="number"&&(Te.bytesReceived=ee);var oe=Ee("bytesSent");typeof oe=="number"&&(Te.bytesSent=oe);var Y=Ee("packetsLost");typeof Y=="number"&&(Te.packetsLost=Y);var V=Ee("packetsReceived");typeof V=="number"&&(Te.packetsReceived=V);var J=Ee("packetsSent");typeof J=="number"&&(Te.packetsSent=J);var we=Ee("audioLevel");typeof we=="number"&&(we=Math.round(we*w),W?Te.audioOutputLevel=we:Te.audioInputLevel=we);var Re=Ee("totalPacketSendDelay");typeof Re=="number"&&(Te.totalPacketSendDelay=Re);var De=Ee("totalEncodeTime");typeof De=="number"&&(Te.totalEncodeTime=De);var Ke=Ee("framesEncoded");typeof Ke=="number"&&(Te.framesEncoded=Ke);var Xe=Ee("estimatedPlayoutTimestamp");typeof Xe=="number"&&(Te.estimatedPlayoutTimestamp=Xe);var Be=Ee("totalDecodeTime");typeof Be=="number"&&(Te.totalDecodeTime=Be);var Lt=Ee("framesDecoded");typeof Lt=="number"&&(Te.framesDecoded=Lt);var tr=Ee("jitterBufferDelay");typeof tr=="number"&&(Te.jitterBufferDelay=tr);var Dt=Ee("jitterBufferEmittedCount");typeof Dt=="number"&&(Te.jitterBufferEmittedCount=Dt),$.push(Te)}),$}function G(B,z){B===void 0&&(B=new Map);var D=z.isRemote,j=z.simulateExceptionWhileStandardizingStats,Q=j===void 0?!1:j;if(Q)throw new Error("Error while gathering stats");var Z=null,K=null;B.forEach(function(V){var J=V.isRemote,we=V.remoteId,Re=V.type;if(!J)switch(Re){case"inbound-rtp":Z=V,K=_(B,we);break;case"outbound-rtp":K=V,Z=_(B,we);break}});var A=D?Z:K,x=D?K:Z;function L(V){return A&&typeof A[V]<"u"?A[V]:x&&typeof x[V]<"u"?x[V]:null}var I={},W=L("timestamp");I.timestamp=Math.round(W);var ie=L("ssrc");typeof ie=="number"&&(I.ssrc=String(ie));var $=L("bytesSent");typeof $=="number"&&(I.bytesSent=$);var ae=L("packetsLost");typeof ae=="number"&&(I.packetsLost=ae);var pe=L("packetsSent");typeof pe=="number"&&(I.packetsSent=pe);var Te=L("roundTripTime");typeof Te=="number"&&(I.roundTripTime=Math.round(Te*1e3));var xe=L("jitter");typeof xe=="number"&&(I.jitter=Math.round(xe*1e3));var Ee=L("framerateMean");typeof Ee=="number"&&(I.frameRateSent=Math.round(Ee));var Ce=L("bytesReceived");typeof Ce=="number"&&(I.bytesReceived=Ce);var Le=L("packetsReceived");typeof Le=="number"&&(I.packetsReceived=Le);var Pe=L("framerateMean");typeof Pe=="number"&&(I.frameRateReceived=Math.round(Pe));var Oe=L("totalPacketSendDelay");typeof Oe=="number"&&(I.totalPacketSendDelay=Oe);var _e=L("totalEncodeTime");typeof _e=="number"&&(I.totalEncodeTime=_e);var je=L("framesEncoded");typeof je=="number"&&(I.framesEncoded=je);var Ae=L("estimatedPlayoutTimestamp");typeof Ae=="number"&&(I.estimatedPlayoutTimestamp=Ae);var Qe=L("totalDecodeTime");typeof Qe=="number"&&(I.totalDecodeTime=Qe);var ee=L("framesDecoded");typeof ee=="number"&&(I.framesDecoded=ee);var oe=L("jitterBufferDelay");typeof oe=="number"&&(I.jitterBufferDelay=oe);var Y=L("jitterBufferEmittedCount");return typeof Y=="number"&&(I.jitterBufferEmittedCount=Y),I}return vi=b,vi}var Uf,my;function BE(){if(my)return Uf;my=1;function d(v){return v===void 0&&(v={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(v):Promise.reject(new Error("getUserMedia is not supported"))}return Uf=d,Uf}var $c={exports:{}},yy;function KS(){return yy||(yy=1,typeof MediaStream=="function"?$c.exports=MediaStream:$c.exports=function(){throw new Error("MediaStream is not supported")}),$c.exports}var el={exports:{}},_y;function IE(){return _y||(_y=1,typeof MediaStreamTrack=="function"?el.exports=MediaStreamTrack:el.exports=function(){throw new Error("MediaStreamTrack is not supported")}),el.exports}var tl={exports:{}},gy;function VE(){return gy||(gy=1,typeof RTCIceCandidate=="function"?tl.exports=RTCIceCandidate:tl.exports=function(){throw new Error("RTCIceCandidate is not supported")}),tl.exports}var hi={exports:{}},Bf,Sy;function XS(){if(Sy)return Bf;Sy=1;var d=function(){function v(h){this.descriptionInitDict=h;var u=h&&h.type==="rollback"?null:new RTCSessionDescription(h);Object.defineProperties(this,{_description:{get:function(){return u}}})}return Object.defineProperty(v.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),v}();return Bf=d,Bf}var rl={exports:{}},by;function er(){if(by)return rl.exports;by=1;var d=typeof Reflect=="object"?Reflect:null,v=d&&typeof d.apply=="function"?d.apply:function(k,S,T){return Function.prototype.apply.call(k,S,T)},h;d&&typeof d.ownKeys=="function"?h=d.ownKeys:Object.getOwnPropertySymbols?h=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:h=function(k){return Object.getOwnPropertyNames(k)};function u(R){console&&console.warn&&console.warn(R)}var c=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}rl.exports=i,rl.exports.once=C,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(R){if(typeof R!="number"||R<0||c(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");a=R}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||c(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(R){return R._maxListeners===void 0?i.defaultMaxListeners:R._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var S=[],T=1;T<arguments.length;T++)S.push(arguments[T]);var O=k==="error",q=this._events;if(q!==void 0)O=O&&q.error===void 0;else if(!O)return!1;if(O){var U;if(S.length>0&&(U=S[0]),U instanceof Error)throw U;var F=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw F.context=U,F}var G=q[k];if(G===void 0)return!1;if(typeof G=="function")v(G,this,S);else for(var B=G.length,z=_(G,B),T=0;T<B;++T)v(z[T],this,S);return!0};function f(R,k,S,T){var O,q,U;if(o(S),q=R._events,q===void 0?(q=R._events=Object.create(null),R._eventsCount=0):(q.newListener!==void 0&&(R.emit("newListener",k,S.listener?S.listener:S),q=R._events),U=q[k]),U===void 0)U=q[k]=S,++R._eventsCount;else if(typeof U=="function"?U=q[k]=T?[S,U]:[U,S]:T?U.unshift(S):U.push(S),O=l(R),O>0&&U.length>O&&!U.warned){U.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=R,F.type=k,F.count=U.length,u(F)}return R}i.prototype.addListener=function(k,S){return f(this,k,S,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,S){return f(this,k,S,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(R,k,S){var T={fired:!1,wrapFn:void 0,target:R,type:k,listener:S},O=p.bind(T);return O.listener=S,T.wrapFn=O,O}i.prototype.once=function(k,S){return o(S),this.on(k,y(this,k,S)),this},i.prototype.prependOnceListener=function(k,S){return o(S),this.prependListener(k,y(this,k,S)),this},i.prototype.removeListener=function(k,S){var T,O,q,U,F;if(o(S),O=this._events,O===void 0)return this;if(T=O[k],T===void 0)return this;if(T===S||T.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete O[k],O.removeListener&&this.emit("removeListener",k,T.listener||S));else if(typeof T!="function"){for(q=-1,U=T.length-1;U>=0;U--)if(T[U]===S||T[U].listener===S){F=T[U].listener,q=U;break}if(q<0)return this;q===0?T.shift():E(T,q),T.length===1&&(O[k]=T[0]),O.removeListener!==void 0&&this.emit("removeListener",k,F||S)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var S,T,O;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[k]),this;if(arguments.length===0){var q=Object.keys(T),U;for(O=0;O<q.length;++O)U=q[O],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=T[k],typeof S=="function")this.removeListener(k,S);else if(S!==void 0)for(O=S.length-1;O>=0;O--)this.removeListener(k,S[O]);return this};function g(R,k,S){var T=R._events;if(T===void 0)return[];var O=T[k];return O===void 0?[]:typeof O=="function"?S?[O.listener||O]:[O]:S?b(O):_(O,O.length)}i.prototype.listeners=function(k){return g(this,k,!0)},i.prototype.rawListeners=function(k){return g(this,k,!1)},i.listenerCount=function(R,k){return typeof R.listenerCount=="function"?R.listenerCount(k):w.call(R,k)},i.prototype.listenerCount=w;function w(R){var k=this._events;if(k!==void 0){var S=k[R];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function _(R,k){for(var S=new Array(k),T=0;T<k;++T)S[T]=R[T];return S}function E(R,k){for(;k+1<R.length;k++)R[k]=R[k+1];R.pop()}function b(R){for(var k=new Array(R.length),S=0;S<k.length;++S)k[S]=R[S].listener||R[S];return k}function C(R,k){return new Promise(function(S,T){function O(U){R.removeListener(k,q),T(U)}function q(){typeof R.removeListener=="function"&&R.removeListener("error",O),S([].slice.call(arguments))}P(R,k,q,{once:!0}),k!=="error"&&N(R,O,{once:!0})})}function N(R,k,S){typeof R.on=="function"&&P(R,"error",k,S)}function P(R,k,S,T){if(typeof R.on=="function")T.once?R.once(k,S):R.on(k,S);else if(typeof R.addEventListener=="function")R.addEventListener(k,function O(q){T.once&&R.removeEventListener(k,O),S(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}return rl.exports}var pi,Ty;function Qd(){if(Ty)return pi;Ty=1;var d=pi&&pi.__read||function(c,i){var a=typeof Symbol=="function"&&c[Symbol.iterator];if(!a)return c;var o=a.call(c),l,f=[],p;try{for(;(i===void 0||i-- >0)&&!(l=o.next()).done;)f.push(l.value)}catch(y){p={error:y}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(p)throw p.error}}return f},v=pi&&pi.__spreadArray||function(c,i){for(var a=0,o=i.length,l=c.length;a<o;a++,l++)c[l]=i[a];return c},h=er().EventEmitter,u=function(){function c(){Object.defineProperties(this,{_eventEmitter:{value:new h}})}return c.prototype.dispatchEvent=function(i){return this._eventEmitter.emit(i.type,i)},c.prototype.addEventListener=function(){var i;return(i=this._eventEmitter).addListener.apply(i,v([],d(arguments)))},c.prototype.removeEventListener=function(){var i;return(i=this._eventEmitter).removeListener.apply(i,v([],d(arguments)))},c}();return pi=u,pi}var If,wy;function ZS(){if(wy)return If;wy=1;var d=Xt().defer,v={high:new Set(["low"]),low:new Set(["high"])},h=function(){function c(i){i===void 0&&(i="low");var a=i;Object.defineProperties(this,{_state:{set:function(o){var l=this;if(a!==o){a=o;var f=this._whenDeferreds.get(a);f.forEach(function(p){return p.resolve(l)}),f.clear()}},get:function(){return a}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(c.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),c.prototype.lower=function(){return this.transition("low")},c.prototype.raise=function(){return this.transition("high")},c.prototype.transition=function(i){if(!v[this.state].has(i))throw u(this.state,i);return this._state=i,this},c.prototype.when=function(i){if(this.state===i)return Promise.resolve(this);if(!v[this.state].has(i))return Promise.reject(u(this.state,i));var a=d();return this._whenDeferreds.get(i).add(a),a.promise},c}();function u(c,i){return new Error('Cannot transition from "'+c+'" to "'+i+'"')}return If=h,If}var Vf,ky;function zE(){if(ky)return Vf;ky=1;var d=function(){function v(h){Object.defineProperties(this,{track:{enumerable:!0,value:h,writable:!0}})}return v}();return Vf=d,Vf}var ln,Ey;function HE(){if(Ey)return ln;Ey=1;var d=ln&&ln.__extends||function(){var G=function(B,z){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,j){D.__proto__=j}||function(D,j){for(var Q in j)Object.prototype.hasOwnProperty.call(j,Q)&&(D[Q]=j[Q])},G(B,z)};return function(B,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");G(B,z);function D(){this.constructor=B}B.prototype=z===null?Object.create(z):(D.prototype=z.prototype,new D)}}(),v=ln&&ln.__read||function(G,B){var z=typeof Symbol=="function"&&G[Symbol.iterator];if(!z)return G;var D=z.call(G),j,Q=[],Z;try{for(;(B===void 0||B-- >0)&&!(j=D.next()).done;)Q.push(j.value)}catch(K){Z={error:K}}finally{try{j&&!j.done&&(z=D.return)&&z.call(D)}finally{if(Z)throw Z.error}}return Q},h=ln&&ln.__spreadArray||function(G,B){for(var z=0,D=B.length,j=G.length;z<D;z++,j++)G[j]=B[z];return G},u=XS(),c=Qd(),i=ZS(),a=KS(),o=zE(),l=Bu(),f=l.getSdpFormat,p=l.updatePlanBTrackIdsToSSRCs,y=l.updateUnifiedPlanTrackIdsToSSRCs,g=Xt(),w=g.delegateMethods,_=g.interceptEvent,E=g.isIOSChrome,b=g.legacyPromise,C=g.proxyProperties,N=f()==="unified",P=function(G){d(B,G);function B(z,D){z===void 0&&(z={});var j=G.call(this)||this,Q=Object.assign(z.iceTransportPolicy?{iceTransports:z.iceTransportPolicy}:{},z);_(j,"datachannel"),_(j,"signalingstatechange");var Z=f(Q.sdpSemantics),K=new RTCPeerConnection(Q,D);return Object.defineProperties(j,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new a},_peerConnection:{value:K},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:Z},_senders:{value:new Map},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0}}),K.addEventListener("datachannel",function(A){U(A.channel),j.dispatchEvent(A)}),K.addEventListener("signalingstatechange",function(){for(var A=[],x=0;x<arguments.length;x++)A[x]=arguments[x];K.signalingState==="stable"&&(j._appliedTracksToSSRCs=new Map(j._tracksToSSRCs)),!j._pendingLocalOffer&&!j._pendingRemoteOffer&&j.dispatchEvent.apply(j,h([],v(A)))}),K.ontrack=function(){},typeof K.addTrack!="function"&&K.addStream(j._localStream),C(RTCPeerConnection.prototype,j,K),j}return Object.defineProperty(B.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),B.prototype.addTrack=function(z){for(var D,j=[],Q=1;Q<arguments.length;Q++)j[Q-1]=arguments[Q];if(typeof this._peerConnection.addTrack=="function")return(D=this._peerConnection).addTrack.apply(D,h([z],v(j)));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack ["+z.id+`, 
        `+z.kind+"]: RTCPeerConnection is closed");var Z=this._senders.get(z);if(Z&&Z.track)throw new Error("Cannot add MediaStreamTrack ['"+z.id+`, 
        `+z.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(z),this._peerConnection.addStream(this._localStream),Z=new o(z),this._senders.set(z,Z),Z},B.prototype.removeTrack=function(z){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(z)}catch{}else{var D=z.track;if(!D)return;z=this._senders.get(D),z&&z.track&&(z.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(D),this._peerConnection.addStream(this._localStream))}},B.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},B.prototype.addIceCandidate=function(z){for(var D=this,j=[],Q=1;Q<arguments.length;Q++)j[Q-1]=arguments[Q];var Z;return this.signalingState==="have-remote-offer"?Z=this._signalingStateLatch.when("low").then(function(){return D._peerConnection.addIceCandidate(z)}):Z=this._peerConnection.addIceCandidate(z),j.length>0?b.apply(void 0,h([Z],v(j))):Z},B.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},B.prototype.createAnswer=function(){for(var z=this,D=[],j=0;j<arguments.length;j++)D[j]=arguments[j];var Q;return this._pendingRemoteOffer?Q=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return z._signalingStateLatch.lower(),z._peerConnection.createAnswer()}).then(function(Z){return z._pendingRemoteOffer=null,z._rolledBackTracksToSSRCs.clear(),new u({type:"answer",sdp:F(z._sdpFormat,z._tracksToSSRCs,Z.sdp)})},function(Z){throw z._pendingRemoteOffer=null,Z}):Q=this._peerConnection.createAnswer().then(function(Z){return z._rolledBackTracksToSSRCs.clear(),new u({type:"answer",sdp:F(z._sdpFormat,z._tracksToSSRCs,Z.sdp)})}),D.length>1?b.apply(void 0,h([Q],v(D))):Q},B.prototype.createOffer=function(){for(var z=this,D=[],j=0;j<arguments.length;j++)D[j]=arguments[j];var Q=v(D,3),Z=Q[0],K=Q[1],A=Q[2],x=A||Z||{};if(E()){if(x.offerToReceiveVideo&&!this._audioTransceiver&&!(N&&S(this,"audio"))){delete x.offerToReceiveAudio;try{this._audioTransceiver=N?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(I){return Promise.reject(I)}}if(x.offerToReceiveVideo&&!this._videoTransceiver&&!(N&&S(this,"video"))){delete x.offerToReceiveVideo;try{this._videoTransceiver=N?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(I){return Promise.reject(I)}}}var L=this._peerConnection.createOffer(x).then(function(I){return z._rolledBackTracksToSSRCs.clear(),new u({type:I.type,sdp:F(z._sdpFormat,z._tracksToSSRCs,I.sdp)})});return D.length>1?b(L,Z,K):L},B.prototype.createDataChannel=function(z,D){D=q(D);var j=this._peerConnection.createDataChannel(z,D);return U(j),j},B.prototype.setLocalDescription=function(){for(var z=[],D=0;D<arguments.length;D++)z[D]=arguments[D];var j=v(z,3),Q=j[0],Z=j[1],K=j[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var A=R(this,!0,Q);return z.length>1?b(A,Z,K):A},B.prototype.setRemoteDescription=function(){for(var z=[],D=0;D<arguments.length;D++)z[D]=arguments[D];var j=v(z,3),Q=j[0],Z=j[1],K=j[2];this._rolledBackTracksToSSRCs.clear();var A=R(this,!1,Q);return z.length>1?b(A,Z,K):A},B}(c);w(RTCPeerConnection.prototype,P.prototype,"_peerConnection");function R(G,B,z){function D(I){B?G._pendingLocalOffer=I:G._pendingRemoteOffer=I}function j(){B?G._pendingLocalOffer=null:G._pendingRemoteOffer=null}var Q=B?G._pendingLocalOffer:G._pendingRemoteOffer,Z=B?G._pendingRemoteOffer:G._pendingLocalOffer,K=B?"have-local-offer":"have-remote-offer",A=B?"setLocalDescription":"setRemoteDescription",x;if(!B&&Z&&z.type==="answer")x=k(G,z);else if(z.type==="offer"){if(G.signalingState!==K&&G.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(B?"local":"remote")+" offer in state "+G.signalingState));!Q&&G._signalingStateLatch.state==="low"&&G._signalingStateLatch.raise();var L=G.signalingState;D(T(z)),x=Promise.resolve(),G.signalingState!==L&&x.then(function(){return G.dispatchEvent(new Event("signalingstatechange"))})}else z.type==="rollback"&&(G.signalingState!==K?x=Promise.reject(new Error("Cannot rollback "+(B?"local":"remote")+" description in "+G.signalingState)):(j(),G._rolledBackTracksToSSRCs=new Map(G._tracksToSSRCs),G._tracksToSSRCs=new Map(G._appliedTracksToSSRCs),x=Promise.resolve(),x.then(function(){return G.dispatchEvent(new Event("signalingstatechange"))})));return x||G._peerConnection[A](T(z))}function k(G,B){var z=G._pendingLocalOffer;return G._peerConnection.setLocalDescription(z).then(function(){return G._pendingLocalOffer=null,G.setRemoteDescription(B)}).then(function(){G._signalingStateLatch.lower()})}function S(G,B){return!!G.getTransceivers().find(function(z){var D=z.receiver,j=D===void 0?{}:D,Q=j.track,Z=Q===void 0?{}:Q;return Z.kind===B})}function T(G){return G instanceof u&&G._description?G._description:new RTCSessionDescription(G)}function O(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function q(G){return G=Object.assign({},G),O()&&"maxPacketLifeTime"in G&&(G.maxRetransmitTime=G.maxPacketLifeTime),G}function U(G){return Object.defineProperty(G,"maxRetransmits",{value:G.maxRetransmits===65535?null:G.maxRetransmits}),O()&&Object.defineProperty(G,"maxPacketLifeTime",{value:G.maxRetransmitTime===65535?null:G.maxRetransmitTime}),G}function F(G,B,z){return G==="unified"?y(B,z):p(B,z)}return ln=P,ln}var zf,Oy;function WS(){return Oy||(Oy=1,zf=RTCSessionDescription),zf}var sn,Ry;function FE(){if(Ry)return sn;Ry=1;var d=sn&&sn.__extends||function(){var E=function(b,C){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,P){N.__proto__=P}||function(N,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(N[R]=P[R])},E(b,C)};return function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");E(b,C);function N(){this.constructor=b}b.prototype=C===null?Object.create(C):(N.prototype=C.prototype,new N)}}(),v=sn&&sn.__read||function(E,b){var C=typeof Symbol=="function"&&E[Symbol.iterator];if(!C)return E;var N=C.call(E),P,R=[],k;try{for(;(b===void 0||b-- >0)&&!(P=N.next()).done;)R.push(P.value)}catch(S){k={error:S}}finally{try{P&&!P.done&&(C=N.return)&&C.call(N)}finally{if(k)throw k.error}}return R},h=sn&&sn.__spreadArray||function(E,b){for(var C=0,N=b.length,P=E.length;C<N;C++,P++)E[P]=b[C];return E},u=Qd(),c=WS(),i=Bu().updateUnifiedPlanTrackIdsToSSRCs,a=Xt(),o=a.delegateMethods,l=a.interceptEvent,f=a.legacyPromise,p=a.proxyProperties,y=function(E){d(b,E);function b(C){var N=E.call(this)||this;l(N,"signalingstatechange");var P=new RTCPeerConnection(C);Object.defineProperties(N,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:P},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var R;return P.addEventListener("signalingstatechange",function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];!N._rollingBack&&N.signalingState!==R&&(R=N.signalingState,N._isClosed?setTimeout(function(){return N.dispatchEvent.apply(N,h([],v(k)))}):N.dispatchEvent.apply(N,h([],v(k))))}),p(RTCPeerConnection.prototype,N,P),N}return Object.defineProperty(b.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"localDescription",{get:function(){return _(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),b.prototype.createAnswer=function(){for(var C=this,N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var R;return R=this._peerConnection.createAnswer().then(function(k){return w(C,k),_(k,C._initiallyNegotiatedDtlsRole)}),typeof N[0]=="function"?f.apply(void 0,h([R],v(N))):R},b.prototype.createOffer=function(){for(var C=this,N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var R=v(N,3),k=R[0],S=R[1],T=R[2],O=T||k||{},q;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var U=this.signalingState==="have-local-offer";q=g(this,U,function(){return C.createOffer(O)})}else q=this._peerConnection.createOffer(O);return q=q.then(function(F){return new c({type:F.type,sdp:i(C._tracksToSSRCs,F.sdp)})}),N.length>1?f(q,k,S):q},b.prototype.setLocalDescription=function(){for(var C,N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var R=v(N),k=R[0],S=R.slice(1),T;return k&&k.type==="answer"&&this.signalingState==="have-local-offer"&&(T=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),T?N.length>1?f.apply(void 0,h([T],v(S))):T:(C=this._peerConnection).setLocalDescription.apply(C,h([],v(N)))},b.prototype.setRemoteDescription=function(){for(var C=this,N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];var R=v(N),k=R[0],S=R.slice(1),T;return k&&this.signalingState==="have-remote-offer"&&(k.type==="answer"?T=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):k.type==="offer"&&(T=g(this,!1,function(){return C._peerConnection.setRemoteDescription(k)}))),T||(T=this._peerConnection.setRemoteDescription(k)),T=T.then(function(){return w(C,k,!0)}),N.length>1?f.apply(void 0,h([T],v(S))):T},b.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},b}(u);o(RTCPeerConnection.prototype,y.prototype,"_peerConnection");function g(E,b,C){var N=b?"setLocalDescription":"setRemoteDescription";return E._rollingBack=!0,E._peerConnection[N](new c({type:"rollback"})).then(C).then(function(P){return E._rollingBack=!1,P},function(P){throw E._rollingBack=!1,P})}function w(E,b,C){if(!(E._initiallyNegotiatedDtlsRole||b.type==="offer")){var N=b.sdp.match(/a=setup:([a-z]+)/);if(N){var P=N[1];E._initiallyNegotiatedDtlsRole=C?{active:"passive",passive:"active"}[P]:P}}}function _(E,b){return E&&E.type==="answer"&&b?new c({type:E.type,sdp:E.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+b)}):E}return sn=y,sn}var fn,Cy;function GE(){if(Cy)return fn;Cy=1;var d=fn&&fn.__extends||function(){var R=function(k,S){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,O){T.__proto__=O}||function(T,O){for(var q in O)Object.prototype.hasOwnProperty.call(O,q)&&(T[q]=O[q])},R(k,S)};return function(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");R(k,S);function T(){this.constructor=k}k.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)}}(),v=fn&&fn.__read||function(R,k){var S=typeof Symbol=="function"&&R[Symbol.iterator];if(!S)return R;var T=S.call(R),O,q=[],U;try{for(;(k===void 0||k-- >0)&&!(O=T.next()).done;)q.push(O.value)}catch(F){U={error:F}}finally{try{O&&!O.done&&(S=T.return)&&S.call(T)}finally{if(U)throw U.error}}return q},h=fn&&fn.__spreadArray||function(R,k){for(var S=0,T=k.length,O=R.length;S<T;S++,O++)R[O]=k[S];return R},u=Qd(),c=ZS(),i=Bu(),a=i.getSdpFormat,o=i.updatePlanBTrackIdsToSSRCs,l=i.updateUnifiedPlanTrackIdsToSSRCs,f=Xt(),p=f.delegateMethods,y=f.interceptEvent,g=f.proxyProperties,w=a()==="unified",_=w?l:o,E=function(R){d(k,R);function k(S){var T=R.call(this)||this;y(T,"datachannel"),y(T,"iceconnectionstatechange"),y(T,"signalingstatechange"),y(T,"track");var O=new RTCPeerConnection(S);return Object.defineProperties(T,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:O},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new c},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),O.addEventListener("datachannel",function(q){P(q.channel),T.dispatchEvent(q)}),O.addEventListener("iceconnectionstatechange",function(){for(var q=[],U=0;U<arguments.length;U++)q[U]=arguments[U];T._isClosed||T.dispatchEvent.apply(T,h([],v(q)))}),O.addEventListener("signalingstatechange",function(){for(var q=[],U=0;U<arguments.length;U++)q[U]=arguments[U];T._isClosed||(O.signalingState==="stable"&&(T._appliedTracksToSSRCs=new Map(T._tracksToSSRCs)),!T._pendingLocalOffer&&!T._pendingRemoteOffer&&T.dispatchEvent.apply(T,h([],v(q))))}),O.addEventListener("track",function(q){T._pendingRemoteOffer=null,T.dispatchEvent(q)}),g(RTCPeerConnection.prototype,T,O),T}return Object.defineProperty(k.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),k.prototype.addIceCandidate=function(S){var T=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return T._peerConnection.addIceCandidate(S)}):this._peerConnection.addIceCandidate(S)},k.prototype.createOffer=function(S){var T=this;if(S=Object.assign({},S),S.offerToReceiveVideo&&!this._audioTransceiver&&!(w&&N(this,"audio"))){delete S.offerToReceiveAudio;try{this._audioTransceiver=w?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(O){return Promise.reject(O)}}if(S.offerToReceiveVideo&&!this._videoTransceiver&&!(w&&N(this,"video"))){delete S.offerToReceiveVideo;try{this._videoTransceiver=w?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(O){return Promise.reject(O)}}return this._peerConnection.createOffer(S).then(function(O){return T._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:O.type,sdp:_(T._tracksToSSRCs,O.sdp)})})},k.prototype.createAnswer=function(S){var T=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return T._signalingStateLatch.lower(),T._peerConnection.createAnswer()}).then(function(O){return T._pendingRemoteOffer=null,T._rolledBackTracksToSSRCs.clear(),w?new RTCSessionDescription({type:O.type,sdp:_(T._tracksToSSRCs,O.sdp)}):O},function(O){throw T._pendingRemoteOffer=null,O}):this._peerConnection.createAnswer(S).then(function(O){return T._rolledBackTracksToSSRCs.clear(),w?new RTCSessionDescription({type:O.type,sdp:_(T._tracksToSSRCs,O.sdp)}):O})},k.prototype.createDataChannel=function(S,T){var O=this._peerConnection.createDataChannel(S,T);return P(O),O},k.prototype.removeTrack=function(S){S.replaceTrack(null),this._peerConnection.removeTrack(S)},k.prototype.setLocalDescription=function(S){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),b(this,!0,S)},k.prototype.setRemoteDescription=function(S){return this._rolledBackTracksToSSRCs.clear(),b(this,!1,S)},k.prototype.close=function(){var S=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){S.dispatchEvent(new Event("iceconnectionstatechange")),S.dispatchEvent(new Event("signalingstatechange"))}))},k}(u);p(RTCPeerConnection.prototype,E.prototype,"_peerConnection");function b(R,k,S){function T(z){k?R._pendingLocalOffer=z:R._pendingRemoteOffer=z}function O(){k?R._pendingLocalOffer=null:R._pendingRemoteOffer=null}var q=k?R._pendingLocalOffer:R._pendingRemoteOffer,U=k?R._pendingRemoteOffer:R._pendingLocalOffer,F=k?"have-local-offer":"have-remote-offer",G=k?"setLocalDescription":"setRemoteDescription";if(!k&&U&&S.type==="answer")return C(R,S);if(S.type==="offer"){if(R.signalingState!==F&&R.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(k?"local":"remote")+`
        offer in state `+R.signalingState));!q&&R._signalingStateLatch.state==="low"&&R._signalingStateLatch.raise();var B=R.signalingState;return T(S),R.signalingState!==B?Promise.resolve().then(function(){return R.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(S.type==="rollback")return R.signalingState!==F?Promise.reject(new Error(`Cannot rollback 
        `+(k?"local":"remote")+" description in "+R.signalingState)):(O(),R._rolledBackTracksToSSRCs=new Map(R._tracksToSSRCs),R._tracksToSSRCs=new Map(R._appliedTracksToSSRCs),Promise.resolve().then(function(){return R.dispatchEvent(new Event("signalingstatechange"))}));return R._peerConnection[G](S)}function C(R,k){var S=R._pendingLocalOffer;return R._peerConnection.setLocalDescription(S).then(function(){return R._pendingLocalOffer=null,R.setRemoteDescription(k)}).then(function(){return R._signalingStateLatch.lower()})}function N(R,k){return!!R.getTransceivers().find(function(S){var T=S.receiver,O=T===void 0?{}:T,q=O.track,U=q===void 0?{}:q;return U.kind===k})}function P(R){return Object.defineProperties(R,{maxPacketLifeTime:{value:R.maxPacketLifeTime===65535?null:R.maxPacketLifeTime},maxRetransmits:{value:R.maxRetransmits===65535?null:R.maxRetransmits}})}return fn=E,fn}var Ay;function QE(){if(Ay)return hi.exports;if(Ay=1,typeof RTCPeerConnection=="function"){var d=Xt().guessBrowser;switch(d()){case"chrome":hi.exports=HE();break;case"firefox":hi.exports=FE();break;case"safari":hi.exports=GE();break;default:hi.exports=RTCPeerConnection;break}}else hi.exports=function(){throw new Error("RTCPeerConnection is not supported")};return hi.exports}var va={exports:{}},Ly;function YE(){if(Ly)return va.exports;if(Ly=1,typeof RTCSessionDescription=="function"){var d=Xt().guessBrowser;switch(d()){case"chrome":va.exports=XS();break;case"firefox":va.exports=WS();break;default:va.exports=RTCSessionDescription;break}}else va.exports=function(){throw new Error("RTCSessionDescription is not supported")};return va.exports}var Hf,Py;function Ci(){if(Py)return Hf;Py=1;var d={};return Object.defineProperties(d,{getStats:{enumerable:!0,value:UE()},getUserMedia:{enumerable:!0,value:BE()},MediaStream:{enumerable:!0,value:KS()},MediaStreamTrack:{enumerable:!0,value:IE()},RTCIceCandidate:{enumerable:!0,value:VE()},RTCPeerConnection:{enumerable:!0,value:QE()},RTCSessionDescription:{enumerable:!0,value:YE()}}),Hf=d,Hf}var Ff,My;function Yd(){return My||(My=1,Ff=function(v,h){if(v&&h)if(v.super_=h,typeof Object.create=="function")v.prototype=Object.create(h.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}});else{var u=function(){function c(){}return c}();u.prototype=h.prototype,v.prototype=new u,v.prototype.constructor=v}}),Ff}var mo,xy;function Ai(){if(xy)return mo;xy=1;var d=mo&&mo.__read||function(y,g){var w=typeof Symbol=="function"&&y[Symbol.iterator];if(!w)return y;var _=w.call(y),E,b=[],C;try{for(;(g===void 0||g-- >0)&&!(E=_.next()).done;)b.push(E.value)}catch(N){C={error:N}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(C)throw C.error}}return b};function v(){return/Android/.test(navigator.userAgent)}function h(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function u(){return h()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function c(){return h()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function i(){return u()||c()}function a(){return/Mobi/.test(navigator.userAgent)}function o(y){return y==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function l(y){if(y!=="chrome")return null;if("brave"in navigator)return"brave";var g=p(navigator.userAgent),w=g.reduce(function(C,N){return C.replace(N,"")},navigator.userAgent),_=w.match(/[^\s]+/g)||[],E=d(_.map(function(C){return C.split("/")[0].toLowerCase()})),b=E.slice(2);return b.find(function(C){return!["chrome","mobile","safari"].includes(C)})||null}function f(y){return y!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(g){return navigator.userAgent.toLowerCase().includes(g)})||null}function p(y){for(var g=[],w=[],_=0;_<y.length;_++)if(y[_]==="(")g.push(_);else if(y[_]===")"&&g.length>0){var E=g.pop();g.length===0&&w.push(y.substring(E,_+1))}return w}return mo={isAndroid:v,isIOS:i,isIpad:u,isIphone:c,isMobile:a,isNonChromiumEdge:o,mobileWebKitBrowser:f,rebrandedChromeBrowser:l},mo}var Gf,Dy;function JS(){if(Dy)return Gf;Dy=1;function d(h){return h=typeof h=="number"?h:0,new Promise(function(u){return setTimeout(u,h)})}function v(h,u,c){c=typeof c=="number"?c:250;var i=h.createMediaStreamSource(u),a=h.createAnalyser();a.fftSize=2048,i.connect(a);var o=new Uint8Array(a.fftSize),l=!1;setTimeout(function(){l=!0},c);function f(){return l?Promise.resolve(!0):(a.getByteTimeDomainData(o),o.some(function(p){return p!==128&&p!==0})?Promise.resolve(!1):d().then(f))}return f().then(function(p){return i.disconnect(),p},function(p){throw i.disconnect(),p})}return Gf=v,Gf}var Qf,jy;function yl(){if(jy)return Qf;jy=1;var d=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,v=function(){function h(u){u=Object.assign({AudioContext:d},u),Object.defineProperties(this,{_AudioContext:{value:u.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:h}})}return h.prototype.getOrCreate=function(u){if(!this._holders.has(u)&&(this._holders.add(u),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},h.prototype.release=function(u){this._holders.has(u)&&(this._holders.delete(u),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},h}();return Qf=new v,Qf}var Yf,Ny;function $S(){if(Ny)return Yf;Ny=1;var d=JS(),v=3,h=250;function u(c){var i=yl(),a={},o=i.getOrCreate(a),l=v;function f(){return l--,d(o,c.srcObject,h).then(function(p){return p?l>0?f():!0:!1}).catch(function(){return!0})}return f().finally(function(){i.release(a)})}return Yf=u,Yf}var Kf,qy;function eb(){if(qy)return Kf;qy=1;var d=ut().defer,v=function(){function h(){Object.defineProperties(this,{_audio:{value:d(),writable:!0},_video:{value:d(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return h.prototype.resolveDeferred=function(u){u==="audio"?this._audio.resolve():this._video.resolve()},h.prototype.startDeferred=function(u){u==="audio"?this._audio=d():this._video=d()},h.prototype.whenResolved=function(u){return u==="audio"?this._audio.promise:this._video.promise},h}();return Kf=new v,Kf}var Xf,Uy;function Iu(){if(Uy)return Xf;Uy=1;var d=er().EventEmitter,v=ut().hidePrivateAndCertainPublicPropertiesInClass;return Xf=v(d,["domain"]),Xf}var yo,By;function Kd(){if(By)return yo;By=1;var d=yo&&yo.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(g[_]=w[_])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),v=Iu(),h=ut(),u=h.buildLogLevels,c=h.valueToJSON,i=ht().DEFAULT_LOG_LEVEL,a=qr(),o=0,l=function(f){d(p,f);function p(y,g,w){var _=this;w=Object.assign({name:y,log:null,logLevel:i},w),_=f.call(this)||this;var E=String(w.name),b=u(w.logLevel),C=w.log?w.log.createLog("media",_):new a("media",_,b,w.loggerName);return Object.defineProperties(_,{_instanceId:{value:++o},_log:{value:C},kind:{enumerable:!0,value:g},name:{enumerable:!0,value:E}}),_}return p.prototype.toJSON=function(){return c(this)},p}(v);return yo=l,yo}var _o,Iy;function tb(){if(Iy)return _o;Iy=1;var d=_o&&_o.__extends||function(){var y=function(g,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(_[b]=E[b])},y(g,w)};return function(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");y(g,w);function _(){this.constructor=g}g.prototype=w===null?Object.create(w):(_.prototype=w.prototype,new _)}}(),v=Ai().isIOS,h=Ci().MediaStream,u=ut(),c=u.waitForEvent,i=u.waitForSometime,a=eb(),o=Kd(),l=function(y){d(g,y);function g(w,_){var E=this;_=Object.assign({playPausedElementsIfNotBackgrounded:v()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},_),E=y.call(this,w.id,w.kind,_)||this;var b=!1;if(_=Object.assign({MediaStream:h},_),typeof _.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+_.MediaStream);return Object.defineProperties(E,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return b},set:function(C){b=C}},_playPausedElementsIfNotBackgrounded:{value:_.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:_.workaroundWebKitBug212780||_.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:_.MediaStream},_mapMediaElement:{value:_.mapMediaElement},_disposeMediaElement:{value:_.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return b}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||w.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),E._initialize(),E}return g.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},g.prototype._initialize=function(){var w=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function _(){w._end(),w.mediaStreamTrack.removeEventListener("ended",_)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){w._end(),w.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},g.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},g.prototype.attach=function(w){var _=this;if(typeof w=="string"?w=this._selectElement(w):w||(w=this._createElement()),this._log.debug("Attempting to attach to element:",w),w=this._attach(w),this._shouldShimAttachedElements&&!this._elShims.has(w)){var E=this._playPausedElementsIfNotBackgrounded?function(){return f(w,_._log)}:null;this._elShims.set(w,p(w,E))}return w},g.prototype._attach=function(w,_){_===void 0&&(_=this.processedTrack||this.mediaStreamTrack);var E=w.srcObject;E instanceof this._MediaStream||(E=new this._MediaStream);var b=_.kind==="audio"?"getAudioTracks":"getVideoTracks";return E[b]().forEach(function(C){E.removeTrack(C)}),E.addTrack(_),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(w)),w.srcObject=E,w.autoplay=!0,w.playsInline=!0,this._attachments.has(w)||this._attachments.add(w),w},g.prototype._selectElement=function(w){var _=document.querySelector(w);if(!_)throw new Error("Selector matched no element: "+w);return _},g.prototype._updateElementsMediaStreamTrack=function(){var w=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(_){return w._attach(_)})},g.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},g.prototype.detach=function(w){var _;return typeof w=="string"?_=[this._selectElement(w)]:w?_=[w]:_=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",_),this._detachElements(_),w?_[0]:_},g.prototype._detachElements=function(w){return w.map(this._detachElement.bind(this))},g.prototype._detachElement=function(w){if(!this._attachments.has(w))return w;var _=w.srcObject;if(_ instanceof this._MediaStream&&_.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(w)),this._attachments.delete(w),this._shouldShimAttachedElements&&this._elShims.has(w)){var E=this._elShims.get(w);E.unShim(),this._elShims.delete(w)}return w},g.prototype._getAllAttachedElements=function(){var w=[];return this._attachments.forEach(function(_){w.push(_)}),w},g}(o);function f(y,g){var w=y.tagName.toLowerCase();g.warn("Unintentionally paused:",y),Promise.race([c(document,"visibilitychange"),i(1e3)]).then(function(){document.visibilityState==="visible"&&a.whenResolved("audio").then(function(){return g.info("Playing unintentionally paused <"+w+"> element"),g.debug("Element:",y),y.play()}).then(function(){g.info("Successfully played unintentionally paused <"+w+"> element"),g.debug("Element:",y)}).catch(function(_){g.warn("Error while playing unintentionally paused <"+w+"> element:",{error:_,el:y})})})}function p(y,g){g===void 0&&(g=null);var w=y.pause,_=y.play,E=!1;y.pause=function(){return E=!0,w.call(y)},y.play=function(){return E=!1,_.call(y)};var b=g?function(){E||g()}:null;return b&&y.addEventListener("pause",b),{pausedIntentionally:function(){return E},unShim:function(){y.pause=w,y.play=_,b&&y.removeEventListener("pause",b)}}}return _o=l,_o}var go,Vy;function rb(){if(Vy)return go;Vy=1;var d=go&&go.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=tb(),h=function(u){d(c,u);function c(i,a){return u.call(this,i,a)||this}return c.prototype.attach=function(){return u.prototype.attach.apply(this,arguments)},c.prototype.detach=function(){return u.prototype.detach.apply(this,arguments)},c}(v);return go=h,go}var Zf,zy;function nb(){if(zy)return Zf;zy=1;var d=null,v=3,h=50,u=250,c=50;function i(o){try{var l=d.getContext("2d");l.drawImage(o,0,0,c,h);var f=l.getImageData(0,0,c,h),p=f.data.filter(function(g,w){return(w+1)%4}),y=Math.max.apply(Math,p);return y===0}catch(g){return console.log("Error checking silence: ",g),!1}}function a(o){return d=d||document.createElement("canvas"),new Promise(function(l){var f=v;setTimeout(function p(){return f--,i(o)?f>0?setTimeout(p,u):l(!0):l(!1)},u)})}return Zf=a,Zf}var Wf,Hy;function Xd(){if(Hy)return Wf;Hy=1;var d=function(){function v(h){var u=this;h===void 0&&(h=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){u._emitVisible(document.visibilityState==="visible")}}});for(var c=0;c<h;c++)this._listeners.push([])}return v.prototype.clear=function(){for(var h=this._listeners.length,u=0;u<h;u++)this._listeners[u]=[]},v.prototype._listenerCount=function(){return this._listeners.reduce(function(h,u){return h+u.length},0)},v.prototype._emitVisible=function(h){for(var u=this,c=Promise.resolve(),i=function(o){c=c.then(function(){return u._emitVisiblePhase(o,h)})},a=1;a<=this._listeners.length;a++)i(a);return c},v.prototype._emitVisiblePhase=function(h,u){var c=this._listeners[h-1];return Promise.all(c.map(function(i){var a=i(u);return a instanceof Promise?a:Promise.resolve(a)}))},v.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},v.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},v.prototype.onVisibilityChange=function(h,u){if(typeof h!="number"||h<=0||h>this._listeners.length)throw new Error("invalid phase: ",h);var c=this._listeners[h-1];return c.push(u),this._listenerCount()===1&&this._start(),this},v.prototype.offVisibilityChange=function(h,u){if(typeof h!="number"||h<=0||h>this._listeners.length)throw new Error("invalid phase: ",h);var c=this._listeners[h-1],i=c.indexOf(u);return i!==-1&&(c.splice(i,1),this._listenerCount()===0&&this._stop()),this},v}();return Wf=new d(2),Wf}var Jf,Fy;function ib(){if(Fy)return Jf;Fy=1;var d=JS();function v(h,u,c,i,a){i=typeof i=="number"?i:3;var o=0,l=yl(),f={},p=l.getOrCreate(f);function y(){return u(c).then(function(g){var w=c.audio?d(p,g,a).catch(function(_){return h.warn("Encountered an error while detecting silence",_),!0}):Promise.resolve(!1);return w.then(function(_){if(_){if(i<=0)return h.warn("Got a silent audio MediaStreamTrack. Normally we would try 	to get a new one, but we've run out of retries; returning it anyway."),g}else return h.info("Got a non-silent audio MediaStreamTrack; returning it."),g;return h.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++o+"."),g.getTracks().forEach(function(E){return E.stop()}),i--,y()})})}return y().then(function(g){return l.release(f),g},function(g){throw l.release(f),g})}return Jf=v,Jf}var dn,Gy;function ab(){if(Gy)return dn;Gy=1;var d=dn&&dn.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=dn&&dn.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var l=o.call(i),f,p=[],y;try{for(;(a===void 0||a-- >0)&&!(f=l.next()).done;)p.push(f.value)}catch(g){y={error:g}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(y)throw y.error}}return p},h=dn&&dn.__spreadArray||function(i,a){for(var o=0,l=a.length,f=i.length;o<l;o++,f++)i[f]=a[o];return i},u=er().EventEmitter,c=function(i){d(a,i);function a(){var o=i.call(this)||this;return Object.defineProperties(o,{_queuedEvents:{value:new Map}}),o}return a.prototype.dequeue=function(o){var l=this,f=!0;if(!o)return this._queuedEvents.forEach(function(y,g){f=this.dequeue(g)&&f},this),f;var p=this._queuedEvents.get(o)||[];return this._queuedEvents.delete(o),p.reduce(function(y,g){return l.emit.apply(l,h([],v([o].concat(g))))&&y},f)},a.prototype.queue=function(){var o=[].slice.call(arguments);if(this.emit.apply(this,h([],v(o))))return!0;var l=o[0];return this._queuedEvents.has(l)||this._queuedEvents.set(l,[]),this._queuedEvents.get(l).push(o.slice(1)),!1},a}(u);return dn=c,dn}var So,Qy;function ob(){if(Qy)return So;Qy=1;var d=So&&So.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ab(),h=function(u){d(c,u);function c(i,a){var o=u.call(this)||this;return Object.defineProperties(o,{id:{enumerable:!0,value:i},kind:{enumerable:!0,value:a}}),o}return c.prototype.stop=function(){this.emit("stopped")},c}(v);return So=h,So}var bo,Yy;function ub(){if(Yy)return bo;Yy=1;var d=bo&&bo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ob(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,a.kind)||this;return Object.defineProperties(o,{_track:{value:a,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),o}return c.prototype.stop=function(){this.track.stop(),u.prototype.stop.call(this)},c}(v);return bo=h,bo}var mi,Ky;function cb(){if(Ky)return mi;Ky=1;var d=mi&&mi.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=mi&&mi.__read||function(c,i){var a=typeof Symbol=="function"&&c[Symbol.iterator];if(!a)return c;var o=a.call(c),l,f=[],p;try{for(;(i===void 0||i-- >0)&&!(l=o.next()).done;)f.push(l.value)}catch(y){p={error:y}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(p)throw p.error}}return f},h=ub(),u=function(c){d(i,c);function i(a){var o=c.call(this,a.id,a)||this;return Object.defineProperties(o,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return o.queue("muted")}],["unmute",function(){return o.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),o._reemitMediaStreamTrackEvents(),o}return i.prototype._reemitMediaStreamTrackEvents=function(a){a===void 0&&(a=this._track);var o=this,l=o._eventsToReemitters,f=o._track;if(a.addEventListener?l.forEach(function(y,g){return a.addEventListener(g,y)}):l.forEach(function(y,g){a["on"+g]=y}),f!==a&&(l.forEach(function(y,g){return f.removeEventListener(g,y)}),f.muted!==a.muted)){var p=l.get(a.muted?"mute":"unmute");p()}},i.prototype.clone=function(){var a=new i(this.track.clone());return this._clones.add(a),a},i.prototype.removeClone=function(a){this._clones.delete(a)},i.prototype.setMediaStreamTrack=function(a){var o=this,l=Array.from(this._clones),f=Array.from(this._senders);return Promise.all(l.map(function(p){return p.setMediaStreamTrack(a.clone())}).concat(f.map(function(p){return o._replaceTrack(p,a)}))).finally(function(){o._reemitMediaStreamTrackEvents(a),o._track=a})},i.prototype.addSender=function(a,o){return this._senders.add(a),o&&this._senderToPublisherHintCallbacks.set(a,o),this},i.prototype.removeSender=function(a){return this._senders.delete(a),this._senderToPublisherHintCallbacks.delete(a),this},i.prototype.setPublisherHint=function(a){var o=v(Array.from(this._senderToPublisherHintCallbacks.values()),1),l=o[0];return l?l(a):Promise.resolve("COULD_NOT_APPLY_HINT")},i.prototype._replaceTrack=function(a,o){var l=this;return a.replaceTrack(o).then(function(f){return l.setPublisherHint(null).catch(function(){}),l.emit("replaced"),f})},i}(h);return mi=u,mi}var To,Xy;function lb(){if(Xy)return To;Xy=1;var d=To&&To.__extends||function(){var C=function(N,P){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,k){R.__proto__=k}||function(R,k){for(var S in k)Object.prototype.hasOwnProperty.call(k,S)&&(R[S]=k[S])},C(N,P)};return function(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");C(N,P);function R(){this.constructor=N}N.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}}(),v=Ci().getUserMedia,h=Ai().isIOS,u=ut(),c=u.capitalize,i=u.defer,a=u.waitForSometime,o=u.waitForEvent,l=ht().typeErrors.ILLEGAL_INVOKE,f=$S(),p=nb(),y=Xd(),g=eb(),w=ib(),_=cb();function E(C){return function(N){d(P,N);function P(R,k){var S=this,T=h()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";k=Object.assign({getUserMedia:v,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:T,gUMSilentTrackWorkaround:w},k);var O=new _(R),q=O.kind;return S=N.call(this,O,k)||this,Object.defineProperties(S,{_constraints:{value:typeof k[q]=="object"?k[q]:{},writable:!0},_getUserMedia:{value:k.getUserMedia},_gUMSilentTrackWorkaround:{value:k.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return S.emit("muted",S)}],["unmuted",function(){return S.emit("unmuted",S)}]])},_workaroundWebKitBug1208516:{value:k.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:k.isCreatedByCreateLocalTracks},_noiseCancellation:{value:k.noiseCancellation||null},_trackSender:{value:O},id:{enumerable:!0,value:O.id},isEnabled:{enumerable:!0,get:function(){return O.enabled}},isMuted:{enumerable:!0,get:function(){return O.muted}},isStopped:{enumerable:!0,get:function(){return O.readyState==="ended"}}}),S._workaroundWebKitBug1208516&&(S._workaroundWebKitBug1208516Cleanup=b(S)),S._reemitTrackSenderEvents(),S}return P.prototype._end=function(){var R=this;this._didCallEnd||(N.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(k,S){return R._trackSender.removeListener(S,k)}),this.emit("stopped",this))},P.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),N.prototype._initialize.call(this)},P.prototype._reacquireTrack=function(R){var k,S=this,T=S._getUserMedia,O=S._gUMSilentTrackWorkaround,q=S._log,U=S.mediaStreamTrack.kind;q.info("Re-acquiring the MediaStreamTrack"),q.debug("Constraints:",R);var F=Object.assign({audio:!1,video:!1},(k={},k[U]=R,k)),G=this._workaroundWebKitBug1208516Cleanup?O(q,T,F):T(F);return G.then(function(B){return B.getTracks()[0]})},P.prototype._reemitTrackSenderEvents=function(){var R=this;this._eventsToReemitters.forEach(function(k,S){return R._trackSender.on(S,k)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},P.prototype._restart=function(R){var k=this,S=this._log;return R=R||this._constraints,this._stop(),this._reacquireTrack(R).catch(function(T){throw S.error("Failed to re-acquire the MediaStreamTrack:",{error:T,constraints:R}),T}).then(function(T){return S.info("Re-acquired the MediaStreamTrack"),S.debug("MediaStreamTrack:",T),k._constraints=Object.assign({},R),k._setMediaStreamTrack(T)})},P.prototype._setMediaStreamTrack=function(R){var k=this;return R.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){k._unprocessedTrack=R}):this._trackSender.setMediaStreamTrack(R).catch(function(S){k._log.warn("setMediaStreamTrack failed:",{error:S,mediaStreamTrack:R})})).then(function(){k._initialize(),k._getAllAttachedElements().forEach(function(S){return k._attach(S)})})},P.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},P.prototype.enable=function(R){return R=typeof R=="boolean"?R:!0,R!==this.mediaStreamTrack.enabled&&(this._log.info((R?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=R,this.emit(R?"enabled":"disabled",this)),this},P.prototype.disable=function(){return this.enable(!1)},P.prototype.restart=function(R){var k=this,S=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(l("restart","can only be called on a"+(" Local"+c(S)+"Track that is created using createLocalTracks")+(" or createLocal"+c(S)+"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var T=this._restart(R);return this._workaroundWebKitBug1208516&&(T=T.finally(function(){k._workaroundWebKitBug1208516Cleanup=b(k)})),T},P.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},P}(C)}function b(C){var N=C._log,P=C.kind,R=C._noiseCancellation,k={audio:f,video:p}[P],S=function(){return R?R.sourceTrack:C.mediaStreamTrack},T=C._dummyEl,O=S(),q=null;function U(){return T.play().then(function(){return k(T)}).then(function(Q){return Q?N.warn("Silence detected"):N.info("Non-silence detected"),Q}).catch(function(Q){N.warn("Failed to detect silence:",Q)}).finally(function(){C.processedTrack||T.pause()})}function F(){var Q=C._workaroundWebKitBug1208516Cleanup,Z=C.isStopped,K=Z&&!!Q,A=S().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!q&&(A||K||U())})}function G(){return Promise.race([o(O,"unmute"),a(50)]).then(function(){return F()}).then(function(Q){Q&&!q&&(q=i(),C._restart().finally(function(){T=C._dummyEl,D(),O=S(),z(),q.resolve(),q=null}).catch(function(K){N.error("failed to restart track: ",K)}));var Z=q&&q.promise||Promise.resolve();return Z.finally(function(){return g.resolveDeferred(P)})}).catch(function(Q){N.error("error in maybeRestart: "+Q.message)})}function B(){var Q=C._log,Z=C.kind;Q.info("Muted"),Q.debug("LocalMediaTrack:",C),g.startDeferred(Z)}function z(){O.addEventListener?(O.addEventListener("ended",G),O.addEventListener("mute",B),O.addEventListener("unmute",G)):(O.onended=G,O.onmute=B,O.onunmute=G)}function D(){O.removeEventListener?(O.removeEventListener("ended",G),O.removeEventListener("mute",B),O.removeEventListener("unmute",G)):(O.onended=null,O.onmute=null,O.onunmute=null)}var j=function(Q){return Q?G():!1};return y.onVisibilityChange(1,j),z(),function(){y.offVisibilityChange(1,j),D()}}return To=E,To}var wo,Zy;function KE(){if(Zy)return wo;Zy=1;var d=wo&&wo.__extends||function(){var l=function(f,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(y[w]=g[w])},l(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");l(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),v=Ai().isIOS,h=$S(),u=Xt().isIOSChrome,c=rb(),i=lb(),a=i(c),o=function(l){d(f,l);function f(p,y){var g=this,w=y?.noiseCancellation||null;g=l.call(this,p,y)||this;var _=g._log,E=p.label,b=E===void 0?"":E,C=p.getSettings(),N=C.deviceId,P=N===void 0?"":N,R=C.groupId,k=R===void 0?"":R;return Object.defineProperties(g,{_currentDefaultDeviceInfo:{value:{deviceId:P,groupId:k,label:b},writable:!0},_enumerateDevices:{value:typeof y?.enumerateDevices=="function"?y.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!v()||w)&&g._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof y?.enumerateDevices=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?y?.defaultDeviceCaptureMode||"auto":"manual"},_onDeviceChange:{value:function(){g._enumerateDevices().then(function(S){var T=S.find(function(O){var q=O.deviceId,U=O.kind;return U==="audioinput"&&q!=="default"});T&&["deviceId","groupId"].some(function(O){return T[O]!==g._currentDefaultDeviceInfo[O]})&&(_.info("Default device changed, restarting the LocalAudioTrack"),_.debug('Old default device: "'+g._currentDefaultDeviceInfo.deviceId+'" => "'+g._currentDefaultDeviceInfo.label+'"'),_.debug('New default device: "'+T.deviceId+'" => "'+T.label+'"'),g._currentDefaultDeviceInfo=T,g._restartDefaultDevice().catch(function(O){return _.warn("Failed to restart: "+O.message)}))},function(S){_.warn("Failed to run enumerateDevices(): "+S.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:w,writable:!1}}),_.debug("defaultDeviceCaptureMode:",g._defaultDeviceCaptureMode),g._maybeRestartOnDefaultDeviceChange(),g}return f.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},f.prototype.attach=function(p){return p=l.prototype.attach.call(this,p),p.muted=!0,p},f.prototype._end=function(){return l.prototype._end.apply(this,arguments)},f.prototype._maybeRestartOnDefaultDeviceChange=function(){var p=this,y=this,g=y._constraints,w=y._defaultDeviceCaptureMode,_=y._log,E=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,b=E.getSettings().deviceId,C=function(P){return P!==b||P==="default"},N=function P(R){return R===void 0&&(R={}),typeof R=="string"?C(R):Array.isArray(R)?R.every(C):R.exact?P(R.exact):R.ideal?P(R.ideal):!0}(g.deviceId);w==="auto"&&N?this._restartOnDefaultDeviceChangeCleanup||(_.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){_.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",p._onDeviceChange),p._restartOnDefaultDeviceChangeCleanup=null}):(_.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},f.prototype._reacquireTrack=function(p){var y=this;return this._log.debug("_reacquireTrack: ",p),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return l.prototype._reacquireTrack.call(y,p)}):l.prototype._reacquireTrack.call(this,p)},f.prototype._restartDefaultDevice=function(){var p=this,y=Object.assign({},this._constraints),g=Object.assign({},y,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(g).then(function(){p._constraints=y,p._maybeRestartOnDefaultDeviceChange()})},f.prototype._setMediaStreamTrack=function(p){var y=this,g=this,w=g._log,_=g.noiseCancellation,E=l.prototype._setMediaStreamTrack.call(this,p);return u()&&_&&(w.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),E=E.then(function(){return h(y._dummyEl)}).then(function(b){return w.debug("Krisp audio is "+(b?"silent, using source audio":"not silent")),b&&_.disablePermanently().then(function(){return l.prototype._setMediaStreamTrack.call(y,_.sourceTrack)})})),E},f.prototype.disable=function(){return l.prototype.disable.apply(this,arguments)},f.prototype.enable=function(){return l.prototype.enable.apply(this,arguments)},f.prototype.restart=function(){return l.prototype.restart.apply(this,arguments)},f.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),l.prototype.stop.apply(this,arguments)},f}(a);return wo=o,wo}var $f,Wy;function XE(){if(Wy)return $f;Wy=1;var d=Yd(),v=KE();function h(u,c){var i=new v(u,c);return Object.setPrototypeOf(i,h.prototype),i}return d(h,v),$f=h,$f}var ko,Jy;function ZE(){if(Jy)return ko;Jy=1;var d=ko&&ko.__read||function(c,i){var a=typeof Symbol=="function"&&c[Symbol.iterator];if(!a)return c;var o=a.call(c),l,f=[],p;try{for(;(i===void 0||i-- >0)&&!(l=o.next()).done;)f.push(l.value)}catch(y){p={error:y}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(p)throw p.error}}return f},v=ht().DEFAULT_FRAME_RATE;function h(c,i){var a=d(c.srcObject.getVideoTracks(),1),o=a[0],l=o.getSettings().frameRate,f=l===void 0?v:l,p,y=new ReadableStream({start:function(w){p=setInterval(function(){return w.enqueue()},1e3/f)}}),g=new TransformStream({transform:function(){return i()}});return y.pipeThrough(g).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(p)}}function u(c,i,a){var o=d(c.srcObject.getVideoTracks(),1),l=o[0],f=new MediaStreamTrackProcessor({track:l}).readable,p=new MediaStreamTrackGenerator({kind:"video"}),y=!1,g=new TransformStream({transform:function(w,_){var E=a==="videoframe"?i(w):Promise.resolve(w.close()).then(i);return E.finally(function(){y&&_.terminate()})}});return f.pipeThrough(g).pipeTo(p.writable).then(function(){}),function(){y=!0}}return ko=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?u:h,ko}var Eo,$y;function WE(){if($y)return Eo;$y=1;var d=Eo&&Eo.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=er().EventEmitter,h=ht().DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,u=function(c){d(i,c);function i(a){var o=c.call(this)||this;return Object.defineProperties(o,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:a},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),o.on("add",function(l){o._lastStatsSaveTime=Date.now(),o._lastStatsPublishTime=Date.now(),o._processorInfo=l,o._stats=[],o._reemitEvent("add",o._getEventData())}),o.on("remove",function(){var l=o._getEventData();o._lastStatsSaveTime=null,o._lastStatsPublishTime=null,o._processorInfo=null,o._stats=null,o._reemitEvent("remove",l)}),o.on("start",function(){o._reemitEvent("start",o._getEventData())}),o.on("stop",function(l){o._reemitEvent("stop",Object.assign({message:l},o._getEventData()))}),o.on("stats",function(){return o._maybeEmitStats()}),o}return i.prototype._getEventData=function(){if(!this._processorInfo)return{};var a=this._processorInfo,o=a.processor,l=a.captureHeight,f=a.captureWidth,p=a.inputFrameRate,y=a.isRemoteVideoTrack,g=a.inputFrameBufferType,w=a.outputFrameBufferContextType,_={captureHeight:l,captureWidth:f,inputFrameRate:p,isRemoteVideoTrack:y,inputFrameBufferType:g,outputFrameBufferContextType:w};return _.name=o._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(E){var b=o["_"+E];typeof b<"u"&&(_[E]=b)}),Object.keys(_).forEach(function(E){var b=_[E];typeof b=="boolean"&&(_[E]=b?"true":"false")}),_},i.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var a=this._processorInfo.processor._benchmark;if(a){var o=Date.now();if(!(o-this._lastStatsSaveTime<1e3)){var l={outputFrameRate:a.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(y){l[y]=a.getAverageDelay(y)}),this._lastStatsSaveTime=o,this._stats.push(l),!(o-this._lastStatsPublishTime<h)){this._lastStatsPublishTime=o;var f=this._stats.splice(0),p=f.reduce(function(y,g,w){return Object.keys(l).forEach(function(_){y[_]||(y[_]=0),y[_]=(y[_]*w+g[_])/(w+1)}),y},{});Object.keys(p).forEach(function(y){p[y]=parseFloat(p[y].toFixed(2))}),this._reemitEvent("stats",Object.assign({},p,this._getEventData()))}}}}},i.prototype._reemitEvent=function(a,o){this._log.debug("VideoProcessor:"+a,o),this.emit("event",{name:a,data:o})},i}(v);return Eo=u,Eo}var Oo,e_;function sb(){if(e_)return Oo;e_=1;var d=Oo&&Oo.__extends||function(){var o=function(l,f){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},o(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");o(l,f);function p(){this.constructor=l}l.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),v=tb(),h=ZE(),u=WE();Xt().guessBrowser;var c=ht().DEFAULT_FRAME_RATE,i=function(o){d(l,o);function l(f,p){var y=o.call(this,f,p)||this;return Object.defineProperties(y,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0}}),y._processorEventObserver=new(p.VideoProcessorEventObserver||u)(y._log),y}return l.prototype._checkIfCanCaptureFrames=function(f){f===void 0&&(f=!1);var p=!0,y="",g=this.mediaStreamTrack,w=g.enabled,_=g.readyState;return w||(p=!1,y="MediaStreamTrack is disabled"),_==="ended"&&(p=!1,y="MediaStreamTrack is ended"),this.processor||(p=!1,y="VideoProcessor not detected."),!this._attachments.size&&!f&&(p=!1,y="VideoTrack is not publishing and there is no attached element."),y&&this._log.debug(y),{canCaptureFrames:p,message:y}},l.prototype._captureFrames=function(){var f=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var p=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var y=function(g){var w=f._checkIfCanCaptureFrames();if(!w.canCaptureFrames)return g&&g.close(),f._isCapturing=!1,f._stopCapture(),f._processorEventObserver.emit("stop",w.message),f._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var _=f.mediaStreamTrack.getSettings(),E=_.width,b=E===void 0?0:E,C=_.height,N=C===void 0?0:C;f._outputFrame&&f._outputFrame.width!==b&&(f._outputFrame.width=b,f._outputFrame.height=N),f._inputFrame&&(f._inputFrame.width!==b&&(f._inputFrame.width=b,f._inputFrame.height=N),f._inputFrame.getContext("2d").drawImage(f._dummyEl,0,0,b,N));var P=g||(["video","videoframe"].includes(p)?f._dummyEl:f._inputFrame),R=null;try{R=f.processor.processFrame(P,f._outputFrame)}catch(k){f._log.debug("Exception detected after calling processFrame.",k)}return(R instanceof Promise?R:Promise.resolve(R)).then(function(){f._outputFrame&&(typeof f.processedTrack.requestFrame=="function"&&f.processedTrack.requestFrame(),f._processorEventObserver.emit("stats"))})};f._stopCapture=h(f._dummyEl,y,p)}).catch(function(y){return f._log.error("Video element cannot be played",{error:y,track:f})})},l.prototype._initialize=function(){var f=this;o.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){a(f,f._dummyEl)&&(f.dimensions.width=f._dummyEl.videoWidth,f.dimensions.height=f._dummyEl.videoHeight)},this._dummyEl.onresize=function(){a(f,f._dummyEl)&&(f.dimensions.width=f._dummyEl.videoWidth,f.dimensions.height=f._dummyEl.videoHeight,f.isStarted&&(f._log.debug("Dimensions changed:",f.dimensions),f.emit(l.DIMENSIONS_CHANGED,f)))})},l.prototype._restartProcessor=function(){var f=this.processor;if(f){var p=Object.assign({},this._processorOptions);this.removeProcessor(f),this.addProcessor(f,p)}},l.prototype._start=function(f){return this.dimensions.width=f.videoWidth,this.dimensions.height=f.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(l.DIMENSIONS_CHANGED,this),o.prototype._start.call(this,f)},l.prototype.addProcessor=function(f,p){var y=this;if(!f||typeof f.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",f),this._unmuteHandler||(this._unmuteHandler=function(){y._log.debug("mediaStreamTrack unmuted"),y.processedTrack.muted&&(y._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),y._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=p||{};var g=this._processorOptions,w=g.inputFrameBufferType,_=g.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&w==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(w&&w!=="videoframe"&&w!=="video"&&w!=="canvas"&&w!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of "+w);w||(w=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var E=this.mediaStreamTrack.getSettings(),b=E.width,C=b===void 0?0:b,N=E.height,P=N===void 0?0:N,R=E.frameRate,k=R===void 0?c:R;w==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(C,P)),w==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=C,this._inputFrame.height=P),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=C,this._outputFrame.height=P,_=_||"2d";var S=this._outputFrame.getContext(_);if(!S)throw new Error("Cannot get outputFrameBufferContextType: "+_+".");var T=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(T).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=f,this._processorEventObserver.emit("add",{processor:f,captureHeight:P,captureWidth:C,inputFrameRate:k,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:w,outputFrameBufferContextType:_}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},l.prototype.attach=function(){var f=o.prototype.attach.apply(this,arguments);return this.processor&&this._captureFrames(),f},l.prototype.detach=function(){return o.prototype.detach.apply(this,arguments)},l.prototype.removeProcessor=function(f){if(!f)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(f!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",f),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},l}(v);i.DIMENSIONS_CHANGED="dimensionsChanged";function a(o,l){return o.dimensions.width!==l.videoWidth||o.dimensions.height!==l.videoHeight}return Oo=i,Oo}var Ro,t_;function JE(){if(t_)return Ro;t_=1;var d=Ro&&Ro.__extends||function(){var l=function(f,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(y[w]=g[w])},l(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");l(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),v=Ai().isIOS,h=nb(),u=lb(),c=sb(),i=u(c),a=function(l){d(f,l);function f(p,y){var g=this;return y=Object.assign({workaroundSilentLocalVideo:v()&&typeof document<"u"&&typeof document.createElement=="function"},y),g=l.call(this,p,y)||this,Object.defineProperties(g,{_workaroundSilentLocalVideo:{value:y.workaroundSilentLocalVideo?o:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),g._workaroundSilentLocalVideo&&(g._workaroundSilentLocalVideoCleanup=g._workaroundSilentLocalVideo(g,document)),g}return f.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},f.prototype._checkIfCanCaptureFrames=function(){return l.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},f.prototype._end=function(){return l.prototype._end.apply(this,arguments)},f.prototype._setSenderMediaStreamTrack=function(p){var y=this,g=this.mediaStreamTrack,w=p?this.processedTrack:g;return this._trackSender.setMediaStreamTrack(w).catch(function(_){return y._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:_,mediaStreamTrack:w})}).then(function(){y._unprocessedTrack=p?g:null})},f.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var p=l.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),p):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},f.prototype.removeProcessor=function(){var p=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var y=l.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return p._updateElementsMediaStreamTrack()}),y},f.prototype.disable=function(){var p=l.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),p},f.prototype.enable=function(p){p===void 0&&(p=!0);var y=l.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=p,p&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),y},f.prototype.restart=function(){var p=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var y=l.prototype.restart.apply(this,arguments);return this.processor&&y.then(function(){p._restartProcessor()}),this._workaroundSilentLocalVideo&&y.finally(function(){p._workaroundSilentLocalVideoCleanup=p._workaroundSilentLocalVideo(p,document)}),y},f.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),l.prototype.stop.apply(this,arguments)},f}(i);function o(l,f){var p=l._log,y=l._dummyEl,g=l.mediaStreamTrack;function w(){l.isEnabled&&(p.info("Unmuted, checking silence"),y.play().then(function(){return h(y,f)}).then(function(_){if(!_){p.info("Non-silent frames detected, so no need to restart");return}return p.warn("Silence detected, restarting"),l._stop(),l._restart()}).catch(function(_){p.warn("Failed to detect silence and restart:",_)}).finally(function(){y=l._dummyEl,y&&!y.paused&&!l.processedTrack&&y.pause(),g.removeEventListener("unmute",w),g=l.mediaStreamTrack,g.addEventListener?g.addEventListener("unmute",w):g.onunmute=w}))}return g.addEventListener?g.addEventListener("unmute",w):g.onunmute=w,function(){g.removeEventListener?g.removeEventListener("unmute",w):g.onunmute=null}}return Ro=a,Ro}var ed,r_;function $E(){if(r_)return ed;r_=1;var d=Yd(),v=JE();function h(u,c){var i=new v(u,c);return Object.setPrototypeOf(i,h.prototype),i}return d(h,v),ed=h,ed}var Co,n_;function fb(){if(n_)return Co;n_=1;var d=Co&&Co.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ob(),h=function(u){d(c,u);function c(i,a,o,l){var f=u.call(this,i,"data")||this;return Object.defineProperties(f,{maxPacketLifeTime:{enumerable:!0,value:a},maxRetransmits:{enumerable:!0,value:o},ordered:{enumerable:!0,value:l}}),f}return c}(v);return Co=h,Co}var Ao,i_;function e0(){if(i_)return Ao;i_=1;var d=Ao&&Ao.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=fb(),h=ut().makeUUID,u=function(c){d(i,c);function i(a,o,l){var f=c.call(this,h(),a,o,l)||this;return Object.defineProperties(f,{_clones:{value:new Set},_dataChannels:{value:new Set}}),f}return i.prototype._addClone=function(a){this._clones.add(a)},i.prototype.removeClone=function(a){this._clones.delete(a)},i.prototype.addDataChannel=function(a){return this._dataChannels.add(a),this},i.prototype.clone=function(){var a=this,o=new i(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(o),o.once("stopped",function(){return a.removeClone(o)}),o},i.prototype.removeDataChannel=function(a){return this._dataChannels.delete(a),this},i.prototype.send=function(a){return this._dataChannels.forEach(function(o){try{o.send(a)}catch{}}),this._clones.forEach(function(o){try{o.send(a)}catch{}}),this},i.prototype.stop=function(){this._dataChannels.forEach(function(a){return a.close()}),this._clones.forEach(function(a){return a.stop()}),c.prototype.stop.call(this)},i}(v);return Ao=u,Ao}var Lo,a_;function t0(){if(a_)return Lo;a_=1;var d=Lo&&Lo.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=Kd(),h=e0(),u=function(c){d(i,c);function i(a){var o=this;a=Object.assign({DataTrackSender:h,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},a);var l=a.DataTrackSender,f=new l(a.maxPacketLifeTime,a.maxRetransmits,a.ordered);return o=c.call(this,f.id,"data",a)||this,Object.defineProperties(o,{_trackSender:{value:f},id:{enumerable:!0,value:f.id},maxPacketLifeTime:{enumerable:!0,value:a.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:a.maxRetransmits},ordered:{enumerable:!0,value:a.ordered},reliable:{enumerable:!0,value:a.maxPacketLifeTime===null&&a.maxRetransmits===null}}),o}return i.prototype.send=function(a){this._trackSender.send(a)},i}(v);return Lo=u,Lo}var td,o_;function r0(){if(o_)return td;o_=1;var d=Yd(),v=t0();function h(u){var c=new v(u);return Object.setPrototypeOf(c,h.prototype),c}return d(h,v),td=h,td}var rd,u_;function ha(){return u_||(u_=1,rd={LocalAudioTrack:XE(),LocalVideoTrack:$E(),LocalDataTrack:r0()}),rd}var c_;function n0(){if(c_)return Jt;c_=1;var d=Jt&&Jt.__assign||function(){return d=Object.assign||function(S){for(var T,O=1,q=arguments.length;O<q;O++){T=arguments[O];for(var U in T)Object.prototype.hasOwnProperty.call(T,U)&&(S[U]=T[U])}return S},d.apply(this,arguments)},v=Jt&&Jt.__awaiter||function(S,T,O,q){function U(F){return F instanceof O?F:new O(function(G){G(F)})}return new(O||(O=Promise))(function(F,G){function B(j){try{D(q.next(j))}catch(Q){G(Q)}}function z(j){try{D(q.throw(j))}catch(Q){G(Q)}}function D(j){j.done?F(j.value):U(j.value).then(B,z)}D((q=q.apply(S,T||[])).next())})},h=Jt&&Jt.__generator||function(S,T){var O={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},q,U,F,G;return G={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function B(D){return function(j){return z([D,j])}}function z(D){if(q)throw new TypeError("Generator is already executing.");for(;O;)try{if(q=1,U&&(F=D[0]&2?U.return:D[0]?U.throw||((F=U.return)&&F.call(U),0):U.next)&&!(F=F.call(U,D[1])).done)return F;switch(U=0,F&&(D=[D[0]&2,F.value]),D[0]){case 0:case 1:F=D;break;case 4:return O.label++,{value:D[1],done:!1};case 5:O.label++,U=D[1],D=[0];continue;case 7:D=O.ops.pop(),O.trys.pop();continue;default:if(F=O.trys,!(F=F.length>0&&F[F.length-1])&&(D[0]===6||D[0]===2)){O=0;continue}if(D[0]===3&&(!F||D[1]>F[0]&&D[1]<F[3])){O.label=D[1];break}if(D[0]===6&&O.label<F[1]){O.label=F[1],F=D;break}if(F&&O.label<F[2]){O.label=F[2],O.ops.push(D);break}F[2]&&O.ops.pop(),O.trys.pop();continue}D=T.call(S,O)}catch(j){D=[6,j],U=0}finally{q=F=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}},u=Jt&&Jt.__read||function(S,T){var O=typeof Symbol=="function"&&S[Symbol.iterator];if(!O)return S;var q=O.call(S),U,F=[],G;try{for(;(T===void 0||T-- >0)&&!(U=q.next()).done;)F.push(U.value)}catch(B){G={error:B}}finally{try{U&&!U.done&&(O=q.return)&&O.call(q)}finally{if(G)throw G.error}}return F},c=Jt&&Jt.__spreadArray||function(S,T){for(var O=0,q=T.length,U=S.length;O<q;O++,U++)S[U]=T[O];return S};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.createLocalTracks=void 0;var i=qE(),a=ut().buildLogLevels,o=Ci(),l=o.getUserMedia,f=o.MediaStreamTrack,p=ha(),y=p.LocalAudioTrack,g=p.LocalDataTrack,w=p.LocalVideoTrack,_=qr(),E=ht(),b=E.DEFAULT_LOG_LEVEL,C=E.DEFAULT_LOGGER_NAME,N=E.typeErrors.INVALID_VALUE,P=ib(),R=0;function k(S){return v(this,void 0,void 0,function(){var T,O,q,U,F,G,B,z,D,j,Q,Z,K,A=this;return h(this,function(x){switch(x.label){case 0:if(T=!(S&&("audio"in S||"video"in S)),O=d({audio:T,getUserMedia:l,loggerName:C,logLevel:b,LocalAudioTrack:y,LocalDataTrack:g,LocalVideoTrack:w,MediaStreamTrack:f,Log:_,video:T},S),q="[createLocalTracks #"+ ++R+"]",U=a(O.logLevel),F=new O.Log("default",q,U,O.loggerName),G=Object.assign({log:F},O),delete G.name,O.audio===!1&&O.video===!1)return F.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(O.tracks)return F.info("Adding user-provided LocalTracks"),F.debug("LocalTracks:",O.tracks),[2,O.tracks];if(B={audio:typeof O.audio=="object"&&O.audio.name?{name:O.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof O.video=="object"&&O.video.name?{name:O.video.name}:{}},B.audio.isCreatedByCreateLocalTracks=!0,B.video.isCreatedByCreateLocalTracks=!0,typeof O.audio=="object")if(typeof O.audio.workaroundWebKitBug1208516=="boolean"&&(B.audio.workaroundWebKitBug1208516=O.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in O.audio&&(z=O.audio.noiseCancellationOptions,delete O.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in O.audio))B.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(L){return L!==O.audio.defaultDeviceCaptureMode}))throw N("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);B.audio.defaultDeviceCaptureMode=O.audio.defaultDeviceCaptureMode}typeof O.video=="object"&&typeof O.video.workaroundWebKitBug1208516=="boolean"&&(B.video.workaroundWebKitBug1208516=O.video.workaroundWebKitBug1208516),typeof O.audio=="object"&&delete O.audio.name,typeof O.video=="object"&&delete O.video.name,D={audio:O.audio,video:O.video},j=typeof O.audio=="object"&&O.audio.workaroundWebKitBug180748,x.label=1;case 1:return x.trys.push([1,4,,5]),[4,j?P(F,O.getUserMedia,D):O.getUserMedia(D)];case 2:return Q=x.sent(),Z=c(c([],u(Q.getAudioTracks())),u(Q.getVideoTracks())),F.info("Call to getUserMedia successful; got tracks:",Z),[4,Promise.all(Z.map(function(L){return v(A,void 0,void 0,function(){var I,W,ie;return h(this,function($){switch($.label){case 0:return L.kind==="audio"&&z?[4,i.applyNoiseCancellation(L,z,F)]:[3,2];case 1:return I=$.sent(),W=I.cleanTrack,ie=I.noiseCancellation,[2,new G.LocalAudioTrack(W,d(d(d({},B.audio),G),{noiseCancellation:ie}))];case 2:if(L.kind==="audio")return[2,new G.LocalAudioTrack(L,d(d({},B.audio),G))];$.label=3;case 3:return[2,new G.LocalVideoTrack(L,d(d({},B.video),G))]}})})}))];case 3:return[2,x.sent()];case 4:throw K=x.sent(),F.warn("Call to getUserMedia failed:",K),K;case 5:return[2]}})})}return Jt.createLocalTracks=k,Jt}var $t={},Po={},l_;function i0(){if(l_)return Po;l_=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.Timer=void 0;var d=function(){function v(){this._end=void 0,this.start()}return v.prototype.start=function(){return this._start=Date.now(),this},v.prototype.stop=function(){return this._end=Date.now(),this},v.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},v}();return Po.Timer=d,Po}var yi={},s_;function a0(){if(s_)return yi;s_=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.mosToScore=yi.calculateMOS=void 0;var d=94.768;function v(u,c,i){var a=u+c*2+10,o=0;switch(!0){case a<160:o=d-a/40;break;case a<1e3:o=d-(a-120)/10;break}switch(!0){case i<=o/2.5:o=Math.max(o-i*2.5,6.52);break;default:o=0;break}var l=1+.035*o+7e-6*o*(o-60)*(100-o);return l}yi.calculateMOS=v;function h(u){var c=0;return u?u>4.2?c=5:u>4?c=4:u>3.6?c=3:u>3?c=2:c=1:c=0,c}return yi.mosToScore=h,yi}var jr={},f_;function o0(){if(f_)return jr;f_=1;var d=jr&&jr.__awaiter||function(o,l,f,p){function y(g){return g instanceof f?g:new f(function(w){w(g)})}return new(f||(f=Promise))(function(g,w){function _(C){try{b(p.next(C))}catch(N){w(N)}}function E(C){try{b(p.throw(C))}catch(N){w(N)}}function b(C){C.done?g(C.value):y(C.value).then(_,E)}b((p=p.apply(o,l||[])).next())})},v=jr&&jr.__generator||function(o,l){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,y,g,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(b){return function(C){return E([b,C])}}function E(b){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,y&&(g=b[0]&2?y.return:b[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,b[1])).done)return g;switch(y=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,y=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){f=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){f.label=b[1];break}if(b[0]===6&&f.label<g[1]){f.label=g[1],g=b;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(b);break}g[2]&&f.ops.pop(),f.trys.pop();continue}b=l.call(o,f)}catch(C){b=[6,C],y=0}finally{p=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},h=jr&&jr.__read||function(o,l){var f=typeof Symbol=="function"&&o[Symbol.iterator];if(!f)return o;var p=f.call(o),y,g=[],w;try{for(;(l===void 0||l-- >0)&&!(y=p.next()).done;)g.push(y.value)}catch(_){w={error:_}}finally{try{y&&!y.done&&(f=p.return)&&f.call(p)}finally{if(w)throw w.error}}return g};Object.defineProperty(jr,"__esModule",{value:!0}),jr.getCombinedConnectionStats=void 0;function u(o,l,f,p){var y=[];return o.forEach(function(g){(p.length===0||p.includes(g.type))&&(f.length===0||f.includes(g.kind))&&typeof g[l]=="number"&&y.push(g[l])}),y}function c(o){var l=o.publisher,f=o.subscriber;return d(this,void 0,void 0,function(){var p,y,g,w,_,E,b,C,N,P,R,k,S,T,O;return v(this,function(q){switch(q.label){case 0:return[4,Promise.all([l,f].map(function(U){return U.getStats()}))];case 1:return p=h.apply(void 0,[q.sent(),2]),y=p[0],g=p[1],w=u(g,"timestamp",["audio"],["inbound-rtp"]),_=w.length>0?w[0]:0,E=u(g,"jitter",["audio"],["inbound-rtp"]).reduce(function(U,F){return Math.max(U,F)},0),b=u(g,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(U,F){return U+F},0),C=u(g,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(U,F){return U+F},0),N=u(y,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(U,F){return Math.max(U,F)},0),P=u(g,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(U,F){return Math.max(U,F)},0),R=(P||N)*1e3,k=u(y,"bytesSent",[],["candidate-pair"]).reduce(function(U,F){return U+F},0),S=u(g,"bytesReceived",[],["candidate-pair"]).reduce(function(U,F){return U+F},0),T=a(g),O=[],g.forEach(function(U){(U.type==="local-candidate"||U.type==="remote-candidate")&&O.push(i(U))}),[2,{timestamp:_,jitter:E,packets:b,packetsLost:C,roundTripTime:R,bytesSent:k,bytesReceived:S,selectedIceCandidatePairStats:T,iceCandidateStats:O}]}})})}jr.getCombinedConnectionStats=c;function i(o){var l=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return l.reduce(function(f,p){var y=[p.key];p.altKeys&&(y=y.concat(p.altKeys));var g=y.find(function(w){return w in o});return g&&typeof o[g]===p.type&&(f[p.key]=o[g]),f},{})}function a(o){var l=null,f=[];o.forEach(function(_){_.type==="transport"&&_.selectedCandidatePairId?l=_.selectedCandidatePairId:_.type==="candidate-pair"&&f.push(_)});var p=f.find(function(_){return _.selected||l&&_.id===l});if(!p)return null;var y=p,g=o.get(y.localCandidateId),w=o.get(y.remoteCandidateId);return!g||!w?null:{localCandidate:i(g),remoteCandidate:i(w)}}return jr}var Mo={},vn,d_;function ya(){if(d_)return vn;d_=1;var d=vn&&vn.__extends||function(){var g=function(w,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(E[C]=b[C])},g(w,_)};return function(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(w,_);function E(){this.constructor=w}w.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}}(),v=vn&&vn.__read||function(g,w){var _=typeof Symbol=="function"&&g[Symbol.iterator];if(!_)return g;var E=_.call(g),b,C=[],N;try{for(;(w===void 0||w-- >0)&&!(b=E.next()).done;)C.push(b.value)}catch(P){N={error:P}}finally{try{b&&!b.done&&(_=E.return)&&_.call(E)}finally{if(N)throw N.error}}return C},h=vn&&vn.__spreadArray||function(g,w){for(var _=0,E=w.length,b=g.length;_<E;_++,b++)g[b]=w[_];return g},u=er().EventEmitter,c=ut(),i=function(g){d(w,g);function w(_,E){var b=g.call(this)||this,C=null,N=_;return E=p(E),Object.defineProperties(b,{_lock:{get:function(){return C},set:function(P){C=P}},_reachableStates:{value:l(E)},_state:{get:function(){return N},set:function(P){N=P}},_states:{value:E},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return C!==null}},state:{enumerable:!0,get:function(){return N}}}),b.on("stateChanged",function(P){b._whenDeferreds.forEach(function(R){R.when(P,R.resolve,R.reject)})}),b}return w.prototype._whenPromise=function(_){var E=this;if(typeof _!="function")return Promise.reject(new Error("when() executor must be a function"));var b=c.defer();return b.when=_,this._whenDeferreds.add(b),b.promise.then(function(C){return E._whenDeferreds.delete(b),C},function(C){throw E._whenDeferreds.delete(b),C})},w.prototype.bracket=function(_,E){var b,C=this;function N(P){if(C.hasLock(b)&&C.releaseLockCompletely(b),P)throw P}return this.takeLock(_).then(function(R){return b=R,E(b)}).then(function(R){return N(),R},N)},w.prototype.hasLock=function(_){return this._lock===_},w.prototype.preempt=function(_,E,b){if(!a(this._states,this.state,_))throw new Error('Cannot transition from "'+this.state+'" to "'+_+'"');var C;this.isLocked&&(C=this._lock,this._lock=null);var N=null;E&&(N=this.takeLockSync(E));var P=N?null:this.takeLockSync("preemption");return this.transition(_,N||P,b),C&&C.resolve(),P&&this.releaseLock(P),N},w.prototype.releaseLock=function(_){if(this.isLocked){if(!this.hasLock(_))throw new Error("Could not release the lock for "+_.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+_.name+" because the StateMachine is not locked");_.depth===0?(this._lock=null,_.resolve()):_.depth--},w.prototype.releaseLockCompletely=function(_){if(this.isLocked){if(!this.hasLock(_))throw new Error("Could not release the lock for "+_.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+_.name+" because the StateMachine is not locked");_.depth=0,this._lock=null,_.resolve()},w.prototype.takeLock=function(_){var E=this;if(typeof _=="object"){var b=_;return new Promise(function(P){P(E.takeLockSync(b))})}var C=_;if(this.isLocked){var N=this.takeLock.bind(this,C);return this._lock.promise.then(N)}return Promise.resolve(this.takeLockSync(C))},w.prototype.takeLockSync=function(_){var E=typeof _=="string"?null:_,b=E?E.name:_;if(E&&!this.hasLock(E)||!E&&this.isLocked)throw new Error("Could not take the lock for "+b+" because the lock for "+this._lock.name+" was not released");if(E)return E.depth++,E;var C=o(b);return this._lock=C,C},w.prototype.transition=function(_,E,b){if(b=b||[],this.isLocked)if(E){if(!this.hasLock(E))throw new Error("Could not transition using the key for "+E.name+" because "+this._lock.name+" has the lock")}else throw new Error("You must provide the key in order to transition");else if(E)throw new Error("Key provided for "+E.name+", but the StateMachine was not locked (possibly due to preemption)");if(!a(this._states,this.state,_))throw new Error('Cannot transition from "'+this.state+'" to "'+_+'"');this._state=_,this.emit.apply(this,h([],v(["stateChanged",_].concat(b))))},w.prototype.tryTransition=function(_,E,b){try{this.transition(_,E,b)}catch{return!1}return!0},w.prototype.when=function(_){var E=this;return this.state===_?Promise.resolve(this):a(this._reachableStates,this.state,_)?this._whenPromise(function(b,C,N){b===_?C(E):a(E._reachableStates,b,_)||N(y(b,_))}):Promise.reject(y(this.state,_))},w}(u);function a(g,w,_){return g.get(w).has(_)}function o(g){var w=c.defer();return w.name=g,w.depth=0,w}function l(g){return Array.from(g.keys()).reduce(function(w,_){return w.set(_,f(g,_))},new Map)}function f(g,w,_){return _=_||new Set,g.get(w).forEach(function(E){_.has(E)||(_.add(E),f(g,E,_).forEach(_.add,_))}),_}function p(g){var w=new Map;for(var _ in g)w.set(_,new Set(g[_]));return w}function y(g,w){return new Error('"'+w+'" cannot be reached from "'+g+'"')}return vn=i,vn}var nd,v_;function u0(){if(v_)return nd;v_=1;var d=function(){function v(h,u){var c=this;u=Object.assign({navigator,window},u);var i=u.navigator,a=i.connection||{type:null},o=a.type,l=a.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var g=o!==c.type&&c.isOnline;o=c.type,g&&h()}},_target:{value:a}}:{_events:{value:["online"]},_listener:{value:h},_target:{value:u.window}},f=l._events,p=l._listener,y=l._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return a.type||null}},_listener:p,_events:f,_target:y})}return v.prototype.start=function(){var h=this;this._events.forEach(function(u){h._target.addEventListener(u,h._listener)})},v.prototype.stop=function(){var h=this;this._events.forEach(function(u){h._target.removeEventListener(u,h._listener)})},v}();return nd=d,nd}var id,h_;function Li(){if(h_)return id;h_=1;var d=function(){function v(h,u,c){c===void 0&&(c=!0),Object.defineProperties(this,{_delay:{value:u,writable:!0},_fn:{value:h},_timeout:{value:null,writable:!0}}),c&&this.start()}return Object.defineProperty(v.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),v.prototype.setDelay=function(h){this._delay=h},v.prototype.start=function(){var h=this;this.isSet||(this._timeout=setTimeout(function(){var u=h._fn;h.clear(),u()},this._delay))},v.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},v.prototype.reset=function(){this.clear(),this.start()},v}();return id=d,id}var ad,p_;function db(){return p_||(p_=1,ad=WebSocket),ad}var hn,m_;function vb(){if(m_)return hn;m_=1;var d=hn&&hn.__extends||function(){var Z=function(K,A){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,L){x.__proto__=L}||function(x,L){for(var I in L)Object.prototype.hasOwnProperty.call(L,I)&&(x[I]=L[I])},Z(K,A)};return function(K,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");Z(K,A);function x(){this.constructor=K}K.prototype=A===null?Object.create(A):(x.prototype=A.prototype,new x)}}(),v=hn&&hn.__read||function(Z,K){var A=typeof Symbol=="function"&&Z[Symbol.iterator];if(!A)return Z;var x=A.call(Z),L,I=[],W;try{for(;(K===void 0||K-- >0)&&!(L=x.next()).done;)I.push(L.value)}catch(ie){W={error:ie}}finally{try{L&&!L.done&&(A=x.return)&&A.call(x)}finally{if(W)throw W.error}}return I},h=hn&&hn.__spreadArray||function(Z,K){for(var A=0,x=K.length,L=Z.length;A<x;A++,L++)Z[L]=K[A];return Z},u=ya(),c=ut(),i=c.buildLogLevels,a=c.makeUUID,o=qr(),l=u0(),f=Li(),p=0,y={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},g={closed:"close",open:"open",waiting:"waiting"},w=2,_=3,E=3,b=5e3,C=15e3,N=5e3,P=200,R=1e3,k=3e3,S=3001,T=3002,O=3003,q=3004,U=3005,F=3006,G=3007,B=globalThis,z=B.WebSocket?B.WebSocket:db(),D={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},j=new Map([[k,D.TIMEOUT],[S,D.TIMEOUT],[T,D.FAILED],[O,D.FAILED],[q,D.TIMEOUT],[F,D.BUSY],[G,D.TIMEOUT]]),Q=function(Z){d(K,Z);function K(A,x){var L=Z.call(this,"early",y)||this;x=Object.assign({helloBody:null,maxConsecutiveFailedHellos:E,maxConsecutiveMissedHeartbeats:_,requestedHeartbeatTimeout:b,openTimeout:C,welcomeTimeout:N,Log:o,WebSocket:z},x);var I=i(x.logLevel),W=new x.Log("default",L,I,x.loggerName),ie=x.networkMonitor?new l(function(){var ae=ie.type,pe="Network changed"+(ae?" to "+ae:"");W.debug(pe),L._close({code:q,reason:pe})}):null;Object.defineProperties(L,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:x.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:x.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++p},_log:{value:W},_messageQueue:{value:[]},_networkMonitor:{value:ie},_options:{value:x},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:A},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var $={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return L.on("stateChanged",function(ae){for(var pe=[],Te=1;Te<arguments.length;Te++)pe[Te-1]=arguments[Te];ae in g&&L.emit.apply(L,h([g[ae]],v(pe)));var xe={name:ae,group:"signaling",level:$[L.state]};if(ae==="closed"){var Ee=v(pe,1),Ce=Ee[0];xe.payload={reason:Ce},xe.level=Ce===D.LOCAL?"info":"error"}L._eventObserver.emit("event",xe)}),L._eventObserver.emit("event",{name:L.state,group:"signaling",level:$[L.state]}),L._connect(),L}return K.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},K.prototype._close=function(A){var x=A.code,L=A.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&x!==U&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var I=this._log;x===R?(I.debug("Closed"),this.transition("closed",null,[D.LOCAL])):(I.warn("Closed: "+x+" - "+L),x!==U&&this.transition("closed",null,[j.get(x)||D.REMOTE]));var W=this._ws.readyState,ie=this._options.WebSocket;W!==ie.CLOSING&&W!==ie.CLOSED&&this._ws.close(x,L)}},K.prototype._connect=function(){var A=this,x=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){x.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');return}this._ws=new this._options.WebSocket(this._serverUrl);var L=this._ws;x.debug("Created a new WebSocket:",L),L.addEventListener("close",function(W){return A._close(W)});var I=this._options.openTimeout;this._openTimeout=new f(function(){var W="Failed to open in "+I+" ms";A._close({code:G,reason:W})},I),L.addEventListener("open",function(){x.debug("WebSocket opened:",L),A._openTimeout.clear(),A._startHandshake(),A._networkMonitor&&A._networkMonitor.start()}),L.addEventListener("message",function(W){x.debug("Incoming: "+W.data);try{W=JSON.parse(W.data)}catch(ie){A.emit("error",ie);return}switch(W.type){case"bad":A._handleBad(W);break;case"busy":A._handleBusy(W);break;case"bye":break;case"msg":A._handleMessage(W);case"heartbeat":A._handleHeartbeat();break;case"welcome":A._handleWelcome(W);break;default:A._log.debug("Unknown message type: "+W.type),A.emit("error",new Error("Unknown message type: "+W.type));break}})},K.prototype._handleBad=function(A){var x=A.reason,L=this._log;if(!["connecting","open"].includes(this.state)){L.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.');return}if(this.state==="connecting"){L.warn("Closing: "+T+" - "+x),this._close({code:T,reason:x});return}L.debug("Error: "+x),this.emit("error",new Error(x))},K.prototype._handleBusy=function(A){var x=this,L=A.cookie,I=A.keepAlive,W=A.retryAfter,ie=this._log;if(!["connecting","waiting"].includes(this.state)){ie.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.');return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var $=W<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+W+" ms";if(W<0){ie.warn("Closing: "+F+" - "+$),this._close({code:F,reason:$});return}var ae=this._options.maxConsecutiveFailedHellos;this._hellosLeft=ae,this._cookie=L||null,I?(ie.warn($),this._busyWaitTimeout=new f(function(){return x._startHandshake()},W)):(ie.warn("Closing: "+U+" - "+$),this._close({code:U,reason:$}),this._busyWaitTimeout=new f(function(){return x._connect()},W)),this.transition("waiting",null,[I,W])},K.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.');return}this._heartbeatTimeout.reset()},K.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var A=this._log,x=this._options.maxConsecutiveMissedHeartbeats;A.debug("Consecutive heartbeats missed: "+x);var L="Missed "+x+' "heartbeat" messages';A.warn("Closing: "+S+" - "+L),this._close({code:S,reason:L})}},K.prototype._handleMessage=function(A){var x=A.body;if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.');return}this.emit("message",x)},K.prototype._handleWelcome=function(A){var x=this,L=A.negotiatedTimeout,I=this._log;if(!["connecting","waiting"].includes(this.state)){I.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.');return}this.state==="waiting"&&(I.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var W=this._options.maxConsecutiveMissedHeartbeats,ie=L*W,$=L-P;this._welcomeTimeout.clear(),this._heartbeatTimeout=new f(function(){return x._handleHeartbeatTimeout()},ie),this._messageQueue.splice(0).forEach(function(ae){return x._send(ae)}),this._sendHeartbeatTimeout=new f(function(){return x._sendHeartbeat()},$),this.transition("open")},K.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var A=this._log;if(this._hellosLeft<=0){var x="All handshake attempts failed";A.warn("Closing: "+k+" - "+x),this._close({code:k,reason:x});return}var L=this._options.maxConsecutiveFailedHellos;A.warn("Handshake attempt "+(L-this._hellosLeft)+" failed"),this._startHandshake()}},K.prototype._send=function(A){var x=this._ws.readyState,L=this._options.WebSocket;if(x===L.OPEN){var I=JSON.stringify(A);this._log.debug("Outgoing: "+I);try{this._ws.send(I),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var W="Failed to send message";this._log.warn("Closing: "+O+" - "+W),this._close({code:O,reason:W})}}},K.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},K.prototype._sendHello=function(){var A=this._options,x=A.helloBody,L=A.requestedHeartbeatTimeout,I={id:a(),timeout:L,type:"hello",version:w};this._cookie&&(I.cookie=this._cookie),x&&(I.body=x),this._send(I)},K.prototype._sendOrEnqueue=function(A){var x=this;if(this.state!=="closed"){var L=this.state==="open"?function(I){return x._send(I)}:function(I){return x._messageQueue.push(I)};L(A)}},K.prototype._startHandshake=function(){var A=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var x=this._options.welcomeTimeout;this._welcomeTimeout=new f(function(){return A._handleWelcomeTimeout()},x)}},K.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:R,reason:"Normal"}))},K.prototype.sendMessage=function(A){this._sendOrEnqueue({body:A,type:"msg"})},K}(u);return Q.CloseReason=D,hn=Q,hn}var Ne={},pn,y_;function c0(){if(y_)return pn;y_=1;var d=pn&&pn.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=pn&&pn.__read||function(c,i){var a=typeof Symbol=="function"&&c[Symbol.iterator];if(!a)return c;var o=a.call(c),l,f=[],p;try{for(;(i===void 0||i-- >0)&&!(l=o.next()).done;)f.push(l.value)}catch(y){p={error:y}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(p)throw p.error}}return f},h=pn&&pn.__spreadArray||function(c,i){for(var a=0,o=i.length,l=c.length;a<o;a++,l++)c[l]=i[a];return c},u=function(c){d(i,c);function i(a){var o=this,l=[].slice.call(arguments,1);o=c.apply(this,h([],v(l)))||this,Object.setPrototypeOf(o,i.prototype);var f=Error.apply(o,l);return f.name="TwilioError",Object.defineProperty(o,"code",{value:a,enumerable:!0}),Object.getOwnPropertyNames(f).forEach(function(p){Object.defineProperty(this,p,{value:f[p],enumerable:!0})},o),o}return i.prototype.toString=function(){var a=this.message?": "+this.message:"";return this.name+" "+this.code+a},i}(Error);return pn=u,pn}var __;function On(){if(__)return Ne;__=1;var d=Ne&&Ne.__extends||function(){var Y=function(V,J){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,Re){we.__proto__=Re}||function(we,Re){for(var De in Re)Object.prototype.hasOwnProperty.call(Re,De)&&(we[De]=Re[De])},Y(V,J)};return function(V,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");Y(V,J);function we(){this.constructor=V}V.prototype=J===null?Object.create(J):(we.prototype=J.prototype,new we)}}(),v=c0(),h={};Ne.createTwilioError=function(V,J){return V=typeof V=="number"?V:0,J=typeof J=="string"&&J?J:"Unknown error",h[V]?new h[V]:new v(V,J)};var u=function(Y){d(V,Y);function V(){var J=Y.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenInvalidError=u,Object.defineProperty(h,20101,{value:u});var c=function(Y){d(V,Y);function V(){var J=Y.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenHeaderInvalidError=c,Object.defineProperty(h,20102,{value:c});var i=function(Y){d(V,Y);function V(){var J=Y.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenIssuerInvalidError=i,Object.defineProperty(h,20103,{value:i});var a=function(Y){d(V,Y);function V(){var J=Y.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenExpiredError=a,Object.defineProperty(h,20104,{value:a});var o=function(Y){d(V,Y);function V(){var J=Y.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenNotYetValidError=o,Object.defineProperty(h,20105,{value:o});var l=function(Y){d(V,Y);function V(){var J=Y.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenGrantsInvalidError=l,Object.defineProperty(h,20106,{value:l});var f=function(Y){d(V,Y);function V(){var J=Y.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.AccessTokenSignatureInvalidError=f,Object.defineProperty(h,20107,{value:f});var p=function(Y){d(V,Y);function V(){var J=Y.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingConnectionError=p,Object.defineProperty(h,53e3,{value:p});var y=function(Y){d(V,Y);function V(){var J=Y.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingConnectionDisconnectedError=y,Object.defineProperty(h,53001,{value:y});var g=function(Y){d(V,Y);function V(){var J=Y.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingConnectionTimeoutError=g,Object.defineProperty(h,53002,{value:g});var w=function(Y){d(V,Y);function V(){var J=Y.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingIncomingMessageInvalidError=w,Object.defineProperty(h,53003,{value:w});var _=function(Y){d(V,Y);function V(){var J=Y.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingOutgoingMessageInvalidError=_,Object.defineProperty(h,53004,{value:_});var E=function(Y){d(V,Y);function V(){var J=Y.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.SignalingServerBusyError=E,Object.defineProperty(h,53006,{value:E});var b=function(Y){d(V,Y);function V(){var J=Y.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomNameInvalidError=b,Object.defineProperty(h,53100,{value:b});var C=function(Y){d(V,Y);function V(){var J=Y.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomNameTooLongError=C,Object.defineProperty(h,53101,{value:C});var N=function(Y){d(V,Y);function V(){var J=Y.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomNameCharsInvalidError=N,Object.defineProperty(h,53102,{value:N});var P=function(Y){d(V,Y);function V(){var J=Y.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomCreateFailedError=P,Object.defineProperty(h,53103,{value:P});var R=function(Y){d(V,Y);function V(){var J=Y.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomConnectFailedError=R,Object.defineProperty(h,53104,{value:R});var k=function(Y){d(V,Y);function V(){var J=Y.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomMaxParticipantsExceededError=k,Object.defineProperty(h,53105,{value:k});var S=function(Y){d(V,Y);function V(){var J=Y.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomNotFoundError=S,Object.defineProperty(h,53106,{value:S});var T=function(Y){d(V,Y);function V(){var J=Y.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomMaxParticipantsOutOfRangeError=T,Object.defineProperty(h,53107,{value:T});var O=function(Y){d(V,Y);function V(){var J=Y.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomTypeInvalidError=O,Object.defineProperty(h,53108,{value:O});var q=function(Y){d(V,Y);function V(){var J=Y.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomTimeoutOutOfRangeError=q,Object.defineProperty(h,53109,{value:q});var U=function(Y){d(V,Y);function V(){var J=Y.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomStatusCallbackMethodInvalidError=U,Object.defineProperty(h,53110,{value:U});var F=function(Y){d(V,Y);function V(){var J=Y.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomStatusCallbackInvalidError=F,Object.defineProperty(h,53111,{value:F});var G=function(Y){d(V,Y);function V(){var J=Y.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomStatusInvalidError=G,Object.defineProperty(h,53112,{value:G});var B=function(Y){d(V,Y);function V(){var J=Y.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomRoomExistsError=B,Object.defineProperty(h,53113,{value:B});var z=function(Y){d(V,Y);function V(){var J=Y.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomInvalidParametersError=z,Object.defineProperty(h,53114,{value:z});var D=function(Y){d(V,Y);function V(){var J=Y.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomMediaRegionInvalidError=D,Object.defineProperty(h,53115,{value:D});var j=function(Y){d(V,Y);function V(){var J=Y.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomMediaRegionUnavailableError=j,Object.defineProperty(h,53116,{value:j});var Q=function(Y){d(V,Y);function V(){var J=Y.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomSubscriptionOperationNotSupportedError=Q,Object.defineProperty(h,53117,{value:Q});var Z=function(Y){d(V,Y);function V(){var J=Y.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomCompletedError=Z,Object.defineProperty(h,53118,{value:Z});var K=function(Y){d(V,Y);function V(){var J=Y.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomAudioOnlyFlagNotSupportedError=K,Object.defineProperty(h,53124,{value:K});var A=function(Y){d(V,Y);function V(){var J=Y.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.RoomTrackKindNotSupportedError=A,Object.defineProperty(h,53125,{value:A});var x=function(Y){d(V,Y);function V(){var J=Y.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantIdentityInvalidError=x,Object.defineProperty(h,53200,{value:x});var L=function(Y){d(V,Y);function V(){var J=Y.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantIdentityTooLongError=L,Object.defineProperty(h,53201,{value:L});var I=function(Y){d(V,Y);function V(){var J=Y.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantIdentityCharsInvalidError=I,Object.defineProperty(h,53202,{value:I});var W=function(Y){d(V,Y);function V(){var J=Y.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantMaxTracksExceededError=W,Object.defineProperty(h,53203,{value:W});var ie=function(Y){d(V,Y);function V(){var J=Y.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantNotFoundError=ie,Object.defineProperty(h,53204,{value:ie});var $=function(Y){d(V,Y);function V(){var J=Y.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ParticipantDuplicateIdentityError=$,Object.defineProperty(h,53205,{value:$});var ae=function(Y){d(V,Y);function V(){var J=Y.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackInvalidError=ae,Object.defineProperty(h,53300,{value:ae});var pe=function(Y){d(V,Y);function V(){var J=Y.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackNameInvalidError=pe,Object.defineProperty(h,53301,{value:pe});var Te=function(Y){d(V,Y);function V(){var J=Y.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackNameTooLongError=Te,Object.defineProperty(h,53302,{value:Te});var xe=function(Y){d(V,Y);function V(){var J=Y.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackNameCharsInvalidError=xe,Object.defineProperty(h,53303,{value:xe});var Ee=function(Y){d(V,Y);function V(){var J=Y.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackNameIsDuplicatedError=Ee,Object.defineProperty(h,53304,{value:Ee});var Ce=function(Y){d(V,Y);function V(){var J=Y.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.TrackServerTrackCapacityReachedError=Ce,Object.defineProperty(h,53305,{value:Ce});var Le=function(Y){d(V,Y);function V(){var J=Y.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaClientLocalDescFailedError=Le,Object.defineProperty(h,53400,{value:Le});var Pe=function(Y){d(V,Y);function V(){var J=Y.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaServerLocalDescFailedError=Pe,Object.defineProperty(h,53401,{value:Pe});var Oe=function(Y){d(V,Y);function V(){var J=Y.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaClientRemoteDescFailedError=Oe,Object.defineProperty(h,53402,{value:Oe});var _e=function(Y){d(V,Y);function V(){var J=Y.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaServerRemoteDescFailedError=_e,Object.defineProperty(h,53403,{value:_e});var je=function(Y){d(V,Y);function V(){var J=Y.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaNoSupportedCodecError=je,Object.defineProperty(h,53404,{value:je});var Ae=function(Y){d(V,Y);function V(){var J=Y.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaConnectionError=Ae,Object.defineProperty(h,53405,{value:Ae});var Qe=function(Y){d(V,Y);function V(){var J=Y.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.MediaDTLSTransportFailedError=Qe,Object.defineProperty(h,53407,{value:Qe});var ee=function(Y){d(V,Y);function V(){var J=Y.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);Ne.ConfigurationAcquireFailedError=ee,Object.defineProperty(h,53500,{value:ee});var oe=function(Y){d(V,Y);function V(){var J=Y.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(J,V.prototype),J}return V}(v);return Ne.ConfigurationAcquireTurnFailedError=oe,Object.defineProperty(h,53501,{value:oe}),Ne}var g_;function l0(){if(g_)return Mo;g_=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.getTurnCredentials=void 0;var d=vb(),v=ht().ICE_VERSION,h=On(),u=h.createTwilioError,c=h.SignalingConnectionError,i=er();function a(o,l){return new Promise(function(f,p){var y=new i.EventEmitter,g={networkMonitor:null,eventObserver:y,helloBody:{edge:"roaming",preflight:!0,token:o,type:"ice",version:v}},w=new d(l,g),_=!1;w.once("close",function(){_||(_=!0,p(new c))}),w.on("message",function(E){var b=E.code,C=E.message,N=E.ice_servers,P=E.type;(P==="iced"||P==="error")&&!_&&(_=!0,P==="iced"?f(N):p(u(b,C)),w.close())})})}return Mo.getTurnCredentials=a,Mo}var mn={},S_;function s0(){if(S_)return mn;S_=1;var d=mn&&mn.__read||function(u,c){var i=typeof Symbol=="function"&&u[Symbol.iterator];if(!i)return u;var a=i.call(u),o,l=[],f;try{for(;(c===void 0||c-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(p){f={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(f)throw f.error}}return l},v=mn&&mn.__spreadArray||function(u,c){for(var i=0,a=c.length,o=u.length;i<a;i++,o++)u[o]=c[i];return u};Object.defineProperty(mn,"__esModule",{value:!0}),mn.makeStat=void 0;function h(u){if(u&&u.length){var c=Math.min.apply(Math,v([],d(u))),i=Math.max.apply(Math,v([],d(u))),a=u.reduce(function(o,l){return o+l},0)/u.length;return{min:c,max:i,average:a}}return null}return mn.makeStat=h,mn}var xo={},b_;function f0(){if(b_)return xo;b_=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.syntheticAudio=void 0;function d(){var v=yl(),h={},u=v.getOrCreate(h),c=u.createOscillator(),i=c.connect(u.createMediaStreamDestination());c.start();var a=i.stream.getAudioTracks()[0],o=a.stop;return a.stop=function(){o.call(a),v.release(h)},a}return xo.syntheticAudio=d,xo}var Do={},T_;function d0(){if(T_)return Do;T_=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.syntheticVideo=void 0;function d(v){var h=v===void 0?{}:v,u=h.width,c=u===void 0?640:u,i=h.height,a=i===void 0?480:i,o=Object.assign(document.createElement("canvas"),{width:c,height:a}),l=o.getContext("2d");l.fillStyle="green",l.fillRect(0,0,o.width,o.height);var f=!1;requestAnimationFrame(function w(){if(!f){var _=Math.round(Math.random()*255),E=Math.round(Math.random()*255),b=Math.round(Math.random()*255),C=Math.round(Math.random()*255);l.fillStyle="rgba("+_+", "+E+", "+b+", "+C+")",l.fillRect(Math.random()*c,Math.random()*a,50,50),requestAnimationFrame(w)}});var p=o.captureStream(30),y=p.getTracks()[0],g=y.stop;return y.stop=function(){f=!0,g.call(y)},y}return Do.syntheticVideo=d,Do}var od,w_;function hb(){if(w_)return od;w_=1;var d=function(){function v(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return v.prototype.get=function(){var h=this._samples,u=h[1].denominator-h[0].denominator||1/0,c=h[1].numerator-h[0].numerator;return c/u},v.prototype.putSample=function(h,u){var c=this._samples;c.shift(),c.push({denominator:u,numerator:h})},v}();return od=d,od}var jo,k_;function pb(){if(k_)return jo;k_=1;var d=jo&&jo.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=er().EventEmitter,h=["signaling","room","media","quality","video-processor","preflight"],u=["debug","error","info","warning"],c=function(i){d(a,i);function a(o,l,f,p){p===void 0&&(p=null);var y=i.call(this)||this;return y.on("event",function(g){var w=g.name,_=g.group,E=g.level,b=g.payload;if(typeof w!="string")throw f.error("Unexpected name: ",w),new Error("Unexpected name: ",w);if(!h.includes(_))throw f.error("Unexpected group: ",_),new Error("Unexpected group: ",_);if(!u.includes(E))throw f.error("Unexpected level: ",E),new Error("Unexpected level: ",E);var C=Date.now(),N=C-l,P=Object.assign({elapsedTime:N,level:E},b||{});o.publish(_,w,P);var R=Object.assign({elapsedTime:N,group:_,level:E,name:w,timestamp:C},b?{payload:b}:{}),k={debug:"debug",error:"error",info:"info",warning:"warn"}[E];f[k]("event",R),p&&_==="signaling"&&p.emit("event",R)}),y}return a}(v);return jo=c,jo}var _i,E_;function mb(){if(E_)return _i;E_=1;var d=_i&&_i.__extends||function(){var P=function(R,k){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,T){S.__proto__=T}||function(S,T){for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&(S[O]=T[O])},P(R,k)};return function(R,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");P(R,k);function S(){this.constructor=R}R.prototype=k===null?Object.create(k):(S.prototype=k.prototype,new S)}}(),v=_i&&_i.__assign||function(){return v=Object.assign||function(P){for(var R,k=1,S=arguments.length;k<S;k++){R=arguments[k];for(var T in R)Object.prototype.hasOwnProperty.call(R,T)&&(P[T]=R[T])}return P},v.apply(this,arguments)},h=er().EventEmitter,u=ut().getUserAgent,c=5,i=50,a=1e3,o=globalThis,l=o.WebSocket?o.WebSocket:db(),f=ht(),p=f.hardwareDevicePublisheriPad,y=f.hardwareDevicePublisheriPhone,g=ut(),w=Ai(),_=function(P){d(R,P);function R(k,S,T,O,q,U){var F=P.call(this)||this;return U=Object.assign({gateway:b(O,q)+"/v1/VideoEvents",maxReconnectAttempts:c,reconnectIntervalMs:i,userAgent:u(),WebSocket:l},U),Object.defineProperties(F,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:g.defer()},_reconnectAttemptsLeft:{value:U.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:U.WebSocket}}),F._readyToConnect.promise.then(function(G){var B=G.roomSid,z=G.participantSid,D=F;F.on("disconnected",function j(Q){if(D._session=null,Q&&D._reconnectAttemptsLeft>0){D.emit("reconnecting"),N(D,k,S,T,B,z,U);return}D.removeListener("disconnected",j)}),E(F,k,S,T,B,z,U)}).catch(function(){}),F}return R.prototype.connect=function(k,S){this._readyToConnect.resolve({roomSid:k,participantSid:S})},R.prototype._publish=function(k){k.session=this._session,this._ws.send(JSON.stringify(k))},R.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},R.prototype.publish=function(k,S,T){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var O=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return O({group:k,name:S,payload:T,timestamp:Date.now(),type:"event",version:1}),!0},R}(h);function E(P,R,k,S,T,O,q){P._connectTimestamp=Date.now(),P._reconnectAttemptsLeft--,P._ws=new q.WebSocket(q.gateway);var U=P._ws;U.addEventListener("close",function(F){if(F.code===a){P.emit("disconnected");return}P.emit("disconnected",new Error("WebSocket Error "+F.code+": "+F.reason))}),U.addEventListener("message",function(F){C(P,JSON.parse(F.data),q)}),U.addEventListener("open",function(){var F={type:"connect",token:R,version:1};F.publisher={name:k,sdkVersion:S,userAgent:q.userAgent,participantSid:O,roomSid:T},w.isIpad()?F.publisher=v(v({},F.publisher),p):w.isIphone()&&(F.publisher=v(v({},F.publisher),y)),U.send(JSON.stringify(F))})}function b(P,R){return P==="prod"?"wss://sdkgw."+R+".twilio.com":"wss://sdkgw."+P+"-"+R+".twilio.com"}function C(P,R,k){switch(R.type){case"connected":P._session=R.session,P._reconnectAttemptsLeft=k.maxReconnectAttempts,P._eventQueue.splice(0).forEach(P._publish,P),P.emit("connected");break;case"error":P._ws.close(),P.emit("disconnected",new Error(R.message));break}}function N(P,R,k,S,T,O,q){var U=Date.now()-P._connectTimestamp,F=q.reconnectIntervalMs-U;if(F>0){setTimeout(function(){E(P,R,k,S,T,O,q)},F);return}E(P,R,k,S,T,O,q)}return _i=_,_i}var O_;function v0(){if(O_)return $t;O_=1;var d=$t&&$t.__extends||function(){var Q=function(Z,K){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var L in x)Object.prototype.hasOwnProperty.call(x,L)&&(A[L]=x[L])},Q(Z,K)};return function(Z,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");Q(Z,K);function A(){this.constructor=Z}Z.prototype=K===null?Object.create(K):(A.prototype=K.prototype,new A)}}(),v=$t&&$t.__assign||function(){return v=Object.assign||function(Q){for(var Z,K=1,A=arguments.length;K<A;K++){Z=arguments[K];for(var x in Z)Object.prototype.hasOwnProperty.call(Z,x)&&(Q[x]=Z[x])}return Q},v.apply(this,arguments)},h=$t&&$t.__awaiter||function(Q,Z,K,A){function x(L){return L instanceof K?L:new K(function(I){I(L)})}return new(K||(K=Promise))(function(L,I){function W(ae){try{$(A.next(ae))}catch(pe){I(pe)}}function ie(ae){try{$(A.throw(ae))}catch(pe){I(pe)}}function $(ae){ae.done?L(ae.value):x(ae.value).then(W,ie)}$((A=A.apply(Q,Z||[])).next())})},u=$t&&$t.__generator||function(Q,Z){var K={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},A,x,L,I;return I={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function W($){return function(ae){return ie([$,ae])}}function ie($){if(A)throw new TypeError("Generator is already executing.");for(;K;)try{if(A=1,x&&(L=$[0]&2?x.return:$[0]?x.throw||((L=x.return)&&L.call(x),0):x.next)&&!(L=L.call(x,$[1])).done)return L;switch(x=0,L&&($=[$[0]&2,L.value]),$[0]){case 0:case 1:L=$;break;case 4:return K.label++,{value:$[1],done:!1};case 5:K.label++,x=$[1],$=[0];continue;case 7:$=K.ops.pop(),K.trys.pop();continue;default:if(L=K.trys,!(L=L.length>0&&L[L.length-1])&&($[0]===6||$[0]===2)){K=0;continue}if($[0]===3&&(!L||$[1]>L[0]&&$[1]<L[3])){K.label=$[1];break}if($[0]===6&&K.label<L[1]){K.label=L[1],L=$;break}if(L&&K.label<L[2]){K.label=L[2],K.ops.push($);break}L[2]&&K.ops.pop(),K.trys.pop();continue}$=Z.call(Q,K)}catch(ae){$=[6,ae],x=0}finally{A=L=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}};Object.defineProperty($t,"__esModule",{value:!0}),$t.runPreflight=$t.PreflightTest=void 0;var c=ht(),i=i0(),a=a0(),o=o0(),l=l0(),f=s0(),p=f0(),y=d0(),g=ut(),w=ht().WS_SERVER,_=qr(),E=Iu(),b=hb(),C=pb(),N=mb(),P=QS(),R=P.createSID,k=P.sessionSID,S=On(),T=S.SignalingConnectionTimeoutError,O=S.MediaConnectionError,q=1e3,U=10*q,F={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function G(Q){return Q!==null&&typeof Q<"u"}var B=0,z=function(Q){d(Z,Q);function Z(K,A){var x=Q.call(this)||this;x._testTiming=new i.Timer,x._dtlsTiming=new i.Timer,x._iceTiming=new i.Timer,x._peerConnectionTiming=new i.Timer,x._mediaTiming=new i.Timer,x._connectTiming=new i.Timer,x._sentBytesMovingAverage=new b,x._packetLossMovingAverage=new b,x._progressEvents=[],x._receivedBytesMovingAverage=new b;var L=A,I=L.environment,W=I===void 0?"prod":I,ie=L.region,$=ie===void 0?"gll":ie,ae=L.duration,pe=ae===void 0?U:ae,Te=L.wsServer||w(W,$);return x._log=new _("default",x,c.DEFAULT_LOG_LEVEL,c.DEFAULT_LOGGER_NAME),x._testDuration=pe,x._instanceId=B++,x._testTiming.start(),x._runPreflightTest(K,W,Te),x}return Z.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},Z.prototype.stop=function(){this._stopped=!0},Z.prototype._generatePreflightReport=function(K){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:f.makeStat(K?.jitter),rtt:f.makeStat(K?.rtt),packetLoss:f.makeStat(K?.packetLoss)},selectedIceCandidatePairStats:K?K.selectedIceCandidatePairStats:null,iceCandidateStats:K?K.iceCandidateStats:[],progressEvents:this._progressEvents,mos:f.makeStat(K?.mos)}},Z.prototype._executePreflightStep=function(K,A,x){return h(this,void 0,void 0,function(){var L,I,W,ie,$;return u(this,function(ae){switch(ae.label){case 0:if(this._log.debug("Executing step: ",K),L=this._testDuration+10*q,this._stopped)throw new Error("stopped");I=Promise.resolve().then(A),W=null,ie=new Promise(function(pe,Te){W=setTimeout(function(){Te(x||new Error(K+" timeout."))},L)}),ae.label=1;case 1:return ae.trys.push([1,,3,4]),[4,Promise.race([ie,I])];case 2:return $=ae.sent(),[2,$];case 3:return W!==null&&clearTimeout(W),[7];case 4:return[2]}})})},Z.prototype._collectNetworkTimings=function(K){var A=this;return new Promise(function(x){var L;K.addEventListener("iceconnectionstatechange",function(){K.iceConnectionState==="checking"&&A._iceTiming.start(),K.iceConnectionState==="connected"&&(A._iceTiming.stop(),A._updateProgress(F.iceConnected),(!L||L&&L.state==="connected")&&x())}),K.addEventListener("connectionstatechange",function(){K.connectionState==="connecting"&&A._peerConnectionTiming.start(),K.connectionState==="connected"&&(A._peerConnectionTiming.stop(),A._updateProgress(F.peerConnectionConnected))});var I=K.getSenders(),W=I.map(function(ie){return ie.transport}).find(G);typeof W<"u"&&(L=W,L.addEventListener("statechange",function(){L.state==="connecting"&&A._dtlsTiming.start(),L.state==="connected"&&(A._dtlsTiming.stop(),A._updateProgress(F.dtlsConnected),K.iceConnectionState==="connected"&&x())}))})},Z.prototype._setupInsights=function(K){var A=K.token,x=K.environment,L=x===void 0?c.DEFAULT_ENVIRONMENT:x,I=K.realm,W=I===void 0?c.DEFAULT_REALM:I,ie={},$=new N(A,c.SDK_NAME,c.SDK_VERSION,L,W,ie);$.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var ae=new C($,Date.now(),this._log),pe=void 0;return{reportToInsights:function(Te){var xe,Ee,Ce=Te.report,Le=Ce.stats.jitter||pe,Pe=Ce.stats.rtt||pe,Oe=Ce.stats.packetLoss||pe,_e=Ce.mos||pe,je=new Map;Ce.iceCandidateStats.forEach(function(ee){if(ee.candidateType&&ee.protocol){var oe=je.get(ee.candidateType)||[];oe.indexOf(ee.protocol)<0&&oe.push(ee.protocol),je.set(ee.candidateType,oe)}});var Ae=JSON.stringify(Object.fromEntries(je)),Qe={name:"report",group:"preflight",level:Ce.error?"error":"info",payload:{sessionSID:k,preflightSID:R("PF"),progressEvents:JSON.stringify(Ce.progressEvents),testTiming:Ce.testTiming,dtlsTiming:Ce.networkTiming.dtls,iceTiming:Ce.networkTiming.ice,peerConnectionTiming:Ce.networkTiming.peerConnection,connectTiming:Ce.networkTiming.connect,mediaTiming:Ce.networkTiming.media,selectedLocalCandidate:(xe=Ce.selectedIceCandidatePairStats)===null||xe===void 0?void 0:xe.localCandidate,selectedRemoteCandidate:(Ee=Ce.selectedIceCandidatePairStats)===null||Ee===void 0?void 0:Ee.remoteCandidate,iceCandidateStats:Ae,jitterStats:Le,rttStats:Pe,packetLossStats:Oe,mosStats:_e,error:Ce.error}};ae.emit("event",Qe),setTimeout(function(){return $.disconnect()},2e3)}}},Z.prototype._runPreflightTest=function(K,A,x){return h(this,void 0,void 0,function(){var L,I,W,ie,$,ae,pe,Te,xe,Ee,Ce,Le,Pe=this;return u(this,function(Oe){switch(Oe.label){case 0:L=[],I=[],W=this._setupInsights({token:K,environment:A}).reportToInsights,Oe.label=1;case 1:return Oe.trys.push([1,8,9,10]),ie=[],[4,this._executePreflightStep("Acquire media",function(){return[p.syntheticAudio(),y.syntheticVideo({width:640,height:480})]})];case 2:return L=Oe.sent(),this._updateProgress(F.mediaAcquired),this.emit("debug",{localTracks:L}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return l.getTurnCredentials(K,x)},new T)];case 3:return $=Oe.sent(),this._connectTiming.stop(),this._updateProgress(F.connected),ae=new RTCPeerConnection({iceServers:$,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),pe=new RTCPeerConnection({iceServers:$,bundlePolicy:"max-bundle"}),I.push(ae),I.push(pe),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return h(Pe,void 0,void 0,function(){var _e,je,Ae,Qe;return u(this,function(ee){switch(ee.label){case 0:return ae.addEventListener("icecandidate",function(oe){return oe.candidate&&pe.addIceCandidate(oe.candidate)}),pe.addEventListener("icecandidate",function(oe){return oe.candidate&&ae.addIceCandidate(oe.candidate)}),L.forEach(function(oe){return ae.addTrack(oe)}),_e=new Promise(function(oe){var Y=[];pe.addEventListener("track",function(V){Y.push(V.track),Y.length===L.length&&oe(Y)})}),[4,ae.createOffer()];case 1:return je=ee.sent(),Ae=je,[4,ae.setLocalDescription(Ae)];case 2:return ee.sent(),[4,pe.setRemoteDescription(Ae)];case 3:return ee.sent(),[4,pe.createAnswer()];case 4:return Qe=ee.sent(),[4,pe.setLocalDescription(Qe)];case 5:return ee.sent(),[4,ae.setRemoteDescription(Qe)];case 6:return ee.sent(),[4,this._collectNetworkTimings(ae)];case 7:return ee.sent(),[2,_e]}})})},new O)];case 4:return Te=Oe.sent(),this.emit("debug",{remoteTracks:Te}),Te.forEach(function(_e){_e.addEventListener("ended",function(){return Pe._log.warn(_e.kind+":ended")}),_e.addEventListener("mute",function(){return Pe._log.warn(_e.kind+":muted")}),_e.addEventListener("unmute",function(){return Pe._log.warn(_e.kind+":unmuted")})}),this._updateProgress(F.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(_e){var je=document.createElement("video");je.autoplay=!0,je.playsInline=!0,je.muted=!0,je.srcObject=new MediaStream(Te),ie.push(je),Pe.emit("debugElement",je),je.oncanplay=_e})},new O)];case 5:return Oe.sent(),this._mediaTiming.stop(),this._updateProgress(F.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return Pe._collectRTCStatsForDuration(Pe._testDuration,D(),ae,pe)})];case 6:return xe=Oe.sent(),[4,this._executePreflightStep("Generate report",function(){return Pe._generatePreflightReport(xe)})];case 7:return Ee=Oe.sent(),W({report:Ee}),this.emit("completed",Ee),[3,10];case 8:return Ce=Oe.sent(),Le=this._generatePreflightReport(),W({report:v(v({},Le),{error:Ce?.toString()})}),this.emit("failed",Ce,Le),[3,10];case 9:return I.forEach(function(_e){return _e.close()}),L.forEach(function(_e){return _e.stop()}),[7];case 10:return[2]}})})},Z.prototype._collectRTCStats=function(K,A,x){return h(this,void 0,void 0,function(){var L,I,W,ie,$,ae,pe,Te,xe,Ee,Ce,Le,Pe,Oe;return u(this,function(_e){switch(_e.label){case 0:return[4,o.getCombinedConnectionStats({publisher:A,subscriber:x})];case 1:return L=_e.sent(),I=L.timestamp,W=L.bytesSent,ie=L.bytesReceived,$=L.packets,ae=L.packetsLost,pe=L.roundTripTime,Te=L.jitter,xe=L.selectedIceCandidatePairStats,Ee=L.iceCandidateStats,Ce=K.jitter.length>0,K.jitter.push(Te),K.rtt.push(pe),this._sentBytesMovingAverage.putSample(W,I),this._receivedBytesMovingAverage.putSample(ie,I),this._packetLossMovingAverage.putSample(ae,$),Ce&&(K.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),K.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),Le=this._packetLossMovingAverage.get(),Pe=Math.min(100,Le*100),K.packetLoss.push(Pe),Oe=a.calculateMOS(pe,Te,Le),K.mos.push(Oe)),K.selectedIceCandidatePairStats||(K.selectedIceCandidatePairStats=xe),K.iceCandidateStats.length===0&&(K.iceCandidateStats=Ee),[2]}})})},Z.prototype._collectRTCStatsForDuration=function(K,A,x,L){return h(this,void 0,void 0,function(){var I,W,ie;return u(this,function($){switch($.label){case 0:return I=Date.now(),W=Math.min(1e3,K),[4,g.waitForSometime(W)];case 1:return $.sent(),[4,this._collectRTCStats(A,x,L)];case 2:return $.sent(),ie=K-(Date.now()-I),ie>0?[4,this._collectRTCStatsForDuration(ie,A,x,L)]:[3,4];case 3:A=$.sent(),$.label=4;case 4:return[2,A]}})})},Z.prototype._updateProgress=function(K){var A=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:A,name:K}),this.emit("progress",K)},Z}(E);$t.PreflightTest=z;function D(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function j(Q,Z){Z===void 0&&(Z={});var K=new z(Q,Z);return K}return $t.runPreflight=j,$t}var gi,R_;function Zd(){if(R_)return gi;R_=1;var d=gi&&gi.__read||function(u,c){var i=typeof Symbol=="function"&&u[Symbol.iterator];if(!i)return u;var a=i.call(u),o,l=[],f;try{for(;(c===void 0||c-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(p){f={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(f)throw f.error}}return l},v=gi&&gi.__spreadArray||function(u,c){for(var i=0,a=c.length,o=u.length;i<a;i++,o++)u[o]=c[i];return u},h=function(){function u(c,i){var a=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:i}}),Object.defineProperty(this,"_promise",{value:new Promise(function(o,l){c(function(f){a._isCancelable=!1,o(f)},function(f){a._isCancelable=!1,l(f)},function(){return a._isCanceled})})})}return u.reject=function(c){return new u(function(a,o){o(c)},function(){})},u.resolve=function(c){return new u(function(a){a(c)},function(){})},u.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},u.prototype.catch=function(){var c=[].slice.call(arguments),i=this._promise;return new u(function(o,l){i.catch.apply(i,v([],d(c))).then(o,l)},this._onCancel)},u.prototype.then=function(){var c=[].slice.call(arguments),i=this._promise;return new u(function(o,l){i.then.apply(i,v([],d(c))).then(o,l)},this._onCancel)},u.prototype.finally=function(){var c=[].slice.call(arguments),i=this._promise;return new u(function(o,l){i.finally.apply(i,v([],d(c))).then(o,l)},this._onCancel)},u}();return gi=h,gi}var ud,C_;function h0(){if(C_)return ud;C_=1;var d=Zd();function v(h,u,c,i){var a,o=new Error("Canceled");return new d(function(f,p,y){var g;h(function(_){return y()?d.reject(o):(g=u(_),c(g).then(function(b){if(y())throw o;return a=b(),a}))}).then(function(_){if(y())throw _.disconnect(),o;f(i(g,_))}).catch(function(_){p(_)})},function(){a&&a.cancel()})}return ud=v,ud}var No,A_;function p0(){if(A_)return No;A_=1;var d=No&&No.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=er().EventEmitter,h=function(u){d(c,u);function c(i,a){var o=u.call(this)||this;return i=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},i),Object.defineProperties(o,{maxAudioBitrate:{value:i.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:i.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:a}}),o}return c.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},c.prototype.update=function(i){var a=this;i=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},i);var o=["maxAudioBitrate","maxVideoBitrate"].reduce(function(l,f){return a[f]!==i[f]&&(a[f]=i[f],l=!0),l},!1);o&&this.emit("changed")},c}(v);return No=h,No}var qo={},L_;function yb(){if(L_)return qo;L_=1;var d=ut().isNonArrayObject,v=ht(),h=v.typeErrors,u=v.clientTrackSwitchOffControl,c=v.videoContentPreferencesMode,i=v.subscriptionMode,a=v.trackPriority,o=v.trackSwitchOffMode;function l(g){var w=p(g,"options.bandwidthProfile");return!g||w||(w=p(g.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(c)},{prop:"dominantSpeakerPriority",values:Object.values(a)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(i)},{prop:"clientTrackSwitchOffControl",values:Object.values(u)},{prop:"trackSwitchOffMode",values:Object.values(o)}]),w)?w:g.video?"maxTracks"in g.video&&"clientTrackSwitchOffControl"in g.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in g.video&&"contentPreferencesMode"in g.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):y(g.video.renderDimensions):null}function f(g,w){if(!(g instanceof w.LocalAudioTrack||g instanceof w.LocalDataTrack||g instanceof w.LocalVideoTrack||g instanceof w.MediaStreamTrack))throw h.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function p(g,w,_){return _===void 0&&(_=[]),typeof g>"u"?null:g===null||!d(g)?h.INVALID_TYPE(w,"object"):_.reduce(function(E,b){var C=b.prop,N=b.type,P=b.values;if(E||!(C in g))return E;var R=g[C];return N&&typeof R!==N||N==="number"&&isNaN(R)?h.INVALID_TYPE(w+"."+C,N):Array.isArray(P)&&!P.includes(R)?h.INVALID_VALUE(w+"."+C,P):E},null)}function y(g){var w="options.bandwidthProfile.video.renderDimensions",_=p(g,w);return g?_||Object.values(a).reduce(function(E,b){return E||p(g[b],w+"."+b,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):_}return qo.validateBandwidthProfile=l,qo.validateLocalTrack=f,qo.validateObject=p,qo}var Uo,P_;function _b(){if(P_)return Uo;P_=1;var d=Uo&&Uo.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(g[_]=w[_])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),v=Iu(),h=ut(),u=h.buildLogLevels,c=h.valueToJSON,i=ht().DEFAULT_LOG_LEVEL,a=qr(),o=0,l=function(f){d(p,f);function p(y,g,w){var _=f.call(this)||this;w=Object.assign({logLevel:i},w);var E=u(w.logLevel);return Object.defineProperties(_,{_instanceId:{value:o++},_log:{value:w.log?w.log.createLog("default",_):new a("default",_,E,w.loggerName)},trackName:{enumerable:!0,value:y},trackSid:{enumerable:!0,value:g}}),_}return p.prototype.toJSON=function(){return c(this)},p.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},p}(v);return Uo=l,Uo}var yn,M_;function Wd(){if(M_)return yn;M_=1;var d=yn&&yn.__extends||function(){var l=function(f,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(y[w]=g[w])},l(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");l(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),v=yn&&yn.__read||function(l,f){var p=typeof Symbol=="function"&&l[Symbol.iterator];if(!p)return l;var y=p.call(l),g,w=[],_;try{for(;(f===void 0||f-- >0)&&!(g=y.next()).done;)w.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(p=y.return)&&p.call(y)}finally{if(_)throw _.error}}return w},h=yn&&yn.__spreadArray||function(l,f){for(var p=0,y=f.length,g=l.length;p<y;p++,g++)l[g]=f[p];return l},u=_b(),c=ht(),i=c.typeErrors,a=c.trackPriority,o=function(l){d(f,l);function f(p,y,g,w){var _=l.call(this,y.name,p.sid,w)||this;return Object.defineProperties(_,{_reemitSignalingEvent:{value:function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];return _.emit.apply(_,h([E&&E.length?"warning":"warningsCleared"],v(E)))}},_reemitTrackEvent:{value:function(){return _.emit(_.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:p},_unpublish:{value:g},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:y.kind},priority:{enumerable:!0,get:function(){return p.updatedPriority}},track:{enumerable:!0,value:y}}),["disabled","enabled"].forEach(function(E){return y.on(E,_._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(E){return p.on(E,_._reemitSignalingEvent)}),_}return f.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},f.prototype.setPriority=function(p){var y=Object.values(a);if(!y.includes(p))throw i.INVALID_VALUE("priority",y);return this._signaling.setPriority(p),this},f.prototype.unpublish=function(){var p=this;return["disabled","enabled"].forEach(function(y){return p.track.removeListener(y,p._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(y){return p._signaling.removeListener(y,p._reemitSignalingEvent)}),this._unpublish(this),this},f}(u);return yn=o,yn}var Bo,x_;function m0(){if(x_)return Bo;x_=1;var d=Bo&&Bo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Wd(),h=function(u){d(c,u);function c(i,a,o,l){return u.call(this,i,a,o,l)||this}return c.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Bo=h,Bo}var Io,D_;function y0(){if(D_)return Io;D_=1;var d=Io&&Io.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Wd(),h=function(u){d(c,u);function c(i,a,o,l){return u.call(this,i,a,o,l)||this}return c.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Io=h,Io}var Vo,j_;function _0(){if(j_)return Vo;j_=1;var d=Vo&&Vo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Wd(),h=function(u){d(c,u);function c(i,a,o,l){return u.call(this,i,a,o,l)||this}return c.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Vo=h,Vo}var _n,N_;function gb(){if(N_)return _n;N_=1;var d=_n&&_n.__extends||function(){var p=function(y,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(w[E]=_[E])},p(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(y,g);function w(){this.constructor=y}y.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}}(),v=_n&&_n.__read||function(p,y){var g=typeof Symbol=="function"&&p[Symbol.iterator];if(!g)return p;var w=g.call(p),_,E=[],b;try{for(;(y===void 0||y-- >0)&&!(_=w.next()).done;)E.push(_.value)}catch(C){b={error:C}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(b)throw b.error}}return E},h=_n&&_n.__spreadArray||function(p,y){for(var g=0,w=y.length,_=p.length;g<w;g++,_++)p[_]=y[g];return p},u=ht(),c=u.typeErrors,i=u.trackPriority,a=Ai().isIOS,o=Xd();function l(p){return function(y){d(g,y);function g(w,_,E,b,C,N,P){var R=this;return P=Object.assign({workaroundWebKitBug212780:a()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},P),R=y.call(this,_,P)||this,Object.defineProperties(R,{_isEnabled:{value:E,writable:!0},_isSwitchedOff:{value:b,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:C},_setRenderHint:{value:function(k){R._log.debug("updating render hint:",k),N(k)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:w},_workaroundWebKitBug212780:{value:P.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),R}return g.prototype.setPriority=function(w){var _=h([null],v(Object.values(i)));if(!_.includes(w))throw c.INVALID_VALUE("priority",_);return this._priority!==w&&(this._priority=w,this._setPriority(w)),this},g.prototype._setEnabled=function(w){this._isEnabled!==w&&(this._isEnabled=w,this.emit(this._isEnabled?"enabled":"disabled",this))},g.prototype._setSwitchedOff=function(w){this._isSwitchedOff!==w&&(this._isSwitchedOff=w,this.emit(w?"switchedOff":"switchedOn",this))},g.prototype.attach=function(w){var _=y.prototype.attach.call(this,w);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||f(this)),_},g.prototype.detach=function(w){var _=y.prototype.detach.call(this,w);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),_},g}(p)}function f(p){var y=p._log,g=p.kind;function w(_){_&&p._attachments.forEach(function(E){var b=p._elShims.get(E),C=E.paused&&b&&!b.pausedIntentionally();C&&(y.info("Playing inadvertently paused <"+g+"> element"),y.debug("Element:",E),y.debug("RemoteMediaTrack:",p),E.play().then(function(){y.info("Successfully played inadvertently paused <"+g+"> element"),y.debug("Element:",E),y.debug("RemoteMediaTrack:",p)}).catch(function(N){y.warn("Error while playing inadvertently paused <"+g+"> element:",{err:N,el:E,remoteMediaTrack:p})}))})}return o.onVisibilityChange(2,w),function(){o.offVisibilityChange(2,w)}}return _n=l,_n}var zo,q_;function g0(){if(q_)return zo;q_=1;var d=zo&&zo.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=rb(),h=gb(),u=h(v),c=function(i){d(a,i);function a(o,l,f,p,y,g,w){return i.call(this,o,l,f,p,y,g,w)||this}return a.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},a.prototype._start=function(){i.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},a.prototype.setPriority=function(o){return i.prototype.setPriority.call(this,o)},a}(u);return zo=c,zo}var Ho,U_;function Jd(){if(U_)return Ho;U_=1;var d=Ho&&Ho.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=_b(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i.name,i.sid,a)||this;Object.defineProperties(o,{_signaling:{value:i},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return i.isEnabled}},kind:{enumerable:!0,value:i.kind},publishPriority:{enumerable:!0,get:function(){return i.priority}},track:{enumerable:!0,get:function(){return this._track}}});var l=i.error,f=i.isEnabled,p=i.isSwitchedOff,y=i.priority;return i.on("updated",function(){if(l!==i.error){l=i.error,o.emit("subscriptionFailed",i.error);return}f!==i.isEnabled&&(f=i.isEnabled,o.track&&o.track._setEnabled(i.isEnabled),o.emit(i.isEnabled?"trackEnabled":"trackDisabled")),p!==i.isSwitchedOff&&(o._log.debug(o.trackSid+": "+(p?"OFF":"ON")+" => "+(i.isSwitchedOff?"OFF":"ON")),p=i.isSwitchedOff,o.track?(o.track._setSwitchedOff(i.isSwitchedOff),o.emit(p?"trackSwitchedOff":"trackSwitchedOn",o.track)):p&&o._log.warn("Track was not subscribed when switched Off.")),y!==i.priority&&(y=i.priority,o.emit("publishPriorityChanged",y))}),o}return c.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c.prototype._subscribed=function(i){!this._track&&i&&(this._track=i,this.emit("subscribed",i))},c.prototype._unsubscribe=function(){if(this._track){var i=this._track;this._track=null,this.emit("unsubscribed",i)}},c}(v);return Ho=h,Ho}var Fo,B_;function S0(){if(B_)return Fo;B_=1;var d=Fo&&Fo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Jd(),h=function(u){d(c,u);function c(i,a){return u.call(this,i,a)||this}return c.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Fo=h,Fo}var gn,I_;function b0(){if(I_)return gn;I_=1;var d=gn&&gn.__extends||function(){var l=function(f,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(y[w]=g[w])},l(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");l(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),v=gn&&gn.__read||function(l,f){var p=typeof Symbol=="function"&&l[Symbol.iterator];if(!p)return l;var y=p.call(l),g,w=[],_;try{for(;(f===void 0||f-- >0)&&!(g=y.next()).done;)w.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(p=y.return)&&p.call(y)}finally{if(_)throw _.error}}return w},h=gn&&gn.__spreadArray||function(l,f){for(var p=0,y=f.length,g=l.length;p<y;p++,g++)l[g]=f[p];return l},u=Kd(),c=ht(),i=c.typeErrors,a=c.trackPriority,o=function(l){d(f,l);function f(p,y,g){var w=l.call(this,y.id,"data",g)||this;return Object.defineProperties(w,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:y.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:y.maxRetransmits},ordered:{enumerable:!0,value:y.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:y.maxPacketLifeTime===null&&y.maxRetransmits===null},sid:{enumerable:!0,value:p}}),y.on("message",function(_){w.emit("message",_,w)}),w}return f.prototype.setPriority=function(p){var y=h([null],v(Object.values(a)));if(!y.includes(p))throw i.INVALID_VALUE("priority",y);return this._priority=p,this},f.prototype._setEnabled=function(){},f.prototype._setSwitchedOff=function(p){this._isSwitchedOff!==p&&(this._isSwitchedOff=p,this.emit(p?"switchedOff":"switchedOn",this))},f}(u);return gn=o,gn}var Go,V_;function T0(){if(V_)return Go;V_=1;var d=Go&&Go.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Jd(),h=function(u){d(c,u);function c(i,a){return u.call(this,i,a)||this}return c.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Go=h,Go}var Qo,z_;function w0(){if(z_)return Qo;z_=1;var d=Qo&&Qo.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=function(){function c(i){Object.defineProperties(this,{_callback:{value:i}})}return c.prototype.observe=function(){},c.prototype.unobserve=function(){},c.prototype.makeVisible=function(i){var a=this._makeFakeEntry(i,!0);this._callback([a])},c.prototype.makeInvisible=function(i){var a=this._makeFakeEntry(i,!1);this._callback([a])},c.prototype._makeFakeEntry=function(i,a){return{target:i,isIntersecting:a}},c}(),h=function(c){d(i,c);function i(){return c!==null&&c.apply(this,arguments)||this}return i}(v),u=function(c){d(i,c);function i(){return c!==null&&c.apply(this,arguments)||this}return i.prototype.resize=function(a){var o=this._makeFakeEntry(a,!0);this._callback([o])},i}(v);return Qo={NullIntersectionObserver:h,NullResizeObserver:u,NullObserver:v},Qo}var Si,H_;function k0(){if(H_)return Si;H_=1;var d=Si&&Si.__extends||function(){var _=function(E,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,N){C.__proto__=N}||function(C,N){for(var P in N)Object.prototype.hasOwnProperty.call(N,P)&&(C[P]=N[P])},_(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");_(E,b);function C(){this.constructor=E}E.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)}}(),v=Si&&Si.__read||function(_,E){var b=typeof Symbol=="function"&&_[Symbol.iterator];if(!b)return _;var C=b.call(_),N,P=[],R;try{for(;(E===void 0||E-- >0)&&!(N=C.next()).done;)P.push(N.value)}catch(k){R={error:k}}finally{try{N&&!N.done&&(b=C.return)&&b.call(C)}finally{if(R)throw R.error}}return P},h=gb(),u=sb(),c=Xd(),i=w0().NullObserver,a=Li(),o=h(u),l=50,f=function(_){d(E,_);function E(b,C,N,P,R,k,S){var T=this;return S=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},S),S=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||S.clientTrackSwitchOffControl!=="auto"?i:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||S.contentPreferencesMode!=="auto"?i:ResizeObserver},S),T=_.call(this,b,C,N,P,R,k,S)||this,Object.defineProperties(T,{_enableDocumentVisibilityTurnOff:{value:S.enableDocumentVisibilityTurnOff===!0&&S.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:S.clientTrackSwitchOffControl},_contentPreferencesMode:{value:S.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new a(function(){T._setRenderHint({enabled:!1})},l,!1)},_resizeObserver:{value:new S.ResizeObserver(function(O){var q=O.find(function(U){return!T._invisibleElements.has(U.target)});q&&g(T)})},_intersectionObserver:{value:new S.IntersectionObserver(function(O){var q=!1;O.forEach(function(U){var F=!T._invisibleElements.has(U.target);F!==U.isIntersecting&&(U.isIntersecting?(T._log.debug("intersectionObserver detected: Off => On"),T._invisibleElements.delete(U.target)):(T._log.debug("intersectionObserver detected: On => Off"),T._invisibleElements.add(U.target)),q=!0)}),q&&(y(T),g(T))},{threshold:.25})}}),T}return E.prototype._start=function(b){var C=_.prototype._start.call(this,b);return y(this),C},E.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},E.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},E.prototype.setContentPreferences=function(b){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return b.renderDimensions&&this._setRenderHint({renderDimensions:b.renderDimensions}),this},E.prototype._unObservePip=function(b){var C=this._elToPipCallbacks.get(b);C&&(b.removeEventListener("enterpictureinpicture",C.onEnterPip),b.removeEventListener("leavepictureinpicture",C.onLeavePip),this._elToPipCallbacks.delete(b))},E.prototype._observePip=function(b){var C=this,N=this._elToPipCallbacks.get(b);if(!N){var P=function(S){return C._onEnterPip(S,b)},R=function(S){return C._onLeavePip(S,b)},k=function(S){return C._onResizePip(S,b)};b.addEventListener("enterpictureinpicture",P),b.addEventListener("leavepictureinpicture",R),this._elToPipCallbacks.set(b,{onEnterPip:P,onLeavePip:R,onResizePip:k})}},E.prototype._onEnterPip=function(b,C){this._log.debug("onEnterPip");var N=b.pictureInPictureWindow;this._elToPipWindows.set(C,N);var P=this._elToPipCallbacks.get(C).onResizePip;N.addEventListener("resize",P),y(this)},E.prototype._onLeavePip=function(b,C){this._log.debug("onLeavePip"),this._elToPipWindows.delete(C);var N=this._elToPipCallbacks.get(C).onResizePip,P=b.pictureInPictureWindow;P.removeEventListener("resize",N),y(this)},E.prototype._onResizePip=function(){g(this)},E.prototype.attach=function(b){var C=_.prototype.attach.call(this,b);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(C),this._intersectionObserver.observe(C),this._resizeObserver.observe(C),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||w(this)),this._observePip(C),C},E.prototype.detach=function(b){var C=this,N=_.prototype.detach.call(this,b),P=Array.isArray(N)?N:[N];return P.forEach(function(R){C._intersectionObserver.unobserve(R),C._resizeObserver.unobserve(R),C._invisibleElements.delete(R),C._unObservePip(R)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),y(this),g(this),N},E.prototype.addProcessor=function(){return _.prototype.addProcessor.apply(this,arguments)},E.prototype.removeProcessor=function(){return _.prototype.removeProcessor.apply(this,arguments)},E.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},E.prototype.setPriority=function(b){return _.prototype.setPriority.call(this,b)},E}(o);function p(_){if(!("documentPictureInPicture"in globalThis))return!1;var E=globalThis.documentPictureInPicture.window;if(!E)return!1;var b=new WeakSet(E.document.querySelectorAll("video"));return _._getAllAttachedElements().some(function(C){return b.has(C)})}function y(_){if(_._clientTrackSwitchOffControl==="auto"){var E=_._getAllAttachedElements().filter(function(N){return!_._invisibleElements.has(N)}),b=_._getAllAttachedElements().filter(function(N){return _._elToPipWindows.has(N)}),C=b.length>0||p(_)||document.visibilityState==="visible"&&E.length>0;C===!0?(_._turnOffTimer.clear(),_._setRenderHint({enabled:!0})):_._turnOffTimer.isSet||_._turnOffTimer.start()}}function g(_){if(_._contentPreferencesMode==="auto"){var E=_._getAllAttachedElements().filter(function(T){return!_._invisibleElements.has(T)}),b=_._getAllAttachedElements().map(function(T){var O=_._elToPipWindows.get(T);return O?{clientHeight:O.height,clientWidth:O.width}:{clientHeight:0,clientWidth:0}}),C=E.concat(b);if(C.length>0){var N=v(C.sort(function(T,O){return O.clientHeight+O.clientWidth-T.clientHeight-T.clientWidth-1}),1),P=N[0],R=P.clientHeight,k=P.clientWidth,S={height:R,width:k};_._setRenderHint({renderDimensions:S})}}}function w(_){function E(){y(_)}return c.onVisibilityChange(1,E),function(){c.offVisibilityChange(1,E)}}return Si=f,Si}var Yo,F_;function E0(){if(F_)return Yo;F_=1;var d=Yo&&Yo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Jd(),h=function(u){d(c,u);function c(i,a){return u.call(this,i,a)||this}return c.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},c}(v);return Yo=h,Yo}var Sn,G_;function Sb(){if(G_)return Sn;G_=1;var d=Sn&&Sn.__extends||function(){var C=function(N,P){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,k){R.__proto__=k}||function(R,k){for(var S in k)Object.prototype.hasOwnProperty.call(k,S)&&(R[S]=k[S])},C(N,P)};return function(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");C(N,P);function R(){this.constructor=N}N.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}}(),v=Sn&&Sn.__read||function(C,N){var P=typeof Symbol=="function"&&C[Symbol.iterator];if(!P)return C;var R=P.call(C),k,S=[],T;try{for(;(N===void 0||N-- >0)&&!(k=R.next()).done;)S.push(k.value)}catch(O){T={error:O}}finally{try{k&&!k.done&&(P=R.return)&&P.call(R)}finally{if(T)throw T.error}}return S},h=Sn&&Sn.__spreadArray||function(C,N){for(var P=0,R=N.length,k=C.length;P<R;P++,k++)C[k]=N[P];return C},u=Iu(),c=g0(),i=S0(),a=b0(),o=T0(),l=k0(),f=E0(),p=ut(),y=0,g=function(C){d(N,C);function N(P,R){var k=C.call(this)||this;R=Object.assign({RemoteAudioTrack:c,RemoteAudioTrackPublication:i,RemoteDataTrack:a,RemoteDataTrackPublication:o,RemoteVideoTrack:l,RemoteVideoTrackPublication:f,tracks:[]},R);var S=w(R.tracks),T=R.log.createLog("default",k),O=new Map(S.audioTracks),q=new Map(S.dataTracks),U=new Map(S.tracks),F=new Map(S.videoTracks);return Object.defineProperties(k,{_RemoteAudioTrack:{value:R.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:R.RemoteAudioTrackPublication},_RemoteDataTrack:{value:R.RemoteDataTrack},_RemoteDataTrackPublication:{value:R.RemoteDataTrackPublication},_RemoteVideoTrack:{value:R.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:R.RemoteVideoTrackPublication},_audioTracks:{value:O},_dataTracks:{value:q},_instanceId:{value:++y},_clientTrackSwitchOffControl:{value:R.clientTrackSwitchOffControl},_contentPreferencesMode:{value:R.contentPreferencesMode},_log:{value:T},_signaling:{value:P},_tracks:{value:U},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:F},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return P.identity}},networkQualityLevel:{enumerable:!0,get:function(){return P.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return P.networkQualityStats}},sid:{enumerable:!0,get:function(){return P.sid}},state:{enumerable:!0,get:function(){return P.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:R.MediaStream},_mapMediaElement:{value:R.mapMediaElement},_disposeMediaElement:{value:R.disposeMediaElement}}),k._tracks.forEach(E.bind(null,k)),P.on("networkQualityLevelChanged",function(){return k.emit("networkQualityLevelChanged",k.networkQualityLevel,k.networkQualityStats&&(k.networkQualityStats.audio||k.networkQualityStats.video)?k.networkQualityStats:null)}),_(k,P),T.info("Created a new Participant"+(k.identity?": "+k.identity:"")),k}return N.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},N.prototype._getTrackPublicationEvents=function(){return[]},N.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},N.prototype._addTrack=function(P,R){var k=this._log;if(this._tracks.has(R))return null;this._tracks.set(R,P);var S={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[P.kind];return S.set(R,P),E(this,P,R),k.info("Added a new "+p.trackClass(P)+":",R),k.debug(p.trackClass(P)+":",P),P},N.prototype._addTrackPublication=function(P){var R=this._log;if(this.tracks.has(P.trackSid))return null;this.tracks.set(P.trackSid,P);var k={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[P.kind];return k.set(P.trackSid,P),b(this,P),R.info("Added a new "+p.trackPublicationClass(P)+":",P.trackSid),R.debug(p.trackPublicationClass(P)+":",P),P},N.prototype._handleTrackSignalingEvents=function(){var P=this,R=P._log,k=P._clientTrackSwitchOffControl,S=P._contentPreferencesMode,T=P._MediaStream,O=P._mapMediaElement,q=P._disposeMediaElement,U=this;if(this.state==="disconnected")return;var F=this._RemoteAudioTrack,G=this._RemoteAudioTrackPublication,B=this._RemoteVideoTrack,z=this._RemoteVideoTrackPublication,D=this._RemoteDataTrack,j=this._RemoteDataTrackPublication,Q=this._signaling;function Z(L){var I={audio:G,data:j,video:z}[L.kind],W=new I(L,{log:R});U._addTrackPublication(W);var ie=L.isSubscribed;ie&&A(L),U._trackSignalingUpdatedEventCallbacks.set(L.sid,function(){if(ie!==L.isSubscribed){if(ie=L.isSubscribed,ie){A(L);return}x(L)}}),L.on("updated",U._trackSignalingUpdatedEventCallbacks.get(L.sid))}function K(L){L.isSubscribed&&L.setTrackTransceiver(null);var I=U._trackSignalingUpdatedEventCallbacks.get(L.sid);I&&(L.removeListener("updated",I),U._trackSignalingUpdatedEventCallbacks.delete(L.sid));var W=U.tracks.get(L.sid);W&&U._removeTrackPublication(W)}function A(L){var I=L.isEnabled,W=L.name,ie=L.kind,$=L.sid,ae=L.trackTransceiver,pe=L.isSwitchedOff,Te={audio:F,video:B,data:D}[ie],xe=U.tracks.get($);if(!(!Te||ie!==ae.kind)){var Ee={log:R,name:W,clientTrackSwitchOffControl:k,contentPreferencesMode:S,mapMediaElement:O,disposeMediaElement:q};T&&(Ee.MediaStream=T);var Ce=function(Oe){return Q.updateSubscriberTrackPriority($,Oe)},Le=function(Oe){L.isSubscribed&&Q.updateTrackRenderHint($,Oe)},Pe=ie==="data"?new Te($,ae,Ee):new Te($,ae,I,pe,Ce,Le,Ee);U._addTrack(Pe,xe,ae.id)}}function x(L){var I=v(Array.from(U._tracks.entries()).find(function(ae){var pe=v(ae,2),Te=pe[1];return Te.sid===L.sid}),2),W=I[0],ie=I[1],$=U.tracks.get(L.sid);ie&&U._removeTrack(ie,$,W)}Q.on("trackAdded",Z),Q.on("trackRemoved",K),Q.tracks.forEach(Z),Q.on("stateChanged",function L(I){I==="disconnected"?(R.debug("Removing event listeners"),Q.removeListener("stateChanged",L),Q.removeListener("trackAdded",Z),Q.removeListener("trackRemoved",K)):I==="connected"&&(R.info("reconnected"),setTimeout(function(){return U.emit("reconnected")},0))})},N.prototype._removeTrack=function(P,R){if(!this._tracks.has(R))return null;this._tracks.delete(R);var k={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[P.kind];k.delete(R);var S=this._trackEventReemitters.get(R)||new Map;S.forEach(function(O,q){P.removeListener(q,O)});var T=this._log;return T.info("Removed a "+p.trackClass(P)+":",R),T.debug(p.trackClass(P)+":",P),P},N.prototype._removeTrackPublication=function(P){if(P=this.tracks.get(P.trackSid),!P)return null;this.tracks.delete(P.trackSid);var R={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[P.kind];R.delete(P.trackSid);var k=this._trackPublicationEventReemitters.get(P.trackSid)||new Map;k.forEach(function(T,O){P.removeListener(O,T)});var S=this._log;return S.info("Removed a "+p.trackPublicationClass(P)+":",P.trackSid),S.debug(p.trackPublicationClass(P)+":",P),P},N.prototype.toJSON=function(){return p.valueToJSON(this)},N}(u);function w(C){var N=C.map(function(S){return[S.id,S]}),P=N.filter(function(S){return S[1].kind==="audio"}),R=N.filter(function(S){return S[1].kind==="video"}),k=N.filter(function(S){return S[1].kind==="data"});return{audioTracks:P,dataTracks:k,tracks:N,videoTracks:R}}function _(C,N){var P=C._log;C.state!=="disconnected"&&N.on("stateChanged",function R(k){P.debug("Transitioned to state:",k),C.emit(k,C),k==="disconnected"&&(P.debug("Removing Track event reemitters"),N.removeListener("stateChanged",R),C._tracks.forEach(function(S){var T=C._trackEventReemitters.get(S.id);S&&T&&T.forEach(function(O,q){S.removeListener(q,O)})}),N.tracks.forEach(function(S){var T=C._tracks.get(S.id),O=C._trackEventReemitters.get(S.id);T&&O&&O.forEach(function(q,U){T.removeListener(U,q)})}),C._trackEventReemitters.clear(),C.tracks.forEach(function(S){C._trackPublicationEventReemitters.get(S.trackSid).forEach(function(T,O){S.removeListener(O,T)})}),C._trackPublicationEventReemitters.clear())})}function E(C,N,P){var R=new Map;C.state!=="disconnected"&&(C._getTrackEvents().forEach(function(k){var S=k[0],T=k[1];R.set(S,function(){var O=[T].concat([].slice.call(arguments));return C.emit.apply(C,h([],v(O)))}),N.on(S,R.get(S))}),C._trackEventReemitters.set(P,R))}function b(C,N){var P=new Map;C.state!=="disconnected"&&(C._getTrackPublicationEvents().forEach(function(R){var k=v(R,2),S=k[0],T=k[1];P.set(S,function(){for(var O=[],q=0;q<arguments.length;q++)O[q]=arguments[q];C.emit.apply(C,h(h([T],v(O)),[N]))}),N.on(S,P.get(S))}),C._trackPublicationEventReemitters.set(N.trackSid,P))}return Sn=g,Sn}var Ko,Q_;function O0(){if(Q_)return Ko;Q_=1;var d=Ko&&Ko.__extends||function(){var R=function(k,S){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,O){T.__proto__=O}||function(T,O){for(var q in O)Object.prototype.hasOwnProperty.call(O,q)&&(T[q]=O[q])},R(k,S)};return function(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");R(k,S);function T(){this.constructor=k}k.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)}}(),v=Ci().MediaStreamTrack,h=ut(),u=h.asLocalTrack,c=h.asLocalTrackPublication,i=h.trackClass,a=ht(),o=a.typeErrors,l=a.trackPriority,f=yb().validateLocalTrack,p=ha(),y=p.LocalAudioTrack,g=p.LocalDataTrack,w=p.LocalVideoTrack,_=m0(),E=y0(),b=_0(),C=Sb(),N=function(R){d(k,R);function k(S,T,O){var q=this;O=Object.assign({LocalAudioTrack:y,LocalVideoTrack:w,LocalDataTrack:g,MediaStreamTrack:v,LocalAudioTrackPublication:_,LocalVideoTrackPublication:b,LocalDataTrackPublication:E,shouldStopLocalTracks:!1,tracks:T},O);var U=O.shouldStopLocalTracks?new Set(T.filter(function(F){return F.kind!=="data"})):new Set;return q=R.call(this,S,O)||this,Object.defineProperties(q,{_eventObserver:{value:O.eventObserver},_LocalAudioTrack:{value:O.LocalAudioTrack},_LocalDataTrack:{value:O.LocalDataTrack},_LocalVideoTrack:{value:O.LocalVideoTrack},_MediaStreamTrack:{value:O.MediaStreamTrack},_LocalAudioTrackPublication:{value:O.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:O.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:O.LocalVideoTrackPublication},_tracksToStop:{value:U},signalingRegion:{enumerable:!0,get:function(){return S.signalingRegion}}}),q._handleTrackSignalingEvents(),q}return k.prototype._addTrack=function(S,T,O){var q=R.prototype._addTrack.call(this,S,T);return q&&this.state!=="disconnected"&&this._addLocalTrack(S,O),q},k.prototype._addLocalTrack=function(S,T){var O,q=(O=S.noiseCancellation)===null||O===void 0?void 0:O.vendor;this._signaling.addTrack(S._trackSender,S.name,T,q),this._log.info("Added a new "+i(S,!0)+":",S.id),this._log.debug(i(S,!0)+":",S)},k.prototype._removeTrack=function(S,T){var O=R.prototype._removeTrack.call(this,S,T);return O&&this.state!=="disconnected"&&(this._signaling.removeTrack(S._trackSender),this._log.info("Removed a "+i(S,!0)+":",S.id),this._log.debug(i(S,!0)+":",S)),O},k.prototype._getTrackEvents=function(){return R.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},k.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},k.prototype._handleTrackSignalingEvents=function(){var S=this,T=this._log;if(this.state!=="disconnected"){var O=function(G){var B=S._signaling.getPublication(G._trackSender);B&&(B.disable(),T.debug("Disabled the "+i(G,!0)+":",G.id))},q=function(G){var B=S._signaling.getPublication(G._trackSender);B&&(B.enable(),T.debug("Enabled the "+i(G,!0)+":",G.id))},U=function(G){var B=S._signaling.getPublication(G._trackSender);return B&&B.stop(),B},F=function(G){T.debug("Transitioned to state:",G),G==="disconnected"?(T.debug("Removing LocalTrack event listeners"),S._signaling.removeListener("stateChanged",F),S.removeListener("trackDisabled",O),S.removeListener("trackEnabled",q),S.removeListener("trackStopped",U),S._tracks.forEach(function(B){var z=U(B);z&&B._trackSender.removeClone(z._trackTransceiver)}),T.info("LocalParticipant disconnected. Stopping "+S._tracksToStop.size+" automatically-acquired LocalTracks"),S._tracksToStop.forEach(function(B){B.stop()})):G==="connected"&&(T.info("reconnected"),setTimeout(function(){return S.emit("reconnected")},0))};this.on("trackDisabled",O),this.on("trackEnabled",q),this.on("trackStopped",U),this._signaling.on("stateChanged",F),this._tracks.forEach(function(G){S._addLocalTrack(G,l.PRIORITY_STANDARD),S._getOrCreateLocalTrackPublication(G).catch(function(B){T.warn("Failed to get or create LocalTrackPublication for "+G+":",B)})})}},k.prototype._getOrCreateLocalTrackPublication=function(S){var T=P(this.tracks,S);if(T)return Promise.resolve(T);var O=this._log,q=this,U=this._signaling.getPublication(S._trackSender);return U?new Promise(function(F,G){function B(){var z=U.error;if(z){U.removeListener("updated",B),O.warn("Failed to publish the "+i(S,!0)+": "+z.message),q._removeTrack(S,S.id),setTimeout(function(){q.emit("trackPublicationFailed",z,S)}),G(z);return}if(!q._tracks.has(S.id)){U.removeListener("updated",B),G(new Error("The "+S+" was unpublished"));return}var D=U.sid;if(D){U.removeListener("updated",B);var j={log:O,LocalAudioTrackPublication:q._LocalAudioTrackPublication,LocalDataTrackPublication:q._LocalDataTrackPublication,LocalVideoTrackPublication:q._LocalVideoTrackPublication};T=P(q.tracks,S);var Q=function(x){return q.emit("trackWarning",x,T)},Z=function(){return q.emit("trackWarningsCleared",T)},K=function(x){T.removeListener("trackWarning",Q),T.removeListener("trackWarningsCleared",Z),q.unpublishTrack(x.track)};T||(T=c(S,U,K,j),q._addTrackPublication(T)),T.on("warning",Q),T.on("warningsCleared",Z);var A=q._signaling.state;(A==="connected"||A==="connecting")&&(S._processorEventObserver&&S._processorEventObserver.on("event",function(x){q._eventObserver.emit("event",{name:x.name,payload:x.data,group:"video-processor",level:"info"})}),S.processedTrack&&(S._captureFrames(),S._setSenderMediaStreamTrack(!0))),A==="connected"&&setTimeout(function(){q.emit("trackPublished",T)}),F(T)}}U.on("updated",B)}):Promise.reject(new Error("Unexpected error: The "+S+" cannot be published"))},k.prototype.publishTrack=function(S,T){var O=P(this.tracks,S);if(O)return Promise.resolve(O);T=Object.assign({log:this._log,priority:l.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},T);var q;try{q=u(S,T)}catch(z){return Promise.reject(z)}var U=q.noiseCancellation,F=this._signaling.audioProcessors;U&&!F.includes(U.vendor)&&(this._log.warn(U.vendor+" is not supported in this room. disabling it permanently"),U.disablePermanently());var G=Object.values(l);if(!G.includes(T.priority))return Promise.reject(o.INVALID_VALUE("LocalTrackPublishOptions.priority",G));var B=this._addTrack(q,q.id,T.priority)||this._tracks.get(q.id);return this._getOrCreateLocalTrackPublication(B)},k.prototype.publishTracks=function(S){if(!Array.isArray(S))throw o.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(S.map(this.publishTrack,this))},k.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},k.prototype.setNetworkQualityConfiguration=function(S){if(typeof S!="object"||S===null)throw o.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(T){if(T in S&&(typeof S[T]!="number"||isNaN(S[T])))throw o.INVALID_TYPE("networkQualityConfiguration."+T,"number")}),this._signaling.setNetworkQualityConfiguration(S),this},k.prototype.setParameters=function(S){if(typeof S<"u"&&typeof S!="object")throw o.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(S){if(this._signaling.getParameters().adaptiveSimulcast&&S.maxVideoBitrate)throw o.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(T){if(typeof S[T]<"u"&&typeof S[T]!="number"&&S[T]!==null)throw o.INVALID_TYPE("encodingParameters."+T,"number, null or undefined")})}else S===null&&(S={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(S),this},k.prototype.unpublishTrack=function(S){f(S,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var T=this._tracks.get(S.id);if(!T)return null;var O=this._signaling.getPublication(T._trackSender);if(O.publishFailed(new Error("The "+T+" was unpublished")),T=this._removeTrack(T,T.id),!T)return null;var q=P(this.tracks,T);return q&&this._removeTrackPublication(q),q},k.prototype.unpublishTracks=function(S){var T=this;if(!Array.isArray(S))throw o.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return S.reduce(function(O,q){var U=T.unpublishTrack(q);return U?O.concat(U):O},[])},k}(C);function P(R,k){return Array.from(R.values()).find(function(S){return S.track===k||S.track.mediaStreamTrack===k})||null}return Ko=N,Ko}var cd,Y_;function R0(){if(Y_)return cd;Y_=1;var d=function(){function v(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return v.prototype.connect=function(){},v.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},v.prototype.publish=function(){return this._connected},v}();return cd=d,cd}var bi,K_;function C0(){if(K_)return bi;K_=1;var d=bi&&bi.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(g[_]=w[_])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),v=bi&&bi.__read||function(f,p){var y=typeof Symbol=="function"&&f[Symbol.iterator];if(!y)return f;var g=y.call(f),w,_=[],E;try{for(;(p===void 0||p-- >0)&&!(w=g.next()).done;)_.push(w.value)}catch(b){E={error:b}}finally{try{w&&!w.done&&(y=g.return)&&y.call(g)}finally{if(E)throw E.error}}return _},h=er().EventEmitter,u=ht(),c=u.DEFAULT_NQ_LEVEL_LOCAL,i=u.DEFAULT_NQ_LEVEL_REMOTE,a=u.MAX_NQ_LEVEL,o=ut().inRange,l=function(f){d(p,f);function p(y){var g=f.call(this)||this;return y=Object.assign({local:c,remote:i},y),Object.defineProperties(g,{local:{value:o(y.local,c,a)?y.local:c,writable:!0},remote:{value:o(y.remote,i,a)?y.remote:i,writable:!0}}),g}return p.prototype.update=function(y){var g=this;y=Object.assign({local:this.local,remote:this.remote},y),[["local",c,3],["remote",i,3]].forEach(function(w){var _=v(w,3),E=_[0],b=_[1],C=_[2];g[E]=typeof y[E]=="number"&&o(y[E],b,C)?y[E]:b})},p}(h);return bi=l,bi}var bn,X_;function A0(){if(X_)return bn;X_=1;var d=bn&&bn.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=bn&&bn.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var l=o.call(i),f,p=[],y;try{for(;(a===void 0||a-- >0)&&!(f=l.next()).done;)p.push(f.value)}catch(g){y={error:g}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(y)throw y.error}}return p},h=bn&&bn.__spreadArray||function(i,a){for(var o=0,l=a.length,f=i.length;o<l;o++,f++)i[f]=a[o];return i},u=Sb(),c=function(i){d(a,i);function a(o,l){var f=i.call(this,o,l)||this;return f._handleTrackSignalingEvents(),f.once("disconnected",f._unsubscribeTracks.bind(f)),f}return a.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},a.prototype._addTrack=function(o,l,f){return i.prototype._addTrack.call(this,o,f)?(l._subscribed(o),this.emit("trackSubscribed",o,l),o):null},a.prototype._addTrackPublication=function(o){var l=i.prototype._addTrackPublication.call(this,o);return l?(this.emit("trackPublished",l),l):null},a.prototype._getTrackPublicationEvents=function(){return h(h([],v(i.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},a.prototype._unsubscribeTracks=function(){var o=this;this.tracks.forEach(function(l){if(l.isSubscribed){var f=l.track;l._unsubscribe(),o.emit("trackUnsubscribed",f,l)}})},a.prototype._removeTrack=function(o,l,f){var p=this._tracks.get(f);return p?(i.prototype._removeTrack.call(this,p,f),l._unsubscribe(),this.emit("trackUnsubscribed",p,l),p):null},a.prototype._removeTrackPublication=function(o){this._signaling.clearTrackHint(o.trackSid);var l=i.prototype._removeTrackPublication.call(this,o);return l?(this.emit("trackUnpublished",l),l):null},a}(u);return bn=c,bn}var ld,Z_;function bb(){if(Z_)return ld;Z_=1;var d=function(){function v(h,u){if(typeof h!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:h,enumerable:!0},trackSid:{value:u.trackSid,enumerable:!0},timestamp:{value:u.timestamp,enumerable:!0},ssrc:{value:u.ssrc,enumerable:!0},packetsLost:{value:typeof u.packetsLost=="number"?u.packetsLost:null,enumerable:!0},codec:{value:typeof u.codecName=="string"?u.codecName:null,enumerable:!0}})}return v}();return ld=d,ld}var Xo,W_;function Tb(){if(W_)return Xo;W_=1;var d=Xo&&Xo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=bb(),h=function(u){d(c,u);function c(i,a,o){var l=u.call(this,i,a)||this;return Object.defineProperties(l,{bytesSent:{value:typeof a.bytesSent=="number"?a.bytesSent:o?0:null,enumerable:!0},packetsSent:{value:typeof a.packetsSent=="number"?a.packetsSent:o?0:null,enumerable:!0},roundTripTime:{value:typeof a.roundTripTime=="number"?a.roundTripTime:o?0:null,enumerable:!0}}),l}return c}(v);return Xo=h,Xo}var Zo,J_;function L0(){if(J_)return Zo;J_=1;var d=Zo&&Zo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Tb(),h=function(u){d(c,u);function c(i,a,o){var l=u.call(this,i,a,o)||this;return Object.defineProperties(l,{audioLevel:{value:typeof a.audioInputLevel=="number"?a.audioInputLevel:null,enumerable:!0},jitter:{value:typeof a.jitter=="number"?a.jitter:null,enumerable:!0}}),l}return c}(v);return Zo=h,Zo}var Wo,$_;function P0(){if($_)return Wo;$_=1;var d=Wo&&Wo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Tb(),h=function(u){d(c,u);function c(i,a,o){var l=u.call(this,i,a,o)||this,f=null;typeof a.frameWidthInput=="number"&&typeof a.frameHeightInput=="number"&&(f={},Object.defineProperties(f,{width:{value:a.frameWidthInput,enumerable:!0},height:{value:a.frameHeightInput,enumerable:!0}}));var p=null;return typeof a.frameWidthSent=="number"&&typeof a.frameHeightSent=="number"&&(p={},Object.defineProperties(p,{width:{value:a.frameWidthSent,enumerable:!0},height:{value:a.frameHeightSent,enumerable:!0}})),Object.defineProperties(l,{captureDimensions:{value:f,enumerable:!0},dimensions:{value:p,enumerable:!0},captureFrameRate:{value:typeof a.frameRateInput=="number"?a.frameRateInput:null,enumerable:!0},frameRate:{value:typeof a.frameRateSent=="number"?a.frameRateSent:null,enumerable:!0}}),l}return c}(v);return Wo=h,Wo}var Jo,eg;function wb(){if(eg)return Jo;eg=1;var d=Jo&&Jo.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=bb(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,a)||this;return Object.defineProperties(o,{bytesReceived:{value:typeof a.bytesReceived=="number"?a.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof a.packetsReceived=="number"?a.packetsReceived:null,enumerable:!0}}),o}return c}(v);return Jo=h,Jo}var $o,tg;function M0(){if(tg)return $o;tg=1;var d=$o&&$o.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=wb(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,a)||this;return Object.defineProperties(o,{audioLevel:{value:typeof a.audioOutputLevel=="number"?a.audioOutputLevel:null,enumerable:!0},jitter:{value:typeof a.jitter=="number"?a.jitter:null,enumerable:!0}}),o}return c}(v);return $o=h,$o}var eu,rg;function x0(){if(rg)return eu;rg=1;var d=eu&&eu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=wb(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,a)||this,l=null;return typeof a.frameWidthReceived=="number"&&typeof a.frameHeightReceived=="number"&&(l={},Object.defineProperties(l,{width:{value:a.frameWidthReceived,enumerable:!0},height:{value:a.frameHeightReceived,enumerable:!0}})),Object.defineProperties(o,{dimensions:{value:l,enumerable:!0},frameRate:{value:typeof a.frameRateReceived=="number"?a.frameRateReceived:null,enumerable:!0}}),o}return c}(v);return eu=h,eu}var sd,ng;function kb(){if(ng)return sd;ng=1;var d=L0(),v=P0(),h=M0(),u=x0(),c=function(){function i(a,o,l){if(typeof a!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:a,enumerable:!0},localAudioTrackStats:{value:o.localAudioTrackStats.map(function(f){return new d(f.trackId,f,l)}),enumerable:!0},localVideoTrackStats:{value:o.localVideoTrackStats.map(function(f){return new v(f.trackId,f,l)}),enumerable:!0},remoteAudioTrackStats:{value:o.remoteAudioTrackStats.map(function(f){return new h(f.trackId,f)}),enumerable:!0},remoteVideoTrackStats:{value:o.remoteVideoTrackStats.map(function(f){return new u(f.trackId,f)}),enumerable:!0}})}return i}();return sd=c,sd}var Tn,ig;function D0(){if(ig)return Tn;ig=1;var d=Tn&&Tn.__extends||function(){var C=function(N,P){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,k){R.__proto__=k}||function(R,k){for(var S in k)Object.prototype.hasOwnProperty.call(k,S)&&(R[S]=k[S])},C(N,P)};return function(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");C(N,P);function R(){this.constructor=N}N.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}}(),v=Tn&&Tn.__read||function(C,N){var P=typeof Symbol=="function"&&C[Symbol.iterator];if(!P)return C;var R=P.call(C),k,S=[],T;try{for(;(N===void 0||N-- >0)&&!(k=R.next()).done;)S.push(k.value)}catch(O){T={error:O}}finally{try{k&&!k.done&&(P=R.return)&&P.call(R)}finally{if(T)throw T.error}}return S},h=Tn&&Tn.__spreadArray||function(C,N){for(var P=0,R=N.length,k=C.length;P<R;P++,k++)C[k]=N[P];return C},u=Iu(),c=A0(),i=kb(),a=ut(),o=a.flatMap,l=a.valueToJSON,f=0,p=function(C){d(N,C);function N(P,R,k){var S=C.call(this)||this,T=k.log.createLog("default",S),O=new Map;return Object.defineProperties(S,{_log:{value:T},_clientTrackSwitchOffControl:{value:k.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:k.contentPreferencesMode||"disabled"},_instanceId:{value:++f},_options:{value:k},_participants:{value:O},_signaling:{value:R},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(R.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return R.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:P},name:{enumerable:!0,value:R.name},participants:{enumerable:!0,value:O},sid:{enumerable:!0,value:R.sid},state:{enumerable:!0,get:function(){return R.state}},mediaRegion:{enumerable:!0,value:R.mediaRegion}}),_(S,P),E(S,R.recording),b(S,R),y(S),T.info("Created a new Room:",S.name),T.debug("Initial RemoteParticipants:",Array.from(S._participants.values())),S}return N.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},N.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},N.prototype.getStats=function(){var P=this;return this._signaling.getStats().then(function(R){return Array.from(R).map(function(k){var S=v(k,2),T=S[0],O=S[1];return new i(T,Object.assign({},O,{localAudioTrackStats:g(P,O.localAudioTrackStats),localVideoTrackStats:g(P,O.localVideoTrackStats)}))})})},N.prototype.refreshInactiveMedia=function(){var P=this.localParticipant.tracks,R=Array.from(P.values()).filter(function(q){var U=q.track.kind;return U!=="data"}).map(function(q){var U=q.track;return U}),k=o(this.participants,function(q){return Array.from(q.tracks.values())}).filter(function(q){var U=q.track;return U&&U.kind!=="data"}).map(function(q){var U=q.track;return U}),S=R.concat(k),T=new Event("unmute");R.forEach(function(q){var U=q.isMuted,F=q.mediaStreamTrack;U&&F.dispatchEvent(T)});var O=new Event("pause");return S.forEach(function(q){var U=q._attachments,F=q._elShims;return U.forEach(function(G){var B=F.get(G),z=G.paused&&B&&!B.pausedIntentionally();z&&G.dispatchEvent(O)})}),this},N.prototype.toJSON=function(){return l(this)},N}(u);function y(C){var N=C.localParticipant._signaling.audioProcessors;C.localParticipant.audioTracks.forEach(function(P){var R=P.track,k=R.noiseCancellation;k&&!N.includes(k.vendor)&&(C._log.warn(k.vendor+" is not supported in this room. disabling it permanently"),k.disablePermanently())})}function g(C,N){var P=C.localParticipant._signaling;return N.reduce(function(R,k){var S=P.tracks.get(k.trackId),T=P.getSender(S);return T?[Object.assign({},k,{trackId:T.id})].concat(R):R},[])}function w(C,N){var P=C._log,R=C._clientTrackSwitchOffControl,k=C._contentPreferencesMode,S=C._options,T=S.MediaStream,O=S.mapMediaElement,q=S.disposeMediaElement,U=new c(N,{log:P,clientTrackSwitchOffControl:R,contentPreferencesMode:k,MediaStream:T,mapMediaElement:O,disposeMediaElement:q});P.info("A new RemoteParticipant connected:",U),C._participants.set(U.sid,U),C.emit("participantConnected",U);var F=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(G){var B=v(Array.isArray(G)?G:[G,G],2),z=B[0],D=B[1];function j(){var Q=[].slice.call(arguments);Q.unshift(D),Q.push(U),C.emit.apply(C,h([],v(Q)))}return U.on(z,j),[z,j]});U.once("disconnected",function(){var B=C.dominantSpeaker;P.info("RemoteParticipant disconnected:",U),C._participants.delete(U.sid),F.forEach(function(z){U.removeListener(z[0],z[1])}),C.emit("participantDisconnected",U),U===B&&C.emit("dominantSpeakerChanged",C.dominantSpeaker)})}function _(C,N){var P=["trackWarning","trackWarningsCleared"].map(function(R){return{eventName:R,handler:function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];return C.emit.apply(C,h([R],v(h(h([],v(k)),[N]))))}}});P.forEach(function(R){var k=R.eventName,S=R.handler;return N.on(k,S)}),C.once("disconnected",function(){return P.forEach(function(R){var k=R.eventName,S=R.handler;return N.removeListener(k,S)})})}function E(C,N){N.on("updated",function(){var R=N.isEnabled;C._log.info("Recording "+(R?"started":"stopped")),C.emit("recording"+(R?"Started":"Stopped"))})}function b(C,N){var P=C._log;P.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),N.participants.forEach(w.bind(null,C)),P.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),N.on("participantConnected",w.bind(null,C)),N.on("dominantSpeakerChanged",function(){return C.emit("dominantSpeakerChanged",C.dominantSpeaker)}),N.on("stateChanged",function R(k,S){switch(P.info("Transitioned to state:",k),k){case"disconnected":C.participants.forEach(function(T){T._unsubscribeTracks()}),C.emit(k,C,S),C.localParticipant.tracks.forEach(function(T){T.unpublish()}),N.removeListener("stateChanged",R);break;case"reconnecting":setTimeout(function(){return C.emit("reconnecting",S)},0);break;default:setTimeout(function(){return C.emit("reconnected")},0)}})}return Tn=p,Tn}var fd,ag;function Eb(){if(ag)return fd;ag=1;var d=function(){function v(h){Object.defineProperties(this,{_min:{value:h.min||100},_max:{value:h.max||1e4},_jitter:{value:h.jitter>0&&h.jitter<=1?h.jitter:0},_factor:{value:h.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var u=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var c=Math.random(),i=Math.floor(c*this._jitter*u);u=(Math.floor(c*10)&1)===0?u-i:u+i}return Math.min(u,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return v.prototype.backoff=function(h){var u=this,c=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){u._attempts++,h()},c)},v.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},v}();return fd=d,fd}var Qt={},tu,og;function j0(){if(og)return tu;og=1;var d=tu&&tu.__read||function(w,_){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var b=E.call(w),C,N=[],P;try{for(;(_===void 0||_-- >0)&&!(C=b.next()).done;)N.push(C.value)}catch(R){P={error:R}}finally{try{C&&!C.done&&(E=b.return)&&E.call(b)}finally{if(P)throw P.error}}return N},v=ut(),h=v.difference,u=v.flatMap;function c(){var w=4294967295;return String(Math.floor(Math.random()*w))}var i=function(){function w(_,E,b){Object.defineProperties(this,{cName:{enumerable:!0,value:b},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:E},trackId:{enumerable:!0,value:_}})}return w.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var _=[c(),c()];_.forEach(function(E){this.primarySSRCs.add(E)},this),this.rtxPairs.size&&_.forEach(function(E){this.rtxPairs.set(c(),E)},this)}},w.prototype.addSSRC=function(_,E,b){E?this.rtxPairs.set(_,E):this.primarySSRCs.add(_),this.isSimulcastEnabled=this.isSimulcastEnabled||b},w.prototype.toSdpLines=function(_){var E=this,b=_?[]:Array.from(this.rtxPairs.entries()).map(function(S){return S.reverse()}),C=Array.from(this.primarySSRCs.values()),N=b.length?u(b):C,P=u(N,function(S){return["a=ssrc:"+S+" cname:"+E.cName,"a=ssrc:"+S+" msid:"+E.streamId+" "+E.trackId]}),R=b.map(function(S){return"a=ssrc-group:FID "+S.join(" ")}),k=["a=ssrc-group:SIM "+C.join(" ")];return R.concat(P).concat(k)},w}();function a(w,_){var E=w.match(new RegExp(_,"gm"))||[];return E.map(function(b){var C=b.match(new RegExp(_))||[];return C.slice(1)})}function o(w){var _="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(u(a(w,_)))}function l(w,_,E){var b="a=ssrc:"+_+" "+E+":(.+)";return w.match(new RegExp(b))[1]}function f(w){var _="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(a(w,_).map(function(E){return E.reverse()}))}function p(w){var _=d(u(a(w,"^a=msid:(.+) (.+)$")),2),E=_[0],b=_[1],C=u(a(w,"^a=ssrc:(.+) cname:.+$"));return C.map(function(N){return[N,E,b]})}function y(w){var _=o(w),E=f(w),b=p(w);return b.reduce(function(C,N){var P=N[0],R=N[1],k=N[2],S=C.get(k)||new i(k,R,l(w,P,"cname")),T=E.get(P)||null;return S.addSSRC(P,T,_.has(P)),C.set(k,S)},new Map)}function g(w,_){var E=y(w),b=Array.from(E.keys()),C=Array.from(_.keys()),N=h(b,C),P=h(C,b),R=u(N,function(F){return E.get(F)});R.forEach(function(F){F.addSimulcastSSRCs(),_.set(F.trackId,F)}),C=Array.from(_.keys());var k=h(C,P),S=u(k,function(F){return _.get(F)}),T=!w.match(/a=rtpmap:[0-9]+ rtx/),O=u(S,function(F){return F.toSdpLines(T)}),q=u(new Set(w.split(`\r
`).concat(O))),U="a=x-google-flag:conference";return w.match(U)||q.push(U),q.join(`\r
`)}return tu=g,tu}var ug;function $d(){if(ug)return Qt;ug=1;var d=Qt&&Qt.__read||function(F,G){var B=typeof Symbol=="function"&&F[Symbol.iterator];if(!B)return F;var z=B.call(F),D,j=[],Q;try{for(;(G===void 0||G-- >0)&&!(D=z.next()).done;)j.push(D.value)}catch(Z){Q={error:Z}}finally{try{D&&!D.done&&(B=z.return)&&B.call(z)}finally{if(Q)throw Q.error}}return j},v=ut(),h=v.difference,u=v.flatMap,c=j0(),i={0:"PCMU",8:"PCMA"};function a(F){return Array.from(l(F)).reduce(function(G,B){var z=B[0],D=B[1],j=G.get(D)||[];return G.set(D,j.concat(z))},new Map)}function o(F){return y(F).reduce(function(G,B){var z=p(B);return z?G.set(z,B):G},new Map)}function l(F){return g(F).reduce(function(G,B){var z=new RegExp("a=rtpmap:"+B+" ([^/]+)"),D=F.match(z),j=D?D[1].toLowerCase():i[B]?i[B].toLowerCase():"";return G.set(B,j)},new Map)}function f(F,G){var B=new RegExp("^a=fmtp:"+F+" (.+)$","m"),z=G.match(B);return z&&z[1].split(";").reduce(function(D,j){var Q=d(j.split("="),2),Z=Q[0],K=Q[1];return D[Z]=isNaN(K)?K:parseInt(K,10),D},{})}function p(F){var G=F.match(/^a=mid:(.+)$/m);return G&&G[1]}function y(F,G,B){return F.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(z){return"m="+z}).filter(function(z){var D=new RegExp("m="+(G||".*"),"gm"),j=new RegExp("a="+(B||".*"),"gm");return D.test(z)&&j.test(z)})}function g(F){var G=F.split(`\r
`)[0],B=G.match(/([0-9]+)/g);return B?B.slice(1).map(function(z){return parseInt(z,10)}):[]}function w(F,G){G=G.map(function(j){var Q=j.codec;return Q.toLowerCase()});var B=u(G,function(j){return F.get(j)||[]}),z=h(Array.from(F.keys()),G),D=u(z,function(j){return F.get(j)});return B.concat(D)}function _(F,G){var B=G.split(`\r
`),z=B[0],D=B.slice(1);return z=z.replace(/([0-9]+\s?)+$/,F.join(" ")),[z].concat(D).join(`\r
`)}function E(F,G,B){var z=y(F),D=F.split(`\r
m=`)[0];return[D].concat(z.map(function(j){if(!/^m=(audio|video)/.test(j))return j;var Q=j.match(/^m=(audio|video)/)[1],Z=a(j),K=Q==="audio"?G:B,A=w(Z,K),x=_(A,j),L=Z.get("pcma")||[],I=Z.get("pcmu")||[],W=Q==="audio"?new Set(L.concat(I)):new Set;return W.has(A[0])?x.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):x})).join(`\r
`)}function b(F,G){var B=y(F),z=F.split(`\r
m=`)[0];return[z].concat(B.map(function(D){if(D=D.replace(/\r\n$/,""),!/^m=video/.test(D))return D;var j=a(D),Q=g(D),Z=new Set(j.get("vp8")||[]),K=Q.some(function(A){return Z.has(A)});return K?c(D,G):D})).concat("").join(`\r
`)}function C(F,G,B,z,D){var j=B.get(F)||[];if(j.length<=1)return j;var Q=f(G,D);if(!Q)return j;var Z=j.find(function(K){var A=f(K,z);return A&&Object.keys(Q).every(function(x){return Q[x]===A[x]})});return typeof Z=="number"?[Z]:j}function N(F,G,B){if(!/^m=(audio|video)/.test(F))return F;var z=p(F),D=z&&G.get(z);if(!D)return F;var j=l(D),Q=a(F),Z=u(Array.from(j),function(L){var I=d(L,2),W=I[0],ie=I[1];return ie!=="rtx"&&!B.includes(ie)?C(ie,W,Q,F,D):[]}),K=Q.get("rtx")||[];Z=Z.concat(K.filter(function(L){var I=f(L,F);return I&&Z.includes(I.apt)}));var A=F.split(`\r
`).filter(function(L){var I=L.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),W=I&&I[2];return!I||W&&Z.includes(parseInt(W,10))}),x=g(F).filter(function(L){return Z.includes(L)});return _(x,A.join(`\r
`))}function P(F,G){var B=y(F),z=F.split(`\r
m=`)[0],D=o(G);return[z].concat(B.map(function(j){return N(j,D,[])})).join(`\r
`)}function R(F,G,B,z){z===void 0&&(z=!1);var D=o(B),j=o(G),Q=y(F),Z=F.split(`\r
m=`)[0];return[Z].concat(Q.map(function(K){if(K=K.replace(/\r\n$/,""),!/^m=video/.test(K))return K;var A=K.match(/^a=mid:(.+)$/m),x=A&&A[1];if(!x)return K;var L=D.get(x),I=l(L),W=g(L),ie=W.length&&I.get(W[0])==="vp8",$=z||!ie;return $?j.get(x).replace(/\r\n$/,""):K})).concat("").join(`\r
`)}function k(F,G,B){var z=Array.from(B).reduce(function(D,j){var Q=d(j,2),Z=Q[0],K=Q[1],A=y(F,Z,"send(only|recv)"),x=A.map(p).filter(function(L){return!G.has(L)});return x.forEach(function(L,I){return D.set(L,K[I])}),D},new Map);return S(F,z)}function S(F,G){var B=y(F),z=F.split(`\r
m=`)[0];return[z].concat(B.map(function(D){if(!/^m=(audio|video)/.test(D))return D;var j=p(D);if(!j)return D;var Q=G.get(j);if(!Q)return D;var Z=(D.match(/^a=msid:(.+)$/m)||[])[1];if(!Z)return D;var K=d(Z.split(" "),2),A=K[0],x=K[1],L=new RegExp("msid:"+A+(x?" "+x:"")+"$","gm");return D.replace(L,"msid:"+A+" "+Q)})).join(`\r
`)}function T(F,G){return F.split(`\r
`).filter(function(B){return!G.find(function(z){return new RegExp("a=ssrc:.*"+z+":","g").test(B)})}).join(`\r
`)}function O(F){var G=y(F),B=F.split(`\r
m=`)[0];return[B].concat(G.map(function(z){if(!/^m=video/.test(z))return z;var D=a(z),j=D.get("rtx");if(!j)return z;var Q=new Set(g(z));j.forEach(function(x){return Q.delete(x)});var Z=z.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),K=Z&&Z[1],A=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(K?[new RegExp("^a=ssrc:"+K+" .+$")]:[]);return z=z.split(`\r
`).filter(function(x){return A.every(function(L){return!L.test(x)})}).join(`\r
`),_(Array.from(Q),z)})).join(`\r
`)}function q(F,G){var B=Object.entries(G).map(function(z){var D=d(z,2),j=D[0],Q=D[1];return j+"="+Q}).join(";");return"a=fmtp:"+F+" "+B}function U(F,G){var B=y(F),z=F.split(`\r
m=`)[0];return G=G||B.filter(function(D){return/^m=audio/.test(D)}).map(p),[z].concat(B.map(function(D){if(!/^m=audio/.test(D))return D;var j=a(D),Q=j.get("opus");if(!Q)return D;var Z=f(Q,D);if(!Z)return D;var K=q(Q,Z),A=new RegExp(K),x=p(D);G.includes(x)?Z.usedtx=1:delete Z.usedtx;var L=q(Q,Z);return D.replace(A,L)})).join(`\r
`)}return Qt.addOrRewriteNewTrackIds=k,Qt.addOrRewriteTrackIds=S,Qt.createCodecMapForMediaSection=a,Qt.createPtToCodecName=l,Qt.disableRtx=O,Qt.enableDtxForOpus=U,Qt.filterLocalCodecs=P,Qt.getMediaSections=y,Qt.removeSSRCAttributes=T,Qt.revertSimulcast=R,Qt.setCodecPreferences=E,Qt.setSimulcast=b,Qt}var dd,cg;function N0(){if(cg)return dd;cg=1;var d=function(){function v(h){h=Object.assign({getKey:function(c){return c},getValue:function(c){return c},isLessThanOrEqualTo:function(c,i){return c<=i}},h),Object.defineProperties(this,{_getKey:{value:h.getKey},_getValue:{value:h.getValue},_isLessThanOrEqualTo:{value:h.isLessThanOrEqualTo},_map:{value:new Map}})}return v.prototype.toMap=function(){return new Map(this._map)},v.prototype.updateAndFilter=function(h){return h.filter(this.update,this)},v.prototype.update=function(h){var u=this._getKey(h),c=this._getValue(h);return this._map.has(u)&&this._isLessThanOrEqualTo(c,this._map.get(u))?!1:(this._map.set(u,c),!0)},v}();return dd=d,dd}var vd,lg;function q0(){if(lg)return vd;lg=1;var d=N0(),v=function(){function h(){Object.defineProperties(this,{_filter:{value:new d({getKey:function(c){return c.ufrag},isLessThanOrEqualTo:function(c,i){return c.revision<=i.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return h.prototype.setUfrag=function(u){this._ufrag=u;var c=this._filter.toMap().get(u);return c?c.candidates:[]},h.prototype.update=function(u){u.candidates=u.candidates||[];var c=this._filter.toMap().get(u.ufrag),i=c?c.candidates:[];return this._filter.update(u)&&this._ufrag===u.ufrag?u.candidates.slice(i.length):[]},h}();return vd=v,vd}var hd,sg;function U0(){if(sg)return hd;sg=1;var d=ht(),v=d.ICE_ACTIVITY_CHECK_PERIOD_MS,h=d.ICE_INACTIVITY_THRESHOLD_MS,u=function(){function c(i,a){a=Object.assign({activityCheckPeriodMs:v,inactivityThresholdMs:h},a),Object.defineProperties(this,{_activityCheckPeriodMs:{value:a.activityCheckPeriodMs},_inactivityThresholdMs:{value:a.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:i},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return c.prototype._getActivePairStat=function(i){var a=Array.from(i.values()),o=a.find(function(l){return l.type==="candidate-pair"&&l.nominated});return o||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},c.prototype._getIceConnectionStats=function(){var i=this;return this._peerConnection.getStats().then(function(a){return i._getActivePairStat(a)}).catch(function(){return null})},c.prototype._scheduleInactivityCallback=function(i){var a=this;i&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){a._peerConnection.iceConnectionState==="disconnected"&&i()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!i&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},c.prototype.start=function(i){var a=this;this.stop(),this._timer=setInterval(function(){a._getIceConnectionStats().then(function(o){o&&((!a._lastActivity||a._lastActivity.bytesReceived!==o.bytesReceived)&&(a._lastActivity=o,a._scheduleInactivityCallback(null)),o.timestamp-a._lastActivity.timestamp>=a._inactivityThresholdMs&&(a._peerConnection.iceConnectionState==="disconnected"?i():a._onIceConnectionStateChanged===null&&a._scheduleInactivityCallback(i)))})},this._activityCheckPeriodMs)},c.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},c}();return hd=u,hd}var ru,fg;function B0(){if(fg)return ru;fg=1;var d=ru&&ru.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=er().EventEmitter,h=function(u){d(c,u);function c(i){var a=u.call(this)||this;return Object.defineProperties(a,{_dataChannel:{value:i},_messageQueue:{value:[]}}),i.addEventListener("open",function(){a._messageQueue.splice(0).forEach(function(o){return a._publish(o)})}),i.addEventListener("message",function(o){var l=o.data;try{var f=JSON.parse(l);a.emit("message",f)}catch{}}),a.publish({type:"ready"}),a}return c.prototype._publish=function(i){var a=JSON.stringify(i);try{this._dataChannel.send(a)}catch{}},c.prototype.publish=function(i){var a=this._dataChannel;return a.readyState==="closing"||a.readyState==="closed"?!1:a.readyState==="connecting"?(this._messageQueue.push(i),!0):(this._publish(i),!0)},c}(v);return ru=h,ru}var nu,dg;function I0(){if(dg)return nu;dg=1;var d=nu&&nu.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=fb(),h=B0(),u=function(c){d(i,c);function i(a){var o=c.call(this,a.label,a.maxPacketLifeTime,a.maxRetransmits,a.ordered)||this;return Object.defineProperties(o,{_dataChannel:{value:a}}),a.binaryType="arraybuffer",a.addEventListener("message",function(l){o.emit("message",l.data)}),a.addEventListener("close",function(){o.emit("close")}),o}return i.prototype.stop=function(){this._dataChannel.close(),c.prototype.stop.call(this)},i.prototype.toDataTransport=function(){return new h(this._dataChannel)},i}(v);return nu=u,nu}var iu,vg;function V0(){if(vg)return iu;vg=1;var d=iu&&iu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ub(),h=function(u){d(c,u);function c(i,a){return u.call(this,i,a)||this}return c}(v);return iu=h,iu}var pd,hg;function z0(){if(hg)return pd;hg=1;var d=$d().getMediaSections,v=function(){function h(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return h.prototype.match=function(u){return this._midsToTrackIds.get(u.transceiver.mid)||null},h.prototype.update=function(u){var c=d(u,"(audio|video)");this._midsToTrackIds=c.reduce(function(i,a){var o=a.match(/^a=mid:(.+)$/m)||[],l=a.match(/^a=msid:.+ (.+)$/m)||[],f=o[1],p=l[1];return f&&p?i.set(f,p):i},this._midsToTrackIds)},h}();return pd=v,pd}var md,pg;function H0(){if(pg)return md;pg=1;var d=Ci().RTCSessionDescription,v=$d(),h=v.createPtToCodecName,u=v.getMediaSections;function c(_){var E={type:_.type};return _.type!=="rollback"&&(E.sdp=i(_.sdp)),new d(E)}function i(_){var E=u(_),b=_.split(`\r
m=`)[0];return[b].concat(E.map(a)).join(`\r
`)}function a(_){var E=h(_);_=o(_,E);var b=l(E),C=b.get("rtx")||new Set,N=new Set,P=f(_,E,C,N),R=p(P,N),k=Array.from(N),S=["h264","vp8","vp9"],T=S.reduce(function(O,q){var U=b.get(q)||new Set;return Array.from(U).reduce(function(F,G){return R.has(G)?F:F.add(G)},O)},new Set);return T.forEach(function(O){if(k.length){var q=k.shift();_=y(_,q),_=w(_,q,O)}}),k.forEach(function(O){_=y(_,O),_=g(_,O)}),_}function o(_,E){return Array.from(E.keys()).reduce(function(b,C){var N=new RegExp("^a=rtpmap:"+C+" rtx.+$","gm");return(b.match(N)||[]).slice(E.get(C)==="rtx"?1:0).reduce(function(P,R){var k=new RegExp(`\r
`+R),S=new RegExp(`\r
a=fmtp:`+C+" apt=[0-9]+");return P.replace(k,"").replace(S,"")},b)},_)}function l(_){var E=new Map;return _.forEach(function(b,C){var N=E.get(b)||new Set;return E.set(b,N.add(C))}),E}function f(_,E,b,C){return Array.from(b).reduce(function(N,P){var R=new RegExp("a=fmtp:"+P+" apt=(\\d+)"),k=_.match(R);if(!k)return C.add(P),N;var S=Number.parseInt(k[1]);if(!E.has(S))return C.add(P),N;var T=E.get(S);return T==="rtx"?(C.add(P),N):N.set(P,S)},new Map)}function p(_,E){var b=Array.from(_).reduce(function(C,N){var P=N[0],R=N[1],k=C.get(R)||new Set;return C.set(R,k.add(P))},new Map);return Array.from(b).reduce(function(C,N){var P=N[0],R=Array.from(N[1]);return R.length>1?(R.forEach(function(k){E.add(k)}),C):C.set(P,R[0])},new Map)}function y(_,E){var b=new RegExp("a=fmtp:"+E+`.*\r
`,"gm");return _.replace(b,"")}function g(_,E){var b=new RegExp("a=rtpmap:"+E+`.*\r
`,"gm");return _.replace(b,"")}function w(_,E,b){return _.endsWith(`\r
`)?_+"a=fmtp:"+E+" apt="+b+`\r
`:_+`\r
a=fmtp:`+E+" apt="+b}return md=c,md}var wn,mg;function F0(){if(mg)return wn;mg=1;var d=wn&&wn.__extends||function(){var ke=function(me,X){return ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,de){te.__proto__=de}||function(te,de){for(var ve in de)Object.prototype.hasOwnProperty.call(de,ve)&&(te[ve]=de[ve])},ke(me,X)};return function(me,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");ke(me,X);function te(){this.constructor=me}me.prototype=X===null?Object.create(X):(te.prototype=X.prototype,new te)}}(),v=wn&&wn.__read||function(ke,me){var X=typeof Symbol=="function"&&ke[Symbol.iterator];if(!X)return ke;var te=X.call(ke),de,ve=[],be;try{for(;(me===void 0||me-- >0)&&!(de=te.next()).done;)ve.push(de.value)}catch(ze){be={error:ze}}finally{try{de&&!de.done&&(X=te.return)&&X.call(te)}finally{if(be)throw be.error}}return ve},h=wn&&wn.__spreadArray||function(ke,me){for(var X=0,te=me.length,de=ke.length;X<te;X++,de++)ke[de]=me[X];return ke},u=Eb(),c=Ci(),i=c.RTCIceCandidate,a=c.RTCPeerConnection,o=c.RTCSessionDescription,l=c.getStats,f=Xt(),p=ht(),y=p.DEFAULT_ICE_GATHERING_TIMEOUT_MS,g=p.DEFAULT_LOG_LEVEL,w=p.DEFAULT_SESSION_TIMEOUT_SEC,_=p.iceRestartBackoffConfig,E=$d(),b=E.addOrRewriteNewTrackIds,C=E.addOrRewriteTrackIds,N=E.createCodecMapForMediaSection,P=E.disableRtx,R=E.enableDtxForOpus,k=E.filterLocalCodecs,S=E.getMediaSections,T=E.removeSSRCAttributes,O=E.revertSimulcast,q=E.setCodecPreferences,U=E.setSimulcast,F=Li(),G=On(),B=G.MediaClientLocalDescFailedError,z=G.MediaClientRemoteDescFailedError,D=ut(),j=D.buildLogLevels,Q=D.getPlatform,Z=D.isChromeScreenShareTrack,K=D.oncePerTick,A=D.defer,x=q0(),L=U0(),I=I0(),W=V0(),ie=ya(),$=qr(),ae=z0(),pe=H0(),Te=f.guessBrowser(),xe=Q(),Ee=/android/.test(xe),Ce=Te==="chrome",Le=Te==="firefox",Pe=Te==="safari",Oe=0,_e={open:["closed","updating"],updating:["closed","open"],closed:[]},je=function(ke){d(me,ke);function me(X,te,de,ve){var be=ke.call(this,"open",_e)||this;ve=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:Z,iceServers:[],logLevel:g,offerOptions:{},revertSimulcast:O,sessionTimeout:w*1e3,setCodecPreferences:q,setSimulcast:U,Backoff:u,IceConnectionMonitor:L,RTCIceCandidate:i,RTCPeerConnection:a,RTCSessionDescription:o,Timeout:F},ve);var ze=Y(Object.assign({},ve,ve.rtcConfiguration)),Ze=j(ve.logLevel),_t=ve.RTCPeerConnection;ve.enableDscp===!0&&(ve.chromeSpecificConstraints=ve.chromeSpecificConstraints||{},ve.chromeSpecificConstraints.optional=ve.chromeSpecificConstraints.optional||[],ve.chromeSpecificConstraints.optional.push({googDscp:!0}));var mt=ve.log?ve.log.createLog("webrtc",be):new $("webrtc",be,Ze,ve.loggerName),rt=new _t(ze,ve.chromeSpecificConstraints);ve.dummyAudioMediaStreamTrack&&rt.addTrack(ve.dummyAudioMediaStreamTrack),Object.defineProperties(be,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:ve.enableDscp},_encodingParameters:{value:te},_isChromeScreenShareTrack:{value:ve.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new ve.Timeout(function(){return be._handleIceGatheringTimeout()},y,!1)},_iceRestartBackoff:{value:new ve.Backoff(_)},_instanceId:{value:++Oe},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:mt},_eventObserver:{value:ve.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new ve.IceConnectionMonitor(rt)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:ve.offerOptions},_onEncodingParametersChanged:{value:K(function(){be._needsAnswer||Lt(be)})},_peerConnection:{value:rt},_preferredAudioCodecs:{value:de.audio},_preferredVideoCodecs:{value:de.video},_shouldApplyDtx:{value:de.audio.every(function(Fe){var st=Fe.codec;return st!=="opus"})||de.audio.some(function(Fe){var st=Fe.codec,Bt=Fe.dtx;return st==="opus"&&Bt})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new ve.Timeout(function(){mt.debug("ICE reconnect timed out"),be.close()},ve.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new x},_setCodecPreferences:{value:Le&&Ee&&de.video[0]&&de.video[0].codec.toLowerCase()!=="h264"?function(Fe){return Fe}:ve.setCodecPreferences},_setSimulcast:{value:ve.setSimulcast},_revertSimulcast:{value:ve.revertSimulcast},_RTCIceCandidate:{value:ve.RTCIceCandidate},_RTCPeerConnection:{value:ve.RTCPeerConnection},_RTCSessionDescription:{value:ve.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:X}}),te.on("changed",be._onEncodingParametersChanged),rt.addEventListener("connectionstatechange",be._handleConnectionStateChange.bind(be)),rt.addEventListener("datachannel",be._handleDataChannelEvent.bind(be)),rt.addEventListener("icecandidate",be._handleIceCandidateEvent.bind(be)),rt.addEventListener("iceconnectionstatechange",be._handleIceConnectionStateChange.bind(be)),rt.addEventListener("icegatheringstatechange",be._handleIceGatheringStateChange.bind(be)),rt.addEventListener("signalingstatechange",be._handleSignalingStateChange.bind(be)),rt.addEventListener("track",be._handleTrackEvent.bind(be));var at=be;return be.on("stateChanged",function Fe(st){st==="closed"&&(at.removeListener("stateChanged",Fe),at._dataChannels.forEach(function(Bt,Zt){at.removeDataTrackSender(Zt)}))}),be}return me.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},me.prototype.setEffectiveAdaptiveSimulcast=function(X){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",X),this._preferredVideoCodecs.forEach(function(te){"adaptiveSimulcast"in te&&(te.adaptiveSimulcast=X)})},Object.defineProperty(me.prototype,"_shouldApplySimulcast",{get:function(){if(!Ce&&!Pe)return!1;var X=this._preferredVideoCodecs.some(function(te){return te.codec.toLowerCase()==="vp8"&&te.simulcast&&te.adaptiveSimulcast!==!1});return X},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?S(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var X=this._preferredVideoCodecs.find(function(te){return"adaptiveSimulcast"in te});return X&&X.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),me.prototype._maybeUpdateEncodings=function(X,te,de){if(de===void 0&&(de=!1),X.kind!=="video"||X.readyState==="ended")return!1;var ve=X.getSettings(),be=ve.height,ze=ve.width;if(typeof be!="number"||typeof ze!="number")return!1;var Ze=f.guessBrowser();return Ze==="safari"||Ze==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(X,te,de),!0):!1},me.prototype._updateEncodings=function(X,te,de){if(this._isChromeScreenShareTrack(X)){var ve=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];te.forEach(function(Fe,st){var Bt=ve[st];Bt?(Fe.scaleResolutionDownBy=Bt.scaleResolutionDownBy,de&&delete Fe.active):(Fe.active=!1,delete Fe.scaleResolutionDownBy)})}else{var be=X.getSettings(),ze=be.width,Ze=be.height,_t=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],mt=ze*Ze,rt=_t.find(function(Fe){return mt>=Fe.pixels}),at=Math.min(te.length,rt.maxActiveLayers);te.forEach(function(Fe,st){var Bt=st<at;Bt?(Fe.scaleResolutionDownBy=1<<at-st-1,de&&(Fe.active=!0)):(Fe.active=!1,delete Fe.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",te.map(function(Fe,st){var Bt=Fe.active,Zt=Fe.scaleResolutionDownBy;return"["+st+": "+Bt+", "+(Zt||0)+"]"}).join(", "))},me.prototype._addIceCandidate=function(X){var te=this;return Promise.resolve().then(function(){return X=new te._RTCIceCandidate(X),te._peerConnection.addIceCandidate(X)}).catch(function(de){te._log.warn("Failed to add RTCIceCandidate "+(X?'"'+X.candidate+'"':"null")+": "+de.message)})},me.prototype._addIceCandidates=function(X){return Promise.all(X.map(this._addIceCandidate,this)).then(function(){})},me.prototype._addOrUpdateTransceiver=function(X){var te=this,de=Re(this,X.kind);if(de&&de.sender){var ve=de.sender.track?de.sender.track.id:null;return ve&&this._log.warn("Reusing transceiver: "+de.mid+"] "+ve+" => "+X.id),this._replaceTrackPromises.set(de,de.sender.replaceTrack(X).then(function(){de.direction="sendrecv"},function(){}).finally(function(){te._replaceTrackPromises.delete(de)})),de}return this._peerConnection.addTransceiver(X,{})},me.prototype._checkIceBox=function(X){var te=oe(X);if(!te)return Promise.resolve();var de=this._remoteCandidates.setUfrag(te);return this._addIceCandidates(de)},me.prototype._answer=function(X){var te=this;return Promise.resolve().then(function(){return te._negotiationRole||(te._negotiationRole="answerer"),te._setRemoteDescription(X)}).catch(function(){throw new z}).then(function(){return te._peerConnection.createAnswer()}).then(function(de){Le?de=new te._RTCSessionDescription({sdp:P(de.sdp),type:de.type}):de=pe(de);var ve=T(de.sdp,["mslabel","label"]);if(te._shouldApplySimulcast){var be=ve;ve=te._setSimulcast(be,te._trackIdsToAttributes),ve=te._revertSimulcast(ve,be,X.sdp)}return ve=ve.replace(/42e015/g,"42e01f"),te._setLocalDescription({type:de.type,sdp:ve})}).then(function(){return te._checkIceBox(X)}).then(function(){return te._queuedDescription&&te._updateDescription(te._queuedDescription)}).then(function(){return te._queuedDescription=null,te._maybeReoffer(te._peerConnection.localDescription)}).catch(function(de){var ve=de instanceof z?de:new B;throw te._publishMediaWarning({message:"Failed to _answer",code:ve.code,error:de}),ve})},me.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},me.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},me.prototype._handleDataChannelEvent=function(X){var te=this,de=X.channel,ve=new I(de);this._dataTrackReceivers.add(ve),de.addEventListener("close",function(){te._dataTrackReceivers.delete(ve)}),this.emit("trackAdded",ve)},me.prototype._handleGlare=function(X){var te=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return te._trackIdsToAttributes=new Map(te._appliedTrackIdsToAttributes),te._setLocalDescription({type:"rollback"})}).then(function(){return te._needsAnswer=!1,te._answer(X)}).then(function(de){return de?Promise.resolve():te._offer()})},me.prototype._publishMediaWarning=function(X){var te=X.message,de=X.code,ve=X.error,be=X.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:te,code:de,context:JSON.stringify({error:ve.message,sdp:be})}})},me.prototype._handleIceCandidateEvent=function(X){X.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(X.candidate));var te={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};X.candidate||(te.ice.complete=!0),this._isIceLite&&X.candidate||(te.ice.revision=this._localCandidatesRevision++,this.emit("candidates",te))},me.prototype._handleIceConnectionStateChange=function(){var X=this,te=this._peerConnection.iceConnectionState,de=["connected","completed"].includes(te),ve=this._log;ve.debug('ICE connection state is "'+te+'"'),de&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&te==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(ve.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&de&&ve.debug("ICE reconnected"),te==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){X._iceConnectionMonitor.stop(),!X._shouldRestartIce&&!X._isRestartingIce&&(ve.warn("ICE Connection Monitor detected inactivity"),X._isIceConnectionInactive=!0,X._initiateIceRestartBackoff(),X.emit("iceConnectionStateChanged"),X.emit("connectionStateChanged"))})):["disconnected","completed"].includes(te)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=te,this.emit("iceConnectionStateChanged")},me.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},me.prototype._handleIceGatheringStateChange=function(){var X=this._peerConnection.iceGatheringState,te=this._log;te.debug('ICE gathering state is "'+X+'"');var de=this._iceGatheringTimeout,ve=de.delay,be=de.isSet;X==="gathering"&&!this._didGenerateLocalCandidates&&!be&&(te.debug("Starting ICE gathering timeout: "+ve),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},me.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},me.prototype._handleTrackEvent=function(X){var te=this,de=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new ae,this._trackMatcher.update(de);var ve=X.track,be=this._trackMatcher.match(X)||ve.id,ze=new W(be,ve);this._mediaTrackReceivers.forEach(function(Ze){Ze.track.id===ze.track.id&&te._mediaTrackReceivers.delete(Ze)}),this._mediaTrackReceivers.add(ze),ve.addEventListener?ve.addEventListener("ended",function(){return te._mediaTrackReceivers.delete(ze)}):ve.onended=function(){return te._mediaTrackReceivers.delete(ze)},this.emit("trackAdded",ze)},me.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var X=this._log;X.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var te=this._iceReconnectTimeout,de=te.delay,ve=te.isSet;ve||(X.debug("Starting ICE reconnect timeout: "+de),this._iceReconnectTimeout.start()),this.offer().catch(function(be){X.error("offer failed in _initiateIceRestart with: "+be.message)})}},me.prototype._initiateIceRestartBackoff=function(){var X=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return X._initiateIceRestart()}))},me.prototype._maybeReoffer=function(X){var te=this._shouldOffer;if(X&&X.sdp){var de=this._peerConnection.getSenders().filter(function(_t){return _t.track});te=["audio","video"].reduce(function(_t,mt){var rt=S(X.sdp,mt,"(sendrecv|sendonly)"),at=de.filter(V.bind(null,mt));return _t||rt.length<at.length},te);var ve=this._dataChannels.size>0,be=S(X.sdp,"application").length>0,ze=ve&&!be;te=te||ze}var Ze=te?this._offer():Promise.resolve();return Ze.then(function(){return te})},me.prototype._offer=function(){var X=this,te=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,te.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return X._peerConnection.createOffer(te)}).catch(function(de){var ve=new B;throw X._publishMediaWarning({message:"Failed to create offer",code:ve.code,error:de}),ve}).then(function(de){Le?de=new X._RTCSessionDescription({sdp:P(de.sdp),type:de.type}):de=pe(de);var ve=T(de.sdp,["mslabel","label"]);ve=X._peerConnection.remoteDescription?k(ve,X._peerConnection.remoteDescription.sdp):ve;var be=X._setCodecPreferences(ve,X._preferredAudioCodecs,X._preferredVideoCodecs);return X._shouldOffer=!1,X._negotiationRole||(X._negotiationRole="offerer"),X._shouldApplySimulcast&&(X._localDescriptionWithoutSimulcast={type:"offer",sdp:be},be=X._setSimulcast(be,X._trackIdsToAttributes)),X._setLocalDescription({type:"offer",sdp:be})})},me.prototype._getMediaTrackSenderId=function(X){var te=Array.from(this._rtpSenders.keys()).find(function(de){var ve=de.track.id;return ve===X});return te?te.id:X},me.prototype._addOrRewriteLocalTrackIds=function(X){var te=this,de=this._peerConnection.getTransceivers(),ve=de.filter(function(at){var Fe=at.sender,st=at.stopped;return!st&&Fe&&Fe.track}),be=ve.filter(function(at){var Fe=at.mid;return Fe}),ze=new Map(be.map(function(at){var Fe=at.mid,st=at.sender;return[Fe,te._getMediaTrackSenderId(st.track.id)]})),Ze=C(X.sdp,ze),_t=ve.filter(function(at){var Fe=at.mid;return!Fe}),mt=new Map(["audio","video"].map(function(at){return[at,_t.filter(function(Fe){var st=Fe.sender;return st.track.kind===at}).map(function(Fe){var st=Fe.sender;return te._getMediaTrackSenderId(st.track.id)})]})),rt=b(Ze,ze,mt);return new this._RTCSessionDescription({sdp:rt,type:X.type})},me.prototype._rollbackAndApplyOffer=function(X){var te=this;return this._setLocalDescription({type:"rollback"}).then(function(){return te._setLocalDescription(X)})},me.prototype._setLocalDescription=function(X){var te=this;return X.type!=="rollback"&&this._shouldApplyDtx&&(X=new this._RTCSessionDescription({sdp:R(X.sdp),type:X.type})),this._peerConnection.setLocalDescription(X).catch(function(de){te._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+X.type+'" failed with the error "'+de.message+'".',de);var ve=new B,be={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+X.type+'" failed',code:ve.code,error:de};throw X.sdp&&(te._log.warn("The SDP was "+X.sdp),be.sdp=X.sdp),te._publishMediaWarning(be),ve}).then(function(){X.type!=="rollback"&&(te._localDescription=te._addOrRewriteLocalTrackIds(X),te._shouldApplyDtx&&(te._localDescription=new te._RTCSessionDescription({sdp:R(te._localDescription.sdp,[]),type:te._localDescription.type})),te._localCandidates=[],X.type==="offer"?te._descriptionRevision++:X.type==="answer"&&(te._lastStableDescriptionRevision=te._descriptionRevision,Be(te)),te._localUfrag=oe(X),te.emit("description",te.getState()))})},me.prototype._setRemoteDescription=function(X){var te=this;return X.sdp&&(X.sdp=this._setCodecPreferences(X.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?X.sdp=R(X.sdp):X.sdp=R(X.sdp,[]),Le&&(X.sdp=J(X.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(X.sdp))),X=new this._RTCSessionDescription(X),Promise.resolve().then(function(){if(X.type==="answer"&&te._localDescriptionWithoutSimulcast){var de=te._preferredVideoCodecs.find(function(ze){return"adaptiveSimulcast"in ze}),ve=!!de&&de.adaptiveSimulcast===!1,be=te._revertSimulcast(te._localDescription.sdp,te._localDescriptionWithoutSimulcast.sdp,X.sdp,ve);if(te._localDescriptionWithoutSimulcast=null,be!==te._localDescription.sdp)return te._rollbackAndApplyOffer({type:te._localDescription.type,sdp:be})}}).then(function(){return te._peerConnection.setRemoteDescription(X)}).then(function(){X.type==="answer"&&(te._isRestartingIce&&(te._log.debug("An ICE restart was in-progress and is now completed"),te._isRestartingIce=!1),Be(te))},function(de){throw te._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+X.type+'" failed with the error "'+de.message+'".',de),X.sdp&&te._log.warn("The SDP was "+X.sdp),de})},me.prototype._updateDescription=function(X){var te=this;switch(X.type){case"answer":case"pranswer":if(X.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=X.revision;break;case"close":return this._close();case"create-offer":return X.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=X,Promise.resolve()):(this._descriptionRevision=X.revision,this._offer());case"offer":return X.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=X,Promise.resolve()):(this._descriptionRevision=X.revision,this._handleGlare(X)):(this._descriptionRevision=X.revision,this._answer(X).then(function(){}))}var de=X.revision;return Promise.resolve().then(function(){return te._setRemoteDescription(X)}).catch(function(ve){var be=new z;throw te._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+X.type+'" failed',code:be.code,error:ve,sdp:X.sdp}),be}).then(function(){return te._lastStableDescriptionRevision=de,te._needsAnswer=!1,te._checkIceBox(X)}).then(function(){return te._queuedDescription&&te._updateDescription(te._queuedDescription)}).then(function(){return te._queuedDescription=null,te._maybeReoffer(te._peerConnection.localDescription).then(function(){})})},me.prototype._updateIce=function(X){var te=this._remoteCandidates.update(X);return this._addIceCandidates(te)},me.prototype.addDataTrackSender=function(X){if(!this._dataChannels.has(X))try{var te={ordered:X.ordered};X.maxPacketLifeTime!==null&&(te.maxPacketLifeTime=X.maxPacketLifeTime),X.maxRetransmits!==null&&(te.maxRetransmits=X.maxRetransmits);var de=this._peerConnection.createDataChannel(X.id,te);X.addDataChannel(de),this._dataChannels.set(X,de)}catch(ve){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+X.id+'": '+ve.message)}},me.prototype._handleQueuedPublisherHints=function(){var X=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(te,de){var ve=te.deferred,be=te.encodings;X._mediaTrackSenderToPublisherHints.delete(de),X._setPublisherHint(de,be).then(function(ze){return ve.resolve(ze)}).catch(function(ze){return ve.reject(ze)})})},me.prototype._setPublisherHint=function(X,te){var de=this;if(Le)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(X)){var ve=this._mediaTrackSenderToPublisherHints.get(X);ve.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(X)}var be=this._rtpSenders.get(X);if(!be)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var ze=A();return this._mediaTrackSenderToPublisherHints.set(X,{deferred:ze,encodings:te}),ze.promise}var Ze=be.getParameters();return te!==null&&te.forEach(function(_t){var mt=_t.enabled,rt=_t.layer_index;Ze.encodings.length>rt?(de._log.debug("layer:"+rt+", active:"+Ze.encodings[rt].active+" => "+mt),Ze.encodings[rt].active=mt):de._log.warn("invalid layer:"+rt+", active:"+mt)}),this._maybeUpdateEncodings(be.track,Ze.encodings,te===null),be.setParameters(Ze).then(function(){return"OK"}).catch(function(_t){return de._log.error("Failed to apply publisher hints:",_t),"COULD_NOT_APPLY_HINT"})},me.prototype.addMediaTrackSender=function(X){var te=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(X))){var de=this._addOrUpdateTransceiver(X.track),ve=de.sender;X.addSender(ve,function(be){return te._setPublisherHint(X,be)}),this._rtpNewSenders.add(ve),this._rtpSenders.set(X,ve)}},me.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},me.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},me.prototype.getState=function(){if(!this._localDescription)return null;var X=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,te={type:this._localDescription.type,revision:X};return this._localDescription.sdp&&(te.sdp=this._localDescription.sdp),{description:te,id:this.id}},me.prototype.offer=function(){var X=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(te){X.transition("updating",te);var de=X._needsAnswer||X._isRestartingIce?Promise.resolve():X._offer();return de.then(function(){X.tryTransition("open",te)},function(ve){throw X.tryTransition("open",te),ve})})},me.prototype.removeDataTrackSender=function(X){var te=this._dataChannels.get(X);te&&(X.removeDataChannel(te),this._dataChannels.delete(X),te.close())},me.prototype.removeMediaTrackSender=function(X){var te=this._rtpSenders.get(X);if(te){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(te),X.removeSender(te),this._mediaTrackSenderToPublisherHints.has(X)){var de=this._mediaTrackSenderToPublisherHints.get(X);de.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(X)}this._rtpNewSenders.delete(te),this._rtpSenders.delete(X)}},me.prototype.setConfiguration=function(X){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(Y(X))},me.prototype.setIceReconnectTimeout=function(X){return this._iceReconnectTimeout.setDelay(X),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},me.prototype.update=function(X){var te=this;return this.bracket("updating",function(de){if(te.state==="closed")return Promise.resolve();te.transition("updating",de);var ve=[];return X.ice&&ve.push(te._updateIce(X.ice)),X.description&&ve.push(te._updateDescription(X.description)),Promise.all(ve).then(function(){te.tryTransition("open",de)},function(be){throw te.tryTransition("open",de),be})})},me.prototype.getStats=function(){var X=this;return l(this._peerConnection,{log:this._log}).then(function(te){return ee(X,te)})},me}(ie);function Ae(ke,me){var X=ke._getMediaTrackSenderId(me.trackId);return Object.assign(me,{trackId:X})}function Qe(ke,me){var X=h([],v(ke._mediaTrackReceivers)).find(function(de){return de.track.id===me.trackId}),te=X?X.id:null;return Object.assign(me,{trackId:te})}function ee(ke,me){return Object.assign(me,{remoteAudioTrackStats:me.remoteAudioTrackStats.map(function(X){return Qe(ke,X)}),remoteVideoTrackStats:me.remoteVideoTrackStats.map(function(X){return Qe(ke,X)}),localAudioTrackStats:me.localAudioTrackStats.map(function(X){return Ae(ke,X)}),localVideoTrackStats:me.localVideoTrackStats.map(function(X){return Ae(ke,X)})})}function oe(ke){if(ke.sdp){var me=ke.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(me)return me[1]}return null}function Y(ke){return ke===void 0&&(ke={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},ke)}function V(ke,me){var X=me.track;return X&&X.kind===ke&&X.readyState!=="ended"}function J(ke){return ke.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function we(ke,me){return!ke.stopped&&!me._replaceTrackPromises.has(ke)&&["inactive","recvonly"].includes(ke.direction)}function Re(ke,me){var X={audio:ke._preferredAudioCodecs.map(function(be){var ze=be.codec;return ze.toLowerCase()}),video:ke._preferredVideoCodecs.map(function(be){var ze=be.codec;return ze.toLowerCase()})}[me],te=ke._recycledTransceivers[me],de=X.find(function(be){return ke._localCodecs.has(be)});if(!de)return te.shift();var ve=te.find(function(be){var ze=ke._remoteCodecMaps.get(be.mid);return ze&&ze.has(de)});return ve&&te.splice(te.indexOf(ve),1),ve}function De(ke){var me=ke._peerConnection.localDescription;!me||!me.sdp||S(me.sdp).forEach(function(X){var te=N(X);te.forEach(function(de,ve){return ke._localCodecs.add(ve)})})}function Ke(ke){var me=ke._peerConnection.remoteDescription;!me||!me.sdp||S(me.sdp).forEach(function(X){var te=X.match(/^a=mid:(.+)$/m);if(!(!te||!te[1])){var de=te[1],ve=N(X);ke._remoteCodecMaps.set(de,ve)}})}function Xe(ke){ke._recycledTransceivers.audio=[],ke._recycledTransceivers.video=[],ke._peerConnection.getTransceivers().forEach(function(me){if(we(me,ke)){var X=me.receiver.track;ke._recycledTransceivers[X.kind].push(me)}})}function Be(ke){Xe(ke),De(ke),Ke(ke),Lt(ke).then(function(){ke._handleQueuedPublisherHints()})}function Lt(ke){var me=ke._encodingParameters,X=me.maxAudioBitrate,te=me.maxVideoBitrate,de=new Map([["audio",X],["video",te]]),ve=[];return ke._peerConnection.getSenders().filter(function(be){return be.track}).forEach(function(be){var ze=de.get(be.track.kind),Ze=be.getParameters();ze===null||ze===0?tr(Ze):ke._isChromeScreenShareTrack(be.track)?ke._log.warn("Not setting maxBitrate for "+be.track.kind+" Track "+be.track.id+" because it appears to be screen share track: "+be.track.label):Dt(Ze,ze),!Le&&Ze.encodings.length>0&&(be.track.kind==="audio"?Ze.encodings[0].priority="high":ke._isChromeScreenShareTrack(be.track)&&(Ze.encodings[0].priority="medium"),ke._enableDscp&&(Ze.encodings[0].networkPriority="high"));var _t=ke._rtpNewSenders.has(be);ke._maybeUpdateEncodings(be.track,Ze.encodings,_t),ke._rtpNewSenders.delete(be);var mt=be.setParameters(Ze).catch(function(rt){ke._log.warn("Error while setting encodings parameters for "+be.track.kind+" Track "+be.track.id+": "+(rt.message||rt.name))});ve.push(mt)}),Promise.all(ve)}function tr(ke){Array.isArray(ke.encodings)&&ke.encodings.forEach(function(me){return delete me.maxBitrate})}function Dt(ke,me){Le?ke.encodings=[{maxBitrate:me}]:ke.encodings.forEach(function(X){X.maxBitrate=me})}return wn=je,wn}var kn,yg;function G0(){if(yg)return kn;yg=1;var d=kn&&kn.__extends||function(){var S=function(T,O){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,U){q.__proto__=U}||function(q,U){for(var F in U)Object.prototype.hasOwnProperty.call(U,F)&&(q[F]=U[F])},S(T,O)};return function(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");S(T,O);function q(){this.constructor=T}T.prototype=O===null?Object.create(O):(q.prototype=O.prototype,new q)}}(),v=kn&&kn.__read||function(S,T){var O=typeof Symbol=="function"&&S[Symbol.iterator];if(!O)return S;var q=O.call(S),U,F=[],G;try{for(;(T===void 0||T-- >0)&&!(U=q.next()).done;)F.push(U.value)}catch(B){G={error:B}}finally{try{U&&!U.done&&(O=q.return)&&O.call(q)}finally{if(G)throw G.error}}return F},h=kn&&kn.__spreadArray||function(S,T){for(var O=0,q=T.length,U=S.length;O<q;O++,U++)S[U]=T[O];return S},u=Xt().guessBrowser,c=F0(),i=cb(),a=ab(),o=ut(),l=On().MediaConnectionError,f=u()==="firefox",p=function(S){d(T,S);function T(O,q,U){var F=S.call(this)||this;U=Object.assign({audioContextFactory:f?yl():null,PeerConnectionV2:c},U);var G=U.audioContextFactory?U.audioContextFactory.getOrCreate(F):null,B=G?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(F,{_audioContextFactory:{value:U.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:o.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:G?new i(y(G)):null},_encodingParameters:{value:O},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:B},_peerConnections:{value:new Map},_preferredCodecs:{value:q},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:U.PeerConnectionV2}}),F}return T.prototype.setEffectiveAdaptiveSimulcast=function(O){this._peerConnections.forEach(function(q){return q.setEffectiveAdaptiveSimulcast(O)}),this._preferredCodecs.video.forEach(function(q){"adaptiveSimulcast"in q&&(q.adaptiveSimulcast=O)})},Object.defineProperty(T.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),T.prototype._closeAbsentPeerConnections=function(O){var q=new Set(O.map(function(U){return U.id}));return this._peerConnections.forEach(function(U){q.has(U.id)||U._close()}),this},T.prototype._getConfiguration=function(){return this._configurationDeferred.promise},T.prototype._getOrCreate=function(O,q){var U=this,F=this,G=this._peerConnections.get(O);if(!G){var B=this._PeerConnectionV2,z=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},q);try{G=new B(O,this._encodingParameters,this._preferredCodecs,z)}catch{throw new l}this._peerConnections.set(G.id,G),G.on("candidates",this.queue.bind(this,"candidates")),G.on("description",this.queue.bind(this,"description")),G.on("trackAdded",this.queue.bind(this,"trackAdded")),G.on("stateChanged",function D(j){j==="closed"&&(G.removeListener("stateChanged",D),F._dataTrackSenders.forEach(function(Q){return G.removeDataTrackSender(Q)}),F._mediaTrackSenders.forEach(function(Q){return G.removeMediaTrackSender(Q)}),F._peerConnections.delete(G.id),F._closedPeerConnectionIds.add(G.id),k(F),R(F))}),G.on("connectionStateChanged",function(){return k(U)}),G.on("iceConnectionStateChanged",function(){return R(U)}),this._dataTrackSenders.forEach(G.addDataTrackSender,G),this._mediaTrackSenders.forEach(G.addMediaTrackSender,G),R(this)}return G},T.prototype.close=function(){return this._peerConnections.forEach(function(O){O.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),R(this),this},T.prototype.createAndOffer=function(){var O=this;return this._getConfiguration().then(function(q){var U;do U=o.makeUUID();while(O._peerConnections.has(U));return O._getOrCreate(U,q)}).then(function(q){return q.offer()}).then(function(){return O})},T.prototype.getTrackReceivers=function(){return o.flatMap(this._peerConnections,function(O){return O.getTrackReceivers()})},T.prototype.getStates=function(){var O=[];return this._peerConnections.forEach(function(q){var U=q.getState();U&&O.push(U)}),O},T.prototype.setConfiguration=function(O){return this._configuration&&(this._configurationDeferred=o.defer(),this._peerConnections.forEach(function(q){q.setConfiguration(O)})),this._configuration=O,this._configurationDeferred.resolve(O),this},T.prototype.setIceReconnectTimeout=function(O){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(q){q.setIceReconnectTimeout(O)}),this._sessionTimeout=O),this},T.prototype.setTrackSenders=function(O){var q=new Set(O.filter(function(G){return G.kind==="data"})),U=new Set(O.filter(function(G){return G&&(G.kind==="audio"||G.kind==="video")})),F=_(this,q,U);return this._dataTrackSenders=q,this._mediaTrackSenders=U,g(this,F),this},T.prototype.update=function(O,q){var U=this;return q===void 0&&(q=!1),q&&this._closeAbsentPeerConnections(O),this._getConfiguration().then(function(F){return Promise.all(O.map(function(G){if(U._closedPeerConnectionIds.has(G.id))return null;var B=U._getOrCreate(G.id,F);return B.update(G)}))}).then(function(){return U})},T.prototype.getStats=function(){var O=Array.from(this._peerConnections.values());return Promise.all(O.map(function(q){return q.getStats().then(function(U){return[q.id,U]})})).then(function(q){return new Map(q)})},T}(a);function y(S){var T=S.createMediaStreamDestination();return T.stream.getAudioTracks()[0]}function g(S,T){(T.data.add.size||T.data.remove.size||T.media.add.size||T.media.remove.size)&&S._peerConnections.forEach(function(O){T.data.remove.forEach(O.removeDataTrackSender,O),T.media.remove.forEach(O.removeMediaTrackSender,O),T.data.add.forEach(O.addDataTrackSender,O),T.media.add.forEach(O.addMediaTrackSender,O),(T.media.add.size||T.media.remove.size||T.data.add.size&&!O.isApplicationSectionNegotiated)&&O.offer()})}function w(S,T){var O=o.difference(T,S._dataTrackSenders),q=o.difference(S._dataTrackSenders,T);return{add:O,remove:q}}function _(S,T,O){return{data:w(S,T),media:E(S,O)}}function E(S,T){var O=o.difference(T,S._mediaTrackSenders),q=o.difference(S._mediaTrackSenders,T);return{add:O,remove:q}}var b={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},C;function N(){return Object.keys(b).reduce(function(S,T){var O;return Object.assign(S,(O={},O[b[T]]=T,O))},{})}function P(S){return S.length?(C=C||N(),S.reduce(function(T,O){return C[Math.max(b[T],b[O])]})):"new"}function R(S){S._lastIceConnectionState=S.iceConnectionState,S._iceConnectionState=P(h([],v(S._peerConnections.values())).map(function(T){return T.iceConnectionState})),S.iceConnectionState!==S._lastIceConnectionState&&S.emit("iceConnectionStateChanged")}function k(S){S._lastConnectionState=S.connectionState,S._connectionState=P(h([],v(S._peerConnections.values())).map(function(T){return T.connectionState})),S.connectionState!==S._lastConnectionState&&S.emit("connectionStateChanged")}return kn=p,kn}var au,_g;function _a(){if(_g)return au;_g=1;var d=au&&au.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=er(),h=0,u=function(c){d(i,c);function i(a,o,l){var f=c.call(this)||this;return Object.defineProperties(f,{_instanceId:{value:h++},channel:{value:o},_log:{value:l.log.createLog("default",f)},_getReceiver:{value:a},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),f}return Object.defineProperty(i.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},i.prototype.setup=function(a){var o=this;this._teardown(),this._log.info("setting up msp transport for id:",a);var l=this._getReceiver(a).then(function(f){if(f.kind!=="data"&&o._log.error("Expected a DataTrackReceiver"),o._receiverPromise===l){try{o._transport=f.toDataTransport(),o.emit("ready",o._transport)}catch(p){o._log.error("Failed to toDataTransport: "+p.message)}f.once("close",function(){return o._teardown()})}});this._receiverPromise=l},i.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},i}(v);return au=u,au}var ou,gg;function Q0(){if(gg)return ou;gg=1;var d=ou&&ou.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=_a(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,"active_speaker",a)||this;return Object.defineProperties(o,{_loudestParticipantSid:{value:null,writable:!0}}),o.on("ready",function(l){l.on("message",function(f){switch(f.type){case"active_speaker":o._setLoudestParticipantSid(f.participant);break}})}),o}return Object.defineProperty(c.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),c.prototype._setLoudestParticipantSid=function(i){this.loudestParticipantSid!==i&&(this._loudestParticipantSid=i,this.emit("updated"))},c}(v);return ou=h,ou}var yd,Sg;function Y0(){if(Sg)return yd;Sg=1;var d=function(){function v(h,u,c,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:c},recv:{enumerable:!0,value:u},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:h}})}return v.of=function(h,u){var c=(u.timestamp-h.timestamp)/1e3,i=u.bytesSent-h.bytesSent,a=u.bytesReceived-h.bytesReceived,o=c>0?i/c*8:0,l=c>0?a/c*8:0,f=u.availableOutgoingBitrate,p=u.currentRoundTripTime;return new v(o,l,f,p)},v}();return yd=d,yd}var _d,bg;function K0(){if(bg)return _d;bg=1;var d=Y0(),v=function(){function h(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new d(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return h.prototype.next=function(u){var c=this.lastStats;if(this.lastStats=u,c){var i=c.id===u.id?d.of(c,u):new d(0,0);this.lastReport=i}return this.lastReport},h}();return _d=v,_d}var gd,Tg;function Ob(){if(Tg)return gd;Tg=1;function d(v){return v=v.filter(function(h){return typeof h=="number"}),v.length<1?void 0:v.reduce(function(h,u){return u+h})/v.length}return gd=d,gd}var Sd,wg;function Rb(){if(wg)return Sd;wg=1;var d=function(){function v(h,u,c){Object.defineProperties(this,{id:{enumerable:!0,value:h},trackId:{enumerable:!0,value:u},bitrate:{enumerable:!0,value:c}})}return v}();return Sd=d,Sd}var bd,kg;function Cb(){if(kg)return bd;kg=1;function d(v){return v.reduce(function(h,u){return typeof u=="number"?u+h:h},0)}return bd=d,bd}var uu,Eg;function Ab(){if(Eg)return uu;Eg=1;var d=uu&&uu.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=Ob(),h=Rb(),u=Cb(),c=function(i){d(a,i);function a(o,l,f,p,y,g,w){var _=i.call(this,o,l,f)||this,E=y>0?p/y:0;return Object.defineProperties(_,{deltaPacketsLost:{enumerable:!0,value:p},deltaPacketsReceived:{enumerable:!0,value:y},fractionLost:{enumerable:!0,value:g},jitter:{enumerable:!0,value:w},phonyFractionLost:{enumerable:!0,value:E}}),_}return a.of=function(o,l,f){if(l.id!==f.id)throw new Error("RTCStats IDs must match");var p=(f.timestamp-l.timestamp)/1e3,y=f.bytesReceived-l.bytesReceived,g=p>0?y/p*8:0,w=Math.max(f.packetsLost-l.packetsLost,0),_=f.packetsReceived-l.packetsReceived,E=f.fractionLost,b=f.jitter;return new a(l.id,o,g,w,_,E,b)},a.summarize=function(o){var l=o.map(function(g){return g.summarize()}),f=u(l.map(function(g){return g.bitrate})),p=v(l.map(function(g){return g.fractionLost})),y=v(l.map(function(g){return g.jitter}));return{bitrate:f,fractionLost:p,jitter:y}},a.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},a}(h);return uu=c,uu}var cu,Og;function Lb(){if(Og)return cu;Og=1;var d=cu&&cu.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=Ob(),h=Rb(),u=Cb(),c=function(i){d(a,i);function a(o,l,f,p){var y=i.call(this,o,l,f)||this;return Object.defineProperties(y,{rtt:{enumerable:!0,value:p}}),y}return a.of=function(o,l,f,p){if(l.id!==f.id)throw new Error("RTCStats IDs must match");var y=(f.timestamp-l.timestamp)/1e3,g=f.bytesSent-l.bytesSent,w=y>0?g/y*8:0,_=p&&typeof p.roundTripTime=="number"?p.roundTripTime/1e3:void 0;return new a(l.id,o,w,_)},a.summarize=function(o){var l=u(o.map(function(p){return p.bitrate})),f=v(o.map(function(p){return p.rtt}));return{bitrate:l,rtt:f}},a}(h);return cu=c,cu}var Td,Rg;function X0(){if(Rg)return Td;Rg=1;var d=Ab(),v=Lb(),h=function(){function u(c,i,a){Object.defineProperties(this,{ice:{enumerable:!0,value:c},audio:{enumerable:!0,value:i},video:{enumerable:!0,value:a}})}return u.prototype.summarize=function(){var c=this.audio.send.concat(this.video.send),i=v.summarize(c),a=this.audio.recv.concat(this.video.recv),o=d.summarize(a);return{ice:this.ice,send:i,recv:o,audio:{send:v.summarize(this.audio.send),recv:d.summarize(this.audio.recv)},video:{send:v.summarize(this.video.send),recv:d.summarize(this.video.recv)}}},u}();return Td=h,Td}var wd,Cg;function Pb(){if(Cg)return wd;Cg=1;var d=function(){function v(h,u,c){Object.defineProperties(this,{id:{enumerable:!0,value:h,writable:!0},trackId:{enumerable:!0,value:u,writable:!0},lastStats:{enumerable:!0,value:c,writable:!0}})}return v}();return wd=d,wd}var lu,Ag;function Z0(){if(Ag)return lu;Ag=1;var d=lu&&lu.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=Ab(),h=Pb(),u=function(c){d(i,c);function i(a,o){var l=c.call(this,o.id,a,o)||this;return Object.defineProperties(l,{lastReport:{enumerable:!0,value:null,writable:!0}}),l}return i.prototype.next=function(a,o){var l=this.lastStats;this.lastStats=o,this.trackId=a;var f=v.of(a,l,o);return this.lastReport=f,f},i}(h);return lu=u,lu}var su,Lg;function W0(){if(Lg)return su;Lg=1;var d=su&&su.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=Pb(),h=Lb(),u=function(c){d(i,c);function i(a,o){var l=c.call(this,o.id,a,o)||this;return Object.defineProperties(l,{lastReport:{enumerable:!0,value:null,writable:!0}}),l}return i.prototype.next=function(a,o,l){var f=this.lastStats;this.lastStats=o,this.trackId=a;var p=h.of(a,f,o,l);return this.lastReport=p,p},i}(v);return su=u,su}var En,Pg;function J0(){if(Pg)return En;Pg=1;var d=En&&En.__read||function(T,O){var q=typeof Symbol=="function"&&T[Symbol.iterator];if(!q)return T;var U=q.call(T),F,G=[],B;try{for(;(O===void 0||O-- >0)&&!(F=U.next()).done;)G.push(F.value)}catch(z){B={error:z}}finally{try{F&&!F.done&&(q=U.return)&&q.call(U)}finally{if(B)throw B.error}}return G},v=En&&En.__spreadArray||function(T,O){for(var q=0,U=O.length,F=T.length;q<U;q++,F++)T[F]=O[q];return T},h=En&&En.__values||function(T){var O=typeof Symbol=="function"&&Symbol.iterator,q=O&&T[O],U=0;if(q)return q.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&U>=T.length&&(T=void 0),{value:T&&T[U++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")},u=Xt().guessBrowser,c=K0(),i=X0(),a=Z0(),o=W0(),l=function(){function T(O){Object.defineProperties(this,{pc:{enumerable:!0,value:O},ice:{enumerable:!0,value:new c},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return T.prototype.next=function(){var O=this,q=u()==="firefox"?k(this):S(this);return q.then(function(){var U=v([],d(O.audio.send.values())),F=v([],d(O.video.send.values())),G=v([],d(O.audio.recv.values())),B=v([],d(O.video.recv.values())),z=new i(O.ice.lastReport,{send:U.map(function(D){return D.lastReport}).filter(function(D){return D}),recv:G.map(function(D){return D.lastReport}).filter(function(D){return D})},{send:F.map(function(D){return D.lastReport}).filter(function(D){return D}),recv:B.map(function(D){return D.lastReport}).filter(function(D){return D})});return O.lastReport=z,z})},T}();function f(T){return Promise.all(T.map(function(O){var q=O.track.id;return O.getStats().then(function(U){var F,G;try{for(var B=h(U.values()),z=B.next();!z.done;z=B.next()){var D=z.value;D.type==="inbound-rtp"&&(D.id=q+"-"+D.id)}}catch(j){F={error:j}}finally{try{z&&!z.done&&(G=B.return)&&G.call(B)}finally{if(F)throw F.error}}return[q,U]})})).then(function(O){return new Map(O)})}function p(T,O,q,U,F){var G=O[U.mediaType];if(!F){var B=q.get(U.trackId);B&&(F=B.trackIdentifier)}if(G&&F){if(G.has(U.id))return G.get(U.id);var z=new T(F,U);G.set(U.id,z)}return null}function y(T){return{audio:T.audio.send,video:T.video.send}}function g(T){return{audio:T.audio.recv,video:T.video.recv}}function w(T,O,q,U){return p(o,y(T),O,q,U)}function _(T,O,q,U){return p(a,g(T),O,q,U)}function E(T){return{audio:new Set(T.audio.send.keys()),video:new Set(T.video.send.keys())}}function b(T){return{audio:new Set(T.audio.recv.keys()),video:new Set(T.video.recv.keys())}}function C(T,O,q,U){var F,G;try{for(var B=h(O.values()),z=B.next();!z.done;z=B.next()){var D=z.value;if(D.type==="outbound-rtp"&&!D.isRemote){if(u()!=="firefox"&&!D.trackId)continue;var j=q[D.mediaType];j&&j.delete(D.id);var Q=w(T,O,D,U);if(Q){var Z=O.get(D.remoteId);Q.next(U||Q.trackId,D,Z)}}}}catch(K){F={error:K}}finally{try{z&&!z.done&&(G=B.return)&&G.call(B)}finally{if(F)throw F.error}}}function N(T,O,q,U){var F,G;try{for(var B=h(O.values()),z=B.next();!z.done;z=B.next()){var D=z.value;if(D.type==="inbound-rtp"&&!D.isRemote){var j=q[D.mediaType];j&&j.delete(D.id);var Q=_(T,O,D,U);Q&&Q.next(U||Q.trackId,D)}}}catch(Z){F={error:Z}}finally{try{z&&!z.done&&(G=B.return)&&G.call(B)}finally{if(F)throw F.error}}}function P(T,O){var q=function(F){var G=T[F],B=O[F];B.forEach(function(z){return G.delete(z)})};for(var U in O)q(U)}function R(T,O){var q,U,F,G,B;try{for(var z=h(O.values()),D=z.next();!D.done;D=z.next()){var j=D.value;j.type==="transport"&&(B=O.get(j.selectedCandidatePairId))}}catch(K){q={error:K}}finally{try{D&&!D.done&&(U=z.return)&&U.call(z)}finally{if(q)throw q.error}}if(B){T.next(B);return}try{for(var Q=h(O.values()),Z=Q.next();!Z.done;Z=Q.next()){var j=Z.value;j.type==="candidate-pair"&&j.nominated&&(!("selected"in j)||j.selected)&&T.next(j)}}catch(K){F={error:K}}finally{try{Z&&!Z.done&&(G=Q.return)&&G.call(Q)}finally{if(F)throw F.error}}}function k(T){var O=T.pc.getTransceivers().filter(function(U){return U.currentDirection&&U.currentDirection.match(/send/)&&U.sender.track}).map(function(U){return U.sender}),q=T.pc.getTransceivers().filter(function(U){return U.currentDirection&&U.currentDirection.match(/recv/)}).map(function(U){return U.receiver});return Promise.all([f(O),f(q),T.pc.getStats()]).then(function(U){var F=d(U,3),G=F[0],B=F[1],z=F[2],D=y(T),j=E(T);G.forEach(function(K,A){return C(T,K,j,A)}),P(D,j);var Q=g(T),Z=b(T);B.forEach(function(K,A){return N(T,K,Z,A)}),P(Q,Z),R(T.ice,z)})}function S(T){return T.pc.getStats().then(function(O){var q=y(T),U=E(T);C(T,O,U),P(q,U);var F=g(T),G=b(T);N(T,O,G),P(F,G),R(T.ice,O)})}return En=l,En}var Ti,Mg;function $0(){if(Mg)return Ti;Mg=1;var d=Ti&&Ti.__extends||function(){var a=function(o,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])},a(o,l)};return function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(o,l);function f(){this.constructor=o}o.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),v=Ti&&Ti.__read||function(a,o){var l=typeof Symbol=="function"&&a[Symbol.iterator];if(!l)return a;var f=l.call(a),p,y=[],g;try{for(;(o===void 0||o-- >0)&&!(p=f.next()).done;)y.push(p.value)}catch(w){g={error:w}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(g)throw g.error}}return y},h=er(),u=J0(),c=function(a){d(o,a);function o(l,f){var p=a.call(this)||this;return Object.defineProperties(p,{_factories:{value:new WeakMap},_manager:{value:l},_signaling:{value:f}}),f.on("updated",function(){return p.emit("updated")}),p}return Object.defineProperty(o.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),o.prototype.start=function(){var l=this;this.stop();var f=setTimeout(function(){l._timeout===f&&i(l).then(function(p){if(l._timeout===f){if(p.length){var y=v(p,1),g=y[0];l._signaling.put(g)}l.start()}})},200);this._timeout=f},o.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},o}(h);function i(a){var o=a._manager._peerConnections?Array.from(a._manager._peerConnections.values()):[],l=o.map(function(y){return y._peerConnection}).filter(function(y){return y.signalingState!=="closed"}),f=l.map(function(y){if(a._factories.has(y))return a._factories.get(y);var g=new u(y);return a._factories.set(y,g),g}),p=f.map(function(y){return y.next().catch(function(){return null})});return Promise.all(p).then(function(y){return y.filter(function(g){return g}).map(function(g){return g.summarize()})})}return Ti=c,Ti}var kd,xg;function eO(){if(xg)return kd;xg=1;var d=ut().defer,v=function(){function h(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return h.prototype.put=function(u){this._hasValue=!0,this._value=u;var c=this._deferreds.shift();return c&&c.resolve(u),this},h.prototype.take=function(){var u=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var c=d();return this._deferreds.push(c),c.promise.then(function(i){return u._hasValue=!1,i})},h}();return kd=v,kd}var fu,Dg;function tO(){if(Dg)return fu;Dg=1;var d=fu&&fu.__extends||function(){var o=function(l,f){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},o(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");o(l,f);function p(){this.constructor=l}l.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),v=_a(),h=eO(),u=Li(),c=5e3,i=function(o){d(l,o);function l(f,p,y){var g=o.call(this,f,"network_quality",y)||this;return Object.defineProperties(g,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new h},_resendTimer:{value:new u(function(){g._resendTimer.setDelay(g._resendTimer.delay*1.5),g._sendNetworkQualityInputs()},c,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:p.local,remoteReportLevel:p.remote}}}}),g.on("ready",function(w){w.on("message",function(_){switch(g._log.debug("Incoming: ",_),_.type){case"network_quality":g._handleNetworkQualityMessage(_);break}})}),g._sendNetworkQualityInputs(),g}return Object.defineProperty(l.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),l.prototype._handleNetworkQualityMessage=function(f){var p=this,y=!1,g=null,w=f?f.local:null;typeof w=="number"?(g=w,this._levels=null):typeof w=="object"&&w&&(this._levels=w,g=typeof w.level=="number"?w.level:Math.min(w.audio.send,w.audio.recv,w.video.send,w.video.recv)),g!==null&&this.level!==g&&(this._level=g,y=!0),this._remoteLevels=f&&f.remotes?f.remotes.reduce(function(_,E){var b=p._remoteLevels.get(E.sid)||{};return b.level!==E.level&&(y=!0),_.set(E.sid,E)},new Map):this._remoteLevels,y&&this.emit("updated"),this._resendTimer.setDelay(c),this._resendTimer.isSet&&setTimeout(function(){return p._sendNetworkQualityInputs()},1e3)},l.prototype._sendNetworkQualityInputs=function(){var f=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(p){f._transport&&f._transport.publish(a(p,f._networkQualityReportLevels))}).finally(function(){f._resendTimer.start()})},l.prototype.put=function(f){this._networkQualityInputs.put(f)},l}(v);function a(o,l){return Object.assign({type:"network_quality"},o,l)}return fu=i,fu}var du,jg;function Mb(){if(jg)return du;jg=1;var d=du&&du.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=er().EventEmitter,h=function(u){d(c,u);function c(){var i=u.call(this)||this;return Object.defineProperties(i,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),i}return c.prototype.disable=function(){return this.enable(!1)},c.prototype.enable=function(i){return i=typeof i=="boolean"?i:!0,this.isEnabled!==i&&(this._isEnabled=i,this.emit("updated")),this},c}(v);return du=h,du}var vu,Ng;function rO(){if(Ng)return vu;Ng=1;var d=vu&&vu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Mb(),h=function(u){d(c,u);function c(){var i=u.call(this)||this;return Object.defineProperties(i,{_revision:{value:1,writable:!0}}),i}return c.prototype.update=function(i){return i.revision<this._revision?this:(this._revision=i.revision,this.enable(i.is_recording))},c}(v);return vu=h,vu}var hu,qg;function xb(){if(qg)return hu;qg=1;var d=hu&&hu.__extends||function(){var E=function(b,C){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,P){N.__proto__=P}||function(N,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(N[R]=P[R])},E(b,C)};return function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");E(b,C);function N(){this.constructor=b}b.prototype=C===null?Object.create(C):(N.prototype=C.prototype,new N)}}(),v=Mb(),h=ya(),u=Li(),c=ut().buildLogLevels,i=ht().DEFAULT_LOG_LEVEL,a=qr(),o=On(),l=o.MediaConnectionError,f=o.MediaDTLSTransportFailedError,p=o.SignalingConnectionDisconnectedError,y=0,g={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},w=function(E){d(b,E);function b(C,N,P,R){var k=this;R=Object.assign({logLevel:i,RecordingSignaling:v,Timeout:u},R);var S=c(R.logLevel);k=E.call(this,"connected",g)||this;var T=R.RecordingSignaling,O=new R.Timeout(function(){k._disconnect(k._reconnectingError)},R.sessionTimeout,!1);return Object.defineProperties(k,{_instanceId:{value:y++},_log:{value:R.log?R.log.createLog("default",k):new a("default",k,S,R.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:R},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:O},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:C},name:{enumerable:!0,value:P},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new T},sid:{enumerable:!0,value:N}}),k.on("connectionStateChanged",function(){k.connectionState==="failed"&&!["disconnected","failed"].includes(k.iceConnectionState)&&k._disconnect(new f)}),k.on("iceConnectionStateChanged",function(){return _(k)}),k.on("signalingConnectionStateChanged",function(){return _(k)}),setTimeout(function(){return _(k)}),k}return b.prototype._disconnect=function(C){return this.state!=="disconnected"?(this.preempt("disconnected",null,[C]),!0):!1},b.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},b.prototype.connectParticipant=function(C){var N=this;return C.state==="disconnected"||this.participants.has(C.sid)?!1:(this.participants.set(C.sid,C),C.on("stateChanged",function P(R){R==="disconnected"&&(C.removeListener("stateChanged",P),N.participants.delete(C.sid),N.emit("participantDisconnected",C))}),this.emit("participantConnected",C),!0)},b.prototype.disconnect=function(){return this._disconnect()},b.prototype.setDominantSpeaker=function(C){this.dominantSpeakerSid=C,this.emit("dominantSpeakerChanged")},b}(h);function _(E){if(E.state==="disconnected"||E.signalingConnectionState==="disconnected"){E._sessionTimeout.clear();return}var b;E.signalingConnectionState==="reconnecting"?b=E.signalingConnectionState:E.iceConnectionState==="failed"?(E._mediaConnectionIsReconnecting=!0,b="reconnecting"):E.iceConnectionState==="new"||E.iceConnectionState==="checking"?b=E._mediaConnectionIsReconnecting?"reconnecting":"connected":(E._mediaConnectionIsReconnecting=!1,E._reconnectingError=null,E._sessionTimeout.clear(),b="connected"),b!==E.state&&(b==="reconnecting"?(E._reconnectingError=E.signalingConnectionState==="reconnecting"?new p:new l,E._sessionTimeout.start(),E.preempt(b,null,[E._reconnectingError])):E.preempt(b))}return hu=w,hu}var Ed,Ug;function nO(){if(Ug)return Ed;Ug=1;var d=function(){function v(h){var u=h.actual,c=u===void 0?null:u,i=h.available,a=i===void 0?null:i,o=h.level,l=o===void 0?null:o;Object.defineProperties(this,{actual:{value:c,enumerable:!0},available:{value:a,enumerable:!0},level:{value:l,enumerable:!0}})}return v}();return Ed=d,Ed}var Od,Bg;function iO(){if(Bg)return Od;Bg=1;var d=function(){function v(h){var u=h.fractionLost,c=u===void 0?null:u,i=h.level,a=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:c,enumerable:!0},level:{value:a,enumerable:!0}})}return v}();return Od=d,Od}var Rd,Ig;function aO(){if(Ig)return Rd;Ig=1;var d=function(){function v(h){var u=h.jitter,c=u===void 0?null:u,i=h.rtt,a=i===void 0?null:i,o=h.level,l=o===void 0?null:o;Object.defineProperties(this,{jitter:{value:c,enumerable:!0},rtt:{value:a,enumerable:!0},level:{value:l,enumerable:!0}})}return v}();return Rd=d,Rd}var Cd,Vg;function Db(){if(Vg)return Cd;Vg=1;var d=nO(),v=iO(),h=aO(),u=function(){function c(i){var a=i.bandwidth,o=a===void 0?null:a,l=i.fractionLost,f=l===void 0?null:l,p=i.latency,y=p===void 0?null:p;Object.defineProperties(this,{bandwidth:{value:o?new d(o):null,enumerable:!0},fractionLost:{value:f?new v(f):null,enumerable:!0},latency:{value:y?new h(y):null,enumerable:!0}})}return c}();return Cd=u,Cd}var pu,zg;function oO(){if(zg)return pu;zg=1;var d=pu&&pu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Db(),h=function(u){d(c,u);function c(i){return u.call(this,i)||this}return c}(v);return pu=h,pu}var mu,Hg;function uO(){if(Hg)return mu;Hg=1;var d=mu&&mu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Db(),h=function(u){d(c,u);function c(i){return u.call(this,i)||this}return c}(v);return mu=h,mu}var Ad,Fg;function jb(){if(Fg)return Ad;Fg=1;var d=oO(),v=uO(),h=function(){function u(c){var i=c.send,a=c.recv,o=c.sendStats,l=o===void 0?null:o,f=c.recvStats,p=f===void 0?null:f;Object.defineProperties(this,{send:{value:i,enumerable:!0},recv:{value:a,enumerable:!0},sendStats:{value:l?new d(l):null,enumerable:!0},recvStats:{value:p?new v(p):null,enumerable:!0}})}return u}();return Ad=h,Ad}var yu,Gg;function cO(){if(Gg)return yu;Gg=1;var d=yu&&yu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=jb(),h=function(u){d(c,u);function c(i){return u.call(this,i)||this}return c}(v);return yu=h,yu}var _u,Qg;function lO(){if(Qg)return _u;Qg=1;var d=_u&&_u.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=jb(),h=function(u){d(c,u);function c(i){return u.call(this,i)||this}return c}(v);return _u=h,_u}var Ld,Yg;function sO(){if(Yg)return Ld;Yg=1;var d=cO(),v=lO(),h=function(){function u(c){var i=c.level,a=c.audio,o=c.video;Object.defineProperties(this,{level:{value:i,enumerable:!0},audio:{value:a?new d(a):null,enumerable:!0},video:{value:o?new v(o):null,enumerable:!0}})}return u}();return Ld=h,Ld}var gu,Kg;function ev(){if(Kg)return gu;Kg=1;var d=gu&&gu.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=ya(),h=sO(),u={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},c=function(i){d(a,i);function a(){var o=i.call(this,"connecting",u)||this;return Object.defineProperties(o,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),o}return Object.defineProperty(a.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),a.prototype.addTrack=function(o){return this.tracks.set(o.id||o.sid,o),this.emit("trackAdded",o),this},a.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},a.prototype.removeTrack=function(o){var l=this.tracks.get(o.id||o.sid);return this.tracks.delete(o.id||o.sid),l&&this.emit("trackRemoved",o),l||null},a.prototype.setNetworkQualityLevel=function(o,l){this._networkQualityLevel!==o&&(this._networkQualityLevel=o,this._networkQualityStats=l&&(l.audio||l.video)?new h(l):null,this.emit("networkQualityLevelChanged"))},a.prototype.connect=function(o,l){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=o),this._identity||(this._identity=l),this.preempt("connected"),!0):!1},a.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},a}(v);return gu=c,gu}var Su,Xg;function fO(){if(Xg)return Su;Xg=1;var d=Su&&Su.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ev(),h=function(u){d(c,u);function c(i,a){var o=u.call(this)||this;return o.connect(i,a),o}return c}(v);return Su=h,Su}var bu,Zg;function Nb(){if(Zg)return bu;Zg=1;var d=bu&&bu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=er().EventEmitter,h=function(u){d(c,u);function c(i,a,o,l){var f=u.call(this)||this,p=null;return Object.defineProperties(f,{_error:{value:null,writable:!0},_isEnabled:{value:o,writable:!0},_priority:{value:l,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return p},set:function(y){p===null&&(p=y)}},kind:{enumerable:!0,value:a},name:{enumerable:!0,value:i}}),f}return Object.defineProperty(c.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),c.prototype.disable=function(){return this.enable(!1)},c.prototype.enable=function(i){return i=typeof i=="boolean"?i:!0,this.isEnabled!==i&&(this._isEnabled=i,this.emit("updated")),this},c.prototype.setTrackTransceiver=function(i){return i=i||null,this.trackTransceiver!==i&&(this._trackTransceiver=i,this.emit("updated")),this},c.prototype.setSid=function(i){return this.sid===null&&(this._sid=i,this.emit("updated")),this},c}(v);return bu=h,bu}var Tu,Wg;function dO(){if(Wg)return Tu;Wg=1;var d=Tu&&Tu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=Nb(),h=function(u){d(c,u);function c(i,a,o,l,f,p){var y=u.call(this,a,o,l,f)||this;return Object.defineProperties(y,{_isSwitchedOff:{value:p,writable:!0}}),y.setSid(i),y}return Object.defineProperty(c.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),c.prototype.subscribeFailed=function(i){return this.error||(this._error=i,this.emit("updated")),this},c.prototype.setPriority=function(i){return this._priority!==i&&(this._priority=i,this.emit("updated")),this},c.prototype.setSwitchedOff=function(i){return this._isSwitchedOff!==i&&(this._isSwitchedOff=i,this.emit("updated")),this},c}(v);return Tu=h,Tu}var wu,Jg;function vO(){if(Jg)return wu;Jg=1;var d=wu&&wu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=dO(),h=function(u){d(c,u);function c(i,a){return u.call(this,i.sid,i.name,i.kind,i.enabled,i.priority,a)||this}return c.prototype.update=function(i){return this.enable(i.enabled),this.setPriority(i.priority),this},c}(v);return wu=h,wu}var ku,$g;function hO(){if($g)return ku;$g=1;var d=ku&&ku.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=fO(),h=vO(),u=function(c){d(i,c);function i(a,o,l,f,p,y){var g=c.call(this,a.sid,a.identity)||this;return y=Object.assign({RemoteTrackPublicationV2:h},y),Object.defineProperties(g,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:y.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:o},updateSubscriberTrackPriority:{value:function(w,_){return l(w,_)}},updateTrackRenderHint:{value:function(w,_){return f(w,_)}},clearTrackHint:{value:function(w){return p(w)}},revision:{enumerable:!0,get:function(){return this._revision}}}),g.update(a)}return i.prototype._getOrCreateTrack=function(a){var o=this._RemoteTrackPublicationV2,l=this.tracks.get(a.sid);if(!l){var f=this._getInitialTrackSwitchOffState(a.sid);l=new o(a,f),this.addTrack(l)}return l},i.prototype.update=function(a){var o=this;if(this.revision!==null&&a.revision<=this.revision)return this;this._revision=a.revision;var l=new Set;switch(a.tracks.forEach(function(f){var p=o._getOrCreateTrack(f);p.update(f),l.add(p)}),this.tracks.forEach(function(f){l.has(f)||o.removeTrack(f)}),a.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},i}(v);return ku=u,ku}var Eu,eS;function pO(){if(eS)return Eu;eS=1;var d=Eu&&Eu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=_a(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,"track_priority",a)||this;return Object.defineProperties(o,{_enqueuedPriorityUpdates:{value:new Map}}),o.on("ready",function(l){Array.from(o._enqueuedPriorityUpdates.keys()).forEach(function(f){l.publish({type:"track_priority",track:f,subscribe:o._enqueuedPriorityUpdates.get(f)})})}),o}return c.prototype.sendTrackPriorityUpdate=function(i,a,o){if(a!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+a);this._enqueuedPriorityUpdates.set(i,o),this._transport&&this._transport.publish({type:"track_priority",track:i,subscribe:o})},c}(v);return Eu=h,Eu}var Ou,tS;function mO(){if(tS)return Ou;tS=1;var d=Ou&&Ou.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=_a(),h=function(u){d(c,u);function c(i,a){var o=u.call(this,i,"track_switch_off",a)||this;return o.on("ready",function(l){l.on("message",function(f){switch(f.type){case"track_switch_off":o._setTrackSwitchOffUpdates(f.off||[],f.on||[]);break}})}),o}return c.prototype._setTrackSwitchOffUpdates=function(i,a){this.emit("updated",i,a)},c}(v);return Ou=h,Ou}var Ru,rS;function yO(){if(rS)return Ru;rS=1;var d=Ru&&Ru.__extends||function(){var o=function(l,f){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},o(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");o(l,f);function p(){this.constructor=l}l.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),v=_a(),h=Li(),u=ut().isDeepEqual,c=2e3,i=1,a=function(o){d(l,o);function l(f,p){var y=o.call(this,f,"render_hints",p)||this;return Object.defineProperties(y,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new h(function(){y._sendAllHints(),y._responseTimer.setDelay(y._responseTimer.delay*2)},c,!1)}}),y.on("ready",function(g){g.on("message",function(w){switch(y._log.debug("Incoming: ",w),w.type){case"render_hints":y._processHintResults(w&&w.subscriber&&w.subscriber.hints||[]);break;default:y._log.warn("Unknown message type: ",w.type);break}}),y._sendAllHints()}),y}return l.prototype._sendAllHints=function(){var f=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(p){var y=f._trackSidsToRenderHints.get(p);y.renderDimensions&&(y.isDimensionDirty=!0),"enabled"in y&&(y.isEnabledDirty=!0)}),this._sendHints()},l.prototype._processHintResults=function(f){var p=this;this._responseTimer.clear(),this._responseTimer.setDelay(c),f.forEach(function(y){y.result!=="OK"&&p._log.debug("Server error processing hint:",y)}),this._sendHints()},l.prototype._sendHints=function(){var f=this;if(!(!this._transport||this._responseTimer.isSet)){var p=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(g){var w=f._trackSidsToRenderHints.get(g);if(w.isEnabledDirty||w.isDimensionDirty){var _={track:g};w.isEnabledDirty&&(_.enabled=w.enabled,w.isEnabledDirty=!1),w.isDimensionDirty&&(_.render_dimensions=w.renderDimensions,w.isDimensionDirty=!1),p.push(_)}}),p.length>0){var y={type:"render_hints",subscriber:{id:i++,hints:p}};this._log.debug("Outgoing: ",y),this._transport.publish(y),this._responseTimer.start()}}},l.prototype.setTrackHint=function(f,p){var y=this._trackSidsToRenderHints.get(f)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in p&&y.enabled!==p.enabled&&(y.enabled=!!p.enabled,y.isEnabledDirty=!0),p.renderDimensions&&!u(p.renderDimensions,y.renderDimensions)&&(y.renderDimensions=p.renderDimensions,y.isDimensionDirty=!0),this._trackSidsToRenderHints.set(f,y),this._sendHints()},l.prototype.clearTrackHint=function(f){this._trackSidsToRenderHints.delete(f)},l}(v);return Ru=a,Ru}var Cu,nS;function _O(){if(nS)return Cu;nS=1;var d=Cu&&Cu.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=_a(),h=1,u=function(c){d(i,c);function i(a,o){var l=c.call(this,a,"publisher_hints",o)||this;return l.on("ready",function(f){l._log.debug("publisher_hints transport ready:",f),f.on("message",function(p){switch(l._log.debug("Incoming: ",p),p.type){case"publisher_hints":p.publisher&&p.publisher.hints&&p.publisher.id&&l._processPublisherHints(p.publisher.hints,p.publisher.id);break;default:l._log.warn("Unknown message type: ",p.type);break}})}),l}return i.prototype.sendTrackReplaced=function(a){var o=a.trackSid;if(this._transport){var l={type:"client_reset",track:o,id:h++};this._log.debug("Outgoing: ",l),this._transport.publish(l)}},i.prototype.sendHintResponse=function(a){var o=a.id,l=a.hints;if(this._transport){var f={type:"publisher_hints",id:o,hints:l};this._log.debug("Outgoing: ",f),this._transport.publish(f)}},i.prototype._processPublisherHints=function(a,o){try{this.emit("updated",a,o)}catch(l){this._log.error("error processing hints:",l)}},i}(v);return Cu=u,Cu}var wi,iS;function gO(){if(iS)return wi;iS=1;var d=wi&&wi.__extends||function(){var A=function(x,L){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&(I[ie]=W[ie])},A(x,L)};return function(x,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");A(x,L);function I(){this.constructor=x}x.prototype=L===null?Object.create(L):(I.prototype=L.prototype,new I)}}(),v=wi&&wi.__read||function(A,x){var L=typeof Symbol=="function"&&A[Symbol.iterator];if(!L)return A;var I=L.call(A),W,ie=[],$;try{for(;(x===void 0||x-- >0)&&!(W=I.next()).done;)ie.push(W.value)}catch(ae){$={error:ae}}finally{try{W&&!W.done&&(L=I.return)&&L.call(I)}finally{if($)throw $.error}}return ie},h=Q0(),u=$0(),c=tO(),i=rO(),a=xb(),o=hO(),l=kb(),f=pO(),p=mO(),y=yO(),g=_O(),w=ut(),_=w.constants.DEFAULT_SESSION_TIMEOUT_SEC,E=w.createBandwidthProfilePayload,b=w.defer,C=w.difference,N=w.filterObject,P=w.flatMap,R=w.oncePerTick,k=hb(),S=On().createTwilioError,T=1e4,O=function(A){d(x,A);function x(L,I,W,ie,$){var ae=this;I.options=Object.assign({session_timeout:_},I.options),$=Object.assign({DominantSpeakerSignaling:h,NetworkQualityMonitor:u,NetworkQualitySignaling:c,RecordingSignaling:i,RemoteParticipantV2:o,TrackPrioritySignaling:f,TrackSwitchOffSignaling:p,bandwidthProfile:null,sessionTimeout:I.options.session_timeout*1e3,statsPublishIntervalMs:T},$),L.setBandwidthProfile($.bandwidthProfile);var pe=I.options,Te=pe.signaling_region,xe=pe.audio_processors,Ee=xe===void 0?[]:xe;L.setSignalingRegion(Te),Ee.includes("krisp")&&Ee.push("rnnoise"),L.setAudioProcessors(Ee),ie.setIceReconnectTimeout($.sessionTimeout),ae=A.call(this,L,I.sid,I.name,$)||this;var Ce=function(Pe){return ae._getTrackReceiver(Pe)},Le=ae._log;return Object.defineProperties(ae,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:$.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:L.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:L.networkQualityConfiguration},_peerConnectionManager:{value:ie},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:$.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new $.DominantSpeakerSignaling(Ce,{log:Le})},_networkQualitySignaling:{value:new $.NetworkQualitySignaling(Ce,L.networkQualityConfiguration,{log:Le})},_renderHintsSignaling:{value:new y(Ce,{log:Le})},_publisherHintsSignaling:{value:new g(Ce,{log:Le})},_trackPrioritySignaling:{value:new $.TrackPrioritySignaling(Ce,{log:Le})},_trackSwitchOffSignaling:{value:new $.TrackSwitchOffSignaling(Ce,{log:Le})},_pendingSwitchOffStates:{value:new Map},_transport:{value:W},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:I.options.media_region||null}}),ae._initTrackSwitchOffSignaling(),ae._initDominantSpeakerSignaling(),ae._initNetworkQualityMonitorSignaling(),ae._initPublisherHintSignaling(),G(ae,L),B(ae,ie),z(ae,W),D(ae,W,$.statsPublishIntervalMs),ae._update(I),ae._peerConnectionManager.setEffectiveAdaptiveSimulcast(ae._publisherHintsSignaling.isSetup),ae}return Object.defineProperty(x.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),x.prototype._deleteTrackReceiverDeferred=function(L){return this._trackReceiverDeferreds.delete(L)},x.prototype._getOrCreateTrackReceiverDeferred=function(L){var I=this._trackReceiverDeferreds.get(L)||b(),W=this._peerConnectionManager.getTrackReceivers(),ie=W.find(function($){return $.id===L&&$.readyState!=="ended"});return ie?I.resolve(ie):this._trackReceiverDeferreds.set(L,I),I},x.prototype._addTrackReceiver=function(L){var I=this._getOrCreateTrackReceiverDeferred(L.id);return I.resolve(L),this},x.prototype._disconnect=function(L){var I=A.prototype._disconnect.call(this,L);return I&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(W){W.publishFailed(L||new Error("LocalParticipant disconnected"))}),I},x.prototype._getTrackReceiver=function(L){var I=this;return this._getOrCreateTrackReceiverDeferred(L).promise.then(function(W){return I._deleteTrackReceiverDeferred(L),W})},x.prototype._getInitialTrackSwitchOffState=function(L){var I=this._pendingSwitchOffStates.get(L)||!1;return this._pendingSwitchOffStates.delete(L),I&&this._log.warn("["+L+"] was initially switched off! "),I},x.prototype._getTrackSidsToTrackSignalings=function(){var L=P(this.participants,function(I){return Array.from(I.tracks)});return new Map(L)},x.prototype._getOrCreateRemoteParticipant=function(L){var I=this,W=this._RemoteParticipantV2,ie=this.participants.get(L.sid),$=this;return ie||(ie=new W(L,function(ae){return I._getInitialTrackSwitchOffState(ae)},function(ae,pe){return I._trackPrioritySignaling.sendTrackPriorityUpdate(ae,"subscribe",pe)},function(ae,pe){return I._renderHintsSignaling.setTrackHint(ae,pe)},function(ae){return I._renderHintsSignaling.clearTrackHint(ae)}),ie.on("stateChanged",function ae(pe){pe==="disconnected"&&(ie.removeListener("stateChanged",ae),$.participants.delete(ie.sid),$._disconnectedParticipantRevisions.set(ie.sid,ie.revision))}),this.connectParticipant(ie)),ie},x.prototype._getState=function(){return{participant:this.localParticipant.getState()}},x.prototype._maybeAddBandwidthProfile=function(L){var I=this.localParticipant,W=I.bandwidthProfile,ie=I.bandwidthProfileRevision;return W&&this._lastBandwidthProfileRevision<ie?(this._lastBandwidthProfileRevision=ie,Object.assign({bandwidth_profile:E(W)},L)):L},x.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},x.prototype._publishPeerConnectionState=function(L){this._transport.publish(Object.assign({peer_connections:[L]},this._getState()))},x.prototype._update=function(L){var I=this;if(L.subscribed&&L.subscribed.revision>this._subscribedRevision){this._subscribedRevision=L.subscribed.revision,L.subscribed.tracks.forEach(function($){$.id?(I._subscriptionFailures.delete($.sid),I._subscribed.set($.sid,$.id)):$.error&&!I._subscriptionFailures.has($.sid)&&I._subscriptionFailures.set($.sid,$.error)});var W=new Set(L.subscribed.tracks.filter(function($){return!!$.id}).map(function($){return $.sid}));this._subscribed.forEach(function($,ae){W.has(ae)||I._subscribed.delete(ae)})}var ie=new Set;return(L.participants||[]).forEach(function($){if($.sid!==I.localParticipant.sid){var ae=I._disconnectedParticipantRevisions.get($.sid);if(!(ae&&$.revision<=ae)){ae&&I._disconnectedParticipantRevisions.delete($.sid);var pe=I._getOrCreateRemoteParticipant($);pe.update($),ie.add(pe)}}}),L.type==="synced"&&this.participants.forEach(function($){ie.has($)||$.disconnect()}),j(this),L.peer_connections&&this._peerConnectionManager.update(L.peer_connections,L.type==="synced"),L.recording&&this.recording.update(L.recording),L.published&&L.published.revision>this._publishedRevision&&(this._publishedRevision=L.published.revision,L.published.tracks.forEach(function($){$.sid&&I._published.set($.id,$.sid)}),this.localParticipant.update(L.published)),L.participant&&this.localParticipant.connect(L.participant.sid,L.participant.identity),[this._dominantSpeakerSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function($){var ae=$.channel;!$.isSetup&&L.media_signaling&&L.media_signaling[ae]&&L.media_signaling[ae].transport&&L.media_signaling[ae].transport.type==="data-channel"&&$.setup(L.media_signaling[ae].transport.label)}),L.type==="warning"&&L.states&&L.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=L.states.revision,this.localParticipant.updateMediaStates(L.states)),this},x.prototype._initPublisherHintSignaling=function(){var L=this;this._publisherHintsSignaling.on("updated",function(W,ie){Promise.all(W.map(function($){return L.localParticipant.setPublisherHint($.track,$.encodings).then(function(ae){return{track:$.track,result:ae}})})).then(function($){L._publisherHintsSignaling.sendHintResponse({id:ie,hints:$})})});var I=function(W){W.kind==="video"&&W.trackTransceiver.on("replaced",function(){L._publisherHintsSignaling.sendTrackReplaced({trackSid:W.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(W){return I(W)}),this.localParticipant.on("trackAdded",function(W){return I(W)})},x.prototype._initTrackSwitchOffSignaling=function(){var L=this;this._trackSwitchOffSignaling.on("updated",function(I,W){try{L._log.debug("received trackSwitch: ",{tracksOn:W,tracksOff:I});var ie=new Map;W.forEach(function($){return ie.set($,!0)}),I.forEach(function($){ie.get($)&&L._log.warn($+" is DUPLICATED in both tracksOff and tracksOn list"),ie.set($,!1)}),L.participants.forEach(function($){$.tracks.forEach(function(ae){var pe=ie.get(ae.sid);typeof pe<"u"&&(ae.setSwitchedOff(!pe),ie.delete(ae.sid))})}),ie.forEach(function($,ae){return L._pendingSwitchOffStates.set(ae,!$)})}catch($){L._log.error("error processing track switch off:",$)}})},x.prototype._initDominantSpeakerSignaling=function(){var L=this;this._dominantSpeakerSignaling.on("updated",function(){return L.setDominantSpeaker(L._dominantSpeakerSignaling.loudestParticipantSid)})},x.prototype._initNetworkQualityMonitorSignaling=function(){var L=this;this._networkQualitySignaling.on("ready",function(){var I=new L._NetworkQualityMonitor(L._peerConnectionManager,L._networkQualitySignaling);L._networkQualityMonitor=I,I.on("updated",function(){L.iceConnectionState!=="failed"&&(L.localParticipant.setNetworkQualityLevel(I.level,I.levels),L.participants.forEach(function(W){var ie=I.remoteLevels.get(W.sid);ie&&W.setNetworkQualityLevel(ie.level,ie)}))}),I.start()}),this._networkQualitySignaling.on("teardown",function(){return L._teardownNetworkQualityMonitor()})},x.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},x.prototype.getStats=function(){var L=this;return this._peerConnectionManager.getStats().then(function(I){return new Map(Array.from(I).map(function(W){var ie=v(W,2),$=ie[0],ae=ie[1];return[$,Object.assign({},ae,{localAudioTrackStats:U(L,ae.localAudioTrackStats),localVideoTrackStats:U(L,ae.localVideoTrackStats),remoteAudioTrackStats:F(L,ae.remoteAudioTrackStats),remoteVideoTrackStats:F(L,ae.remoteVideoTrackStats)})]}))})},x}(a);function q(A,x){return x.reduce(function(L,I){var W=A.get(I.trackId);return W?[Object.assign({},I,{trackSid:W})].concat(L):L},[])}function U(A,x){return q(A._published,x)}function F(A,x){var L=new Map(Array.from(A._subscribed.entries()).map(function(I){var W=v(I,2),ie=W[0],$=W[1];return[$,ie]}));return q(L,x)}function G(A,x){var L=R(function(){A._publishNewLocalParticipantState()}),I=R(function(){var W=P(x.tracks,function(ie){return ie.trackTransceiver});A._peerConnectionManager.setTrackSenders(W)});x.on("trackAdded",I),x.on("trackRemoved",I),x.on("updated",L),A.on("stateChanged",function W(ie){ie==="disconnected"&&(x.removeListener("trackAdded",I),x.removeListener("trackRemoved",I),x.removeListener("updated",L),A.removeListener("stateChanged",W),x.disconnect())}),A.on("signalingConnectionStateChanged",function(){var W=A.localParticipant,ie=A.signalingConnectionState,$=W.identity,ae=W.sid;switch(ie){case"connected":W.connect(ae,$);break;case"reconnecting":W.reconnecting();break}})}function B(A,x){x.on("description",function(I){A._publishPeerConnectionState(I)}),x.dequeue("description"),x.on("candidates",function(I){A._publishPeerConnectionState(I)}),x.dequeue("candidates"),x.on("trackAdded",A._addTrackReceiver.bind(A)),x.dequeue("trackAdded"),x.getTrackReceivers().forEach(A._addTrackReceiver,A),x.on("connectionStateChanged",function(){A.emit("connectionStateChanged")}),x.on("iceConnectionStateChanged",function(){A.emit("iceConnectionStateChanged"),A.iceConnectionState==="failed"&&(A.localParticipant.networkQualityLevel!==null&&A.localParticipant.setNetworkQualityLevel(0),A.participants.forEach(function(L){L.networkQualityLevel!==null&&L.setNetworkQualityLevel(0)}))})}function z(A,x){x.on("message",A._update.bind(A)),x.on("stateChanged",function L(I,W){I==="disconnected"&&(A.state!=="disconnected"&&A._disconnect(W),x.removeListener("stateChanged",L)),A.emit("signalingConnectionStateChanged")})}function D(A,x,L){var I=new Map,W=!1,ie=setInterval(function(){A.getStats().then(function($){W=!W,$.forEach(function(ae,pe){var Te=new l(pe,ae,!0);x.publishEvent("quality","stats-report","info",{audioTrackStats:Te.remoteAudioTrackStats.map(function(Le,Pe){return Z(Le,ae.remoteAudioTrackStats[Pe],I)}),localAudioTrackStats:Te.localAudioTrackStats.map(function(Le,Pe){return Q(Le,ae.localAudioTrackStats[Pe],I)}),localVideoTrackStats:Te.localVideoTrackStats.map(function(Le,Pe){return Q(Le,ae.localVideoTrackStats[Pe],I)}),peerConnectionId:Te.peerConnectionId,videoTrackStats:Te.remoteVideoTrackStats.map(function(Le,Pe){return Z(Le,ae.remoteVideoTrackStats[Pe],I)})});var xe=P(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(Le){return Te[Le].map(function(Pe){var Oe=Pe.ssrc,_e=Pe.trackSid;return _e+"+"+Oe})}),Ee=C(Array.from(I.keys()),xe);if(Ee.forEach(function(Le){return I.delete(Le)}),W){var Ce=K(ae.activeIceCandidatePair,Te.peerConnectionId);x.publishEvent("quality","active-ice-candidate-pair","info",Ce)}})},function(){})},L);A.on("stateChanged",function $(ae){ae==="disconnected"&&(clearInterval(ie),A.removeListener("stateChanged",$))})}function j(A){var x=A._getTrackSidsToTrackSignalings();A._subscriptionFailures.forEach(function(L,I){var W=x.get(I);W&&(A._subscriptionFailures.delete(I),W.subscribeFailed(S(L.code,L.message)))}),x.forEach(function(L){var I=A._subscribed.get(L.sid);(!I||L.isSubscribed&&L.trackTransceiver.id!==I)&&L.setTrackTransceiver(null),I&&A._getTrackReceiver(I).then(function(W){return L.setTrackTransceiver(W)})})}function Q(A,x,L){var I=x.framesEncoded,W=x.packetsSent,ie=x.totalEncodeTime,$=x.totalPacketSendDelay,ae=Object.assign({},A),pe=A.trackSid+"+"+A.ssrc,Te=L.get(pe)||new Map;if(typeof ie=="number"&&typeof I=="number"){var xe=Te.get("avgEncodeDelay")||new k;xe.putSample(ie*1e3,I),ae.avgEncodeDelay=Math.round(xe.get()),Te.set("avgEncodeDelay",xe)}if(typeof $=="number"&&typeof W=="number"){var Ee=Te.get("avgPacketSendDelay")||new k;Ee.putSample($*1e3,W),ae.avgPacketSendDelay=Math.round(Ee.get()),Te.set("avgPacketSendDelay",Ee)}return L.set(pe,Te),ae}function Z(A,x,L){var I=x.estimatedPlayoutTimestamp,W=x.framesDecoded,ie=x.jitterBufferDelay,$=x.jitterBufferEmittedCount,ae=x.totalDecodeTime,pe=Object.assign({},A),Te=A.trackSid+"+"+A.ssrc,xe=L.get(Te)||new Map;if(typeof I=="number"&&(pe.estimatedPlayoutTimestamp=I),typeof W=="number"&&typeof ae=="number"){var Ee=xe.get("avgDecodeDelay")||new k;Ee.putSample(ae*1e3,W),pe.avgDecodeDelay=Math.round(Ee.get()),xe.set("avgDecodeDelay",Ee)}if(typeof ie=="number"&&typeof $=="number"){var Ce=xe.get("avgJitterBufferDelay")||new k;Ce.putSample(ie*1e3,$),pe.avgJitterBufferDelay=Math.round(Ce.get()),xe.set("avgJitterBufferDelay",Ce)}return L.set(Te,xe),pe}function K(A,x){return A=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:x,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},N(A||{},null)),A.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},N(A.localCandidate||{},null)),A.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},N(A.remoteCandidate||{},null)),A}return wi=O,wi}var Au,aS;function SO(){if(aS)return Au;aS=1;var d=Au&&Au.__extends||function(){var B=function(z,D){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,Q){j.__proto__=Q}||function(j,Q){for(var Z in Q)Object.prototype.hasOwnProperty.call(Q,Z)&&(j[Z]=Q[Z])},B(z,D)};return function(z,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");B(z,D);function j(){this.constructor=z}z.prototype=D===null?Object.create(D):(j.prototype=D.prototype,new j)}}(),v=ya(),h=vb(),u=Eb(),c=ht().reconnectBackoffConfig,i=Li(),a=ht(),o=a.SDK_NAME,l=a.SDK_VERSION,f=a.SDP_FORMAT,p=ut(),y=p.createBandwidthProfilePayload,g=p.createMediaSignalingPayload,w=p.createMediaWarningsPayload,_=p.createSubscribePayload,E=p.getUserAgent,b=p.isNonArrayObject,C=On(),N=C.createTwilioError,P=C.RoomCompletedError,R=C.SignalingConnectionError,k=C.SignalingServerBusyError,S=1,T=2,O={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},q=function(B){d(z,B);function z(D,j,Q,Z,K,A){var x=this;return A=Object.assign({Backoff:u,TwilioConnection:h,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:E()},A),x=B.call(this,"connecting",O)||this,Object.defineProperties(x,{_accessToken:{value:j},_automaticSubscription:{value:A.automaticSubscription},_bandwidthProfile:{value:A.bandwidthProfile},_dominantSpeaker:{value:A.dominantSpeaker},_adaptiveSimulcast:{value:A.adaptiveSimulcast},_eventObserver:{value:A.eventObserver,writable:!1},_renderHints:{value:A.renderHints},_iceServersStatus:{value:Array.isArray(A.iceServers)?"overrode":"acquire"},_localParticipant:{value:Q},_name:{value:D},_networkQuality:{value:b(A.networkQuality)||A.networkQuality},_notifyWarnings:{value:A.notifyWarnings},_options:{value:A},_peerConnectionManager:{value:Z},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new A.Backoff(c)},_session:{value:null,writable:!0},_trackPriority:{value:A.trackPriority},_trackSwitchOff:{value:A.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:A.userAgent},_wsServer:{value:K}}),G(x),x}return z.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:T};var D={connecting:"connect",syncing:"sync"}[this.state],j={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:D,version:T};return j.type==="connect"?(j.ice_servers=this._iceServersStatus,j.publisher={name:o,sdk_version:l,user_agent:this._userAgent},this._bandwidthProfile&&(j.bandwidth_profile=y(this._bandwidthProfile)),this._notifyWarnings&&(j.participant.media_warnings=w(this._notifyWarnings)),j.media_signaling=g(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints),j.subscribe=_(this._automaticSubscription),j.format=f,j.token=this._accessToken):j.type==="sync"?(j.session=this._session,j.token=this._accessToken):j.type==="update"&&(j.session=this._session),j},z.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:S}},z.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var D=this._createConnectOrSyncOrDisconnectMessage();D&&this._twilioConnection.sendMessage(D)},z.prototype.disconnect=function(D){return this.state!=="disconnected"?(this.preempt("disconnected",null,[D]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},z.prototype.publish=function(D){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:T},D)),!0;case"connecting":case"syncing":return this._updatesToSend.push(D),!0;case"disconnected":default:return!1}},z.prototype.publishEvent=function(D,j,Q,Z){this._eventObserver.emit("event",{group:D,name:j,level:Q,payload:Z})},z.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},z.prototype._setSession=function(D,j){this._session=D,this._sessionTimeoutMS=j*1e3},z.prototype._getReconnectTimer=function(){var D=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new i(function(){D._sessionTimer&&(D._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(j){D._reconnectBackoff.backoff(j)}))},z.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},z}(v);function U(B){return Array.from(B.reduce(function(z,D){var j=z.get(D.id)||D;return(!j.description&&D.description||j.description&&D.description&&D.description.revision>j.description.revision)&&(j.description=D.description),(!j.ice&&D.ice||j.ice&&D.ice&&D.ice.revision>j.ice.revision)&&(j.ice=D.ice),z.set(j.id,j),z},new Map).values())}function F(B){return B.reduce(function(z,D){return(!z.participant&&D.participant||z.participant&&D.participant&&D.participant.revision>z.participant.revision)&&(z.participant=D.participant),!z.peer_connections&&D.peer_connections?z.peer_connections=U(D.peer_connections):z.peer_connections&&D.peer_connections&&(z.peer_connections=U(z.peer_connections.concat(D.peer_connections))),z},{})}function G(B){function z(){if(B.state!=="disconnected"){B._twilioConnection&&B._twilioConnection.removeListener("message",j);var x=B._iceServersStatus,L=B._options,I=B._wsServer,W=B.state,ie=L.TwilioConnection,$=new ie(I,Object.assign({helloBody:W==="connecting"&&x==="acquire"?B._createIceMessage():B._createConnectOrSyncOrDisconnectMessage()},L));$.once("close",function(ae){ae===ie.CloseReason.LOCAL?D():D(new Error(ae))}),$.on("message",j),B._twilioConnection=$}}function D(x){if(B.state!=="disconnected"){if(!x){B.disconnect();return}var L=B._getReconnectTimer();if(!L){var I=x.message===h.CloseReason.BUSY?new k:new R;B.disconnect(I);return}B.state==="connected"&&B.preempt("syncing"),L.then(z)}}function j(x){if(B.state!=="disconnected"){if(x.type==="error"){B.disconnect(N(x.code,x.message));return}switch(B.state){case"connected":switch(x.type){case"connected":case"synced":case"update":case"warning":B.emit("message",x);return;case"disconnected":B.disconnect(x.status==="completed"?new P:null);return;default:return}case"connecting":switch(x.type){case"iced":B._options.onIced(x.ice_servers).then(function(){B._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":B._setSession(x.session,x.options.session_timeout),B.emit("connected",x),B.preempt("connected");return;case"synced":case"update":B._updatesReceived.push(x);return;case"disconnected":B.disconnect(x.status==="completed"?new P:null);return;default:return}case"syncing":switch(x.type){case"connected":case"update":B._updatesReceived.push(x);return;case"synced":B._clearReconnectTimer(),B.emit("message",x),B.preempt("connected");return;case"disconnected":B.disconnect(x.status==="completed"?new P:null);return;default:return}default:return}}}B.on("stateChanged",function x(L){switch(L){case"connected":{var I=B._updatesToSend.splice(0);I.length&&B.publish(F(I)),B._updatesReceived.splice(0).forEach(function(W){return B.emit("message",W)});return}case"disconnected":B._twilioConnection.removeListener("message",j),B.removeListener("stateChanged",x);return;case"syncing":return;default:return}});var Q=B._options,Z=B._iceServersStatus,K=Q.iceServers,A=Q.onIced;Z==="overrode"?A(K).then(z):z()}return Au=q,Au}var Pd,oS;function bO(){if(oS)return Pd;oS=1;var d=Zd(),v=G0(),h=gO(),u=SO(),c=On(),i=c.SignalingConnectionDisconnectedError,a=c.SignalingIncomingMessageInvalidError,o=ut(),l=o.flatMap,f=o.createRoomConnectEventPayload;function p(y,g,w,_,E,b){b=Object.assign({PeerConnectionManager:v,RoomV2:h,Transport:u},b);var C=E.video[0]&&E.video[0].adaptiveSimulcast===!0,N=b.PeerConnectionManager,P=b.RoomV2,R=b.Transport,k=b.iceServers,S=b.log,T=new N(_,E,b),O=l(w.tracks,function(G){return[G.trackTransceiver]});T.setTrackSenders(O);var q=new Error("Canceled"),U,F=new d(function(G,B,z){var D=function(Pe){return z()?(B(q),Promise.reject(q)):(S.debug("Got ICE servers:",Pe),b.iceServers=Pe,T.setConfiguration(b),T.createAndOffer().then(function(){if(z())throw B(q),q;S.debug("createAndOffer() succeeded."),T.dequeue("description")}).catch(function(Oe){throw S.error("createAndOffer() failed:",Oe),B(Oe),Oe}))},j=b.automaticSubscription,Q=b.bandwidthProfile,Z=b.dominantSpeaker,K=b.environment,A=b.eventObserver,x=b.loggerName,L=b.logLevel,I=b.name,W=b.networkMonitor,ie=b.networkQuality,$=b.notifyWarnings,ae=b.realm,pe=b.sdpSemantics,Te=!!Q,xe=!!Q,Ee=!!Q&&(b.clientTrackSwitchOffControl!=="disabled"||b.contentPreferencesMode!=="disabled"),Ce=Object.assign({adaptiveSimulcast:C,automaticSubscription:j,dominantSpeaker:Z,environment:K,eventObserver:A,loggerName:x,logLevel:L,networkMonitor:W,networkQuality:ie,notifyWarnings:$,iceServers:k,onIced:D,realm:ae,renderHints:Ee,sdpSemantics:pe,trackPriority:Te,trackSwitchOff:xe},Q?{bandwidthProfile:Q}:{});U=new R(I,y,w,T,g,Ce);var Le=f(b);A.emit("event",Le),U.once("connected",function(Pe){if(S.debug("Transport connected:",Pe),z()){B(q);return}var Oe=Pe.participant;if(!Oe){B(new a);return}G(new P(w,Pe,U,T,b))}),U.once("stateChanged",function(Pe,Oe){Pe==="disconnected"?(U=null,B(Oe||new i)):S.debug("Transport state changed:",Pe)})},function(){U&&(U.disconnect(),U=null)});return F.catch(function(){U&&(U.disconnect(),U=null),T.close()}),F}return Pd=p,Pd}var Lu,uS;function TO(){if(uS)return Lu;uS=1;var d=Lu&&Lu.__extends||function(){var u=function(c,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},u(c,i)};return function(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(c,i);function a(){this.constructor=c}c.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),v=ev(),h=function(u){d(c,u);function c(){var i=u.call(this)||this;return Object.defineProperties(i,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),i}return c.prototype.addTrack=function(i,a,o,l){l===void 0&&(l=null);var f=this._createLocalTrackPublicationSignaling(i,a,o,l);return this._trackSendersToPublications.set(i,f),this._publicationsToTrackSenders.set(f,i),u.prototype.addTrack.call(this,f),this},c.prototype.getPublication=function(i){return this._trackSendersToPublications.get(i)||null},c.prototype.getSender=function(i){return this._publicationsToTrackSenders.get(i)||null},c.prototype.removeTrack=function(i){var a=this._trackSendersToPublications.get(i);if(!a)return null;this._trackSendersToPublications.delete(i),this._publicationsToTrackSenders.delete(a);var o=u.prototype.removeTrack.call(this,a);return o&&a.stop(),a},c}(v);return Lu=h,Lu}var Pu,cS;function wO(){if(cS)return Pu;cS=1;var d=Pu&&Pu.__extends||function(){var c=function(i,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])},c(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),v=Nb(),h=function(c){d(i,c);function i(a,o,l){var f=this,p=a.clone();a.kind!=="data"&&(p.track.enabled=a.track.enabled),a=p;var y=a.kind==="data"?!0:a.track.enabled;return f=c.call(this,o,a.kind,y,l)||this,f.setTrackTransceiver(a),Object.defineProperties(f,{_updatedPriority:{value:l,writable:!0},id:{enumerable:!0,value:a.id}}),f}return Object.defineProperty(i.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),i.prototype.enable=function(a){return a=typeof a=="boolean"?a:!0,this.trackTransceiver.track.enabled=a,c.prototype.enable.call(this,a)},i.prototype.publishFailed=function(a){return u(this,a)&&this.emit("updated"),this},i.prototype.setPriority=function(a){return this._updatedPriority!==a&&(this._updatedPriority=a,this.emit("updated")),this},i.prototype.setSid=function(a){return this._error?this:c.prototype.setSid.call(this,a)},i.prototype.stop=function(){this.trackTransceiver.stop()},i}(v);function u(c,i){return c._sid!==null||c._error?!1:(c._error=i,!0)}return Pu=h,Pu}var Mu,lS;function kO(){if(lS)return Mu;lS=1;var d=Mu&&Mu.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=wO(),h=YS(),u=On().createTwilioError,c=function(i){d(a,i);function a(o,l,f,p,y){var g=i.call(this,o,l,f)||this;return Object.defineProperties(g,{_log:{value:y.log.createLog("default",g)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:p}}),g}return a.prototype.getState=function(){var o={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(o.audio_processor=this._noiseCancellationVendor),o},a.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},a.prototype.update=function(o){switch(o.state){case"ready":this.setSid(o.sid);break;case"failed":{var l=o.error;this.publishFailed(u(l.code,l.message));break}}return this},a.prototype.updateMediaStates=function(o){if(!o||!o.recordings||this._mediaStates.recordings===o.recordings)return this;switch(this._mediaStates.recordings=o.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",h.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings);break}return this},a}(v);return Mu=c,Mu}var xu,sS;function EO(){if(sS)return xu;sS=1;var d=xu&&xu.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(g[_]=w[_])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),v=TO(),h=kO(),u=ht().DEFAULT_LOG_LEVEL,c=qr(),i=ut(),a=i.buildLogLevels,o=i.isDeepEqual,l=function(f){d(p,f);function p(y,g,w){var _=this;w=Object.assign({logLevel:u,LocalTrackPublicationV2:h},w),_=f.call(this)||this;var E=a(w.logLevel);return Object.defineProperties(_,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:y},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:w.LocalTrackPublicationV2},_log:{value:w.log?w.log.createLog("default",_):new c("default",_,E,w.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:g},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),_}return p.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},p.prototype.setSignalingRegion=function(y){this._signalingRegion||(this._signalingRegion=y)},p.prototype.setBandwidthProfile=function(y){o(this._bandwidthProfile,y)||(this._bandwidthProfile=JSON.parse(JSON.stringify(y)),this._bandwidthProfileRevision++,this.didUpdate())},p.prototype.setAudioProcessors=function(y){this.audioProcessors=y},p.prototype.getParameters=function(){return this._encodingParameters},p.prototype.setParameters=function(y){return this._encodingParameters.update(y),this},p.prototype.update=function(y){return this._publishedRevision>=y.revision?this:(this._publishedRevision=y.revision,y.tracks.forEach(function(g){var w=this.tracks.get(g.id);w&&w.update(g)},this),this)},p.prototype.updateMediaStates=function(y){return!y||!y.tracks?this:(Array.from(this.tracks.values()).forEach(function(g){var w=y.tracks[g.sid];w&&g.updateMediaStates(w)}),this)},p.prototype._createLocalTrackPublicationSignaling=function(y,g,w,_){return new this._LocalTrackPublicationV2(y,g,w,_,{log:this._log})},p.prototype.addTrack=function(y,g,w,_){var E=this;f.prototype.addTrack.call(this,y,g,w,_);var b=this.getPublication(y),C=b.isEnabled,N=b.updatedPriority,P=function(){(C!==b.isEnabled||N!==b.updatedPriority)&&(E.didUpdate(),C=b.isEnabled,N=b.updatedPriority)};return b.on("updated",P),this._removeListener(b),this._removeListeners.set(b,function(){return b.removeListener("updated",P)}),this.didUpdate(),this},p.prototype._removeListener=function(y){var g=this._removeListeners.get(y);g&&g()},p.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(y){return y.getState()})}},p.prototype.didUpdate=function(){this._revision++,this.emit("updated")},p.prototype.removeTrack=function(y){var g=f.prototype.removeTrack.call(this,y);return g&&(y.removeClone(g.trackTransceiver),this._removeListener(g),this.didUpdate()),g},p.prototype.setNetworkQualityConfiguration=function(y){this.networkQualityConfiguration.update(y)},p.prototype.setPublisherHint=function(y,g){var w=Array.from(this.tracks.values()).find(function(_){return _.sid===y});return w?w.trackTransceiver.setPublisherHint(g):(this._log.warn("track:"+y+" not found"),Promise.resolve("UNKNOWN_TRACK"))},p}(v);return xu=l,xu}var Du,fS;function OO(){if(fS)return Du;fS=1;var d=Du&&Du.__extends||function(){var a=function(o,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])},a(o,l)};return function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(o,l);function f(){this.constructor=o}o.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),v=ev(),h=xb(),u=ya(),c={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},i=function(a){d(o,a);function o(){return a.call(this,"closed",c)||this}return o.prototype._close=function(l){return this.transition("closing",l),this.transition("closed",l),Promise.resolve(this)},o.prototype._connect=function(l,f,p,y,g){l.connect("PA00000000000000000000000000000000","test");var w="RM00000000000000000000000000000000",_=Promise.resolve(new h(l,w,g));return _.cancel=function(){},_},o.prototype._open=function(l){return this.transition("opening",l),this.transition("open",l),Promise.resolve(this)},o.prototype.close=function(){var l=this;return this.bracket("close",function(f){switch(l.state){case"closed":return l;case"open":return l._close(f);default:throw new Error('Unexpected Signaling state "'+l.state+'"')}})},o.prototype.connect=function(l,f,p,y,g){var w=this;return this.bracket("connect",function _(E){switch(w.state){case"closed":return w._open(E).then(_.bind(null,E));case"open":return w.releaseLockCompletely(E),w._connect(l,f,p,y,g);default:throw new Error('Unexpected Signaling state "'+w.state+'"')}})},o.prototype.createLocalParticipantSignaling=function(){return new v},o.prototype.open=function(){var l=this;return this.bracket("open",function(f){switch(l.state){case"closed":return l._open(f);case"open":return l;default:throw new Error('Unexpected Signaling state "'+l.state+'"')}})},o}(u);return Du=i,Du}var ju,dS;function RO(){if(dS)return ju;dS=1;var d=ju&&ju.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},i(a,o)};return function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),v=bO(),h=EO(),u=OO(),c=function(i){d(a,i);function a(o,l){var f=this;return l=Object.assign({createCancelableRoomSignalingPromise:v},l),f=i.call(this)||this,Object.defineProperties(f,{_createCancelableRoomSignalingPromise:{value:l.createCancelableRoomSignalingPromise},_options:{value:l},_wsServer:{value:o}}),f}return a.prototype._connect=function(o,l,f,p,y){return y=Object.assign({},this._options,y),this._createCancelableRoomSignalingPromise.bind(null,l,this._wsServer,o,f,p,y)},a.prototype.createLocalParticipantSignaling=function(o,l){return new h(o,l)},a}(u);return ju=c,ju}var Md,vS;function CO(){if(vS)return Md;vS=1;var d=Ci().MediaStreamTrack,v=Xt(),h=v.guessBrowser,u=v.guessBrowserVersion,c=v.isCodecSupported,i=h0(),a=p0(),o=O0(),l=mb(),f=R0(),p=ha(),y=p.LocalAudioTrack,g=p.LocalDataTrack,w=p.LocalVideoTrack,_=C0(),E=D0(),b=RO(),C=ut(),N=C.asLocalTrack,P=C.buildLogLevels,R=C.filterObject,k=C.isNonArrayObject,S=ht(),T=S.DEFAULT_ENVIRONMENT,O=S.DEFAULT_LOG_LEVEL,q=S.DEFAULT_LOGGER_NAME,U=S.DEFAULT_REALM,F=S.DEFAULT_REGION,G=S.WS_SERVER,B=S.SDK_NAME,z=S.SDK_VERSION,D=S.typeErrors,j=Zd(),Q=pb(),Z=qr(),K=yb().validateBandwidthProfile,A=h()==="safari"&&u(),x=0,L=!1,I=!1;if(A){var W=A.major,ie=A.minor;I=W<12||W===12&&ie<1}var $=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),ae=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function pe(Oe,_e){if(typeof _e>"u"&&(_e={}),!k(_e))return j.reject(D.INVALID_TYPE("options","object"));var je=_e.Log||Z,Ae=_e.loggerName||q,Qe=_e.logLevel||O,ee=P(Qe),oe="[connect #"+ ++x+"]",Y;try{Y=new je("default",oe,ee,Ae)}catch(te){return j.reject(te)}Te(_e,Y,$);var V=_e.preferredVideoCodecs==="auto";if(V&&(_e.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),_e.maxVideoBitrate&&V)return Y.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),j.reject(D.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));_e=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,environment:T,eventListener:null,insights:!0,LocalAudioTrack:y,LocalDataTrack:g,LocalParticipant:o,LocalVideoTrack:w,Log:je,MediaStreamTrack:d,loggerName:Ae,logLevel:Qe,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:U,region:F,signaling:b},R(_e));var J={};typeof _e.wsServerInsights=="string"&&(J.gateway=_e.wsServerInsights);var we=_e.insights?l:f,Re=new we(Oe,B,z,_e.environment,_e.realm,J),De=G(_e.environment,_e.region),Ke=new Q(Re,Date.now(),Y,_e.eventListener);if(_e=Object.assign({eventObserver:Ke,wsServer:De},_e),_e.log=Y,I&&!L&&Y.logLevel!=="error"&&Y.logLevel!=="off"&&(L=!0,Y.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof Oe!="string")return j.reject(D.INVALID_TYPE("token","string"));var Xe=Object.assign({},_e);if(delete Xe.name,"tracks"in _e){if(!Array.isArray(_e.tracks))return j.reject(D.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{_e.tracks=_e.tracks.map(function(te){return N(te,Xe)})}catch(te){return j.reject(te)}}var Be=K(_e.bandwidthProfile);if(Be)return j.reject(Be);_e.clientTrackSwitchOffControl="disabled",_e.contentPreferencesMode="disabled",_e.bandwidthProfile&&(_e.clientTrackSwitchOffControl="auto",_e.contentPreferencesMode="auto",_e.bandwidthProfile.video&&(Te(_e.bandwidthProfile.video,Y,ae),"maxTracks"in _e.bandwidthProfile.video?_e.clientTrackSwitchOffControl="disabled":_e.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?_e.clientTrackSwitchOffControl="manual":_e.clientTrackSwitchOffControl="auto","renderDimensions"in _e.bandwidthProfile.video?_e.contentPreferencesMode="disabled":_e.bandwidthProfile.video.contentPreferencesMode==="manual"?_e.contentPreferencesMode="manual":_e.contentPreferencesMode="auto"));var Lt=_e.signaling,tr=new Lt(_e.wsServer,_e);Y.info("Connecting to a Room"),Y.debug("Options:",_e);var Dt=new a({maxAudioBitrate:_e.maxAudioBitrate,maxVideoBitrate:_e.maxVideoBitrate},V),ke={audio:_e.preferredAudioCodecs.map(Pe),video:_e.preferredVideoCodecs.map(Pe)},me=new _(k(_e.networkQuality)?_e.networkQuality:{});["audio","video"].forEach(function(te){return ke[te].forEach(function(de){var ve=de.codec;return c(ve,te).then(function(be){return!be&&Y.warn("The preferred "+te+' codec "'+ve+'" will be ignored as it is not supported by the browser.')})})});var X=i(Le.bind(null,_e),xe.bind(null,tr,Y,Dt,me,_e),Ce.bind(null,Oe,_e,tr,Dt,ke),Ee.bind(null,_e));return X.then(function(te){return Re.connect(te.sid,te.localParticipant.sid),Y.info("Connected to Room:",te.toString()),Y.info("Room name:",te.name),Y.debug("Room:",te),te.once("disconnected",function(){return Re.disconnect()}),te},function(te){Re.disconnect(),X._isCanceled?Y.info("Attempt to connect to a Room was canceled"):Y.info("Error while connecting to a Room:",te)}),X}function Te(Oe,_e,je){je.forEach(function(Ae){var Qe=Ae.didWarn,ee=Ae.name,oe=Ae.newName,Y=Ae.shouldDelete;ee in Oe&&typeof Oe[ee]<"u"&&(oe&&Y&&(Oe[oe]=Oe[ee]),Y&&delete Oe[ee],!Qe&&!["error","off"].includes(_e.level)&&(_e.warn('The ConnectOptions "'+ee+'" is '+(oe?'deprecated and scheduled for removal. Please use "'+oe+'" instead.':"no longer applicable and will be ignored.")),Ae.didWarn=!0))})}function xe(Oe,_e,je,Ae,Qe,ee){var oe=Oe.createLocalParticipantSignaling(je,Ae);return _e.debug("Creating a new LocalParticipant:",oe),new Qe.LocalParticipant(oe,ee,Qe)}function Ee(Oe,_e,je){var Ae=new E(_e,je,Oe),Qe=Oe.log;return Qe.debug("Creating a new Room:",Ae),je.on("stateChanged",function ee(oe){oe==="disconnected"&&(Qe.info("Disconnected from Room:",Ae.toString()),je.removeListener("stateChanged",ee))}),Ae}function Ce(Oe,_e,je,Ae,Qe,ee){return _e.log.debug("Creating a new RoomSignaling"),je.connect(ee._signaling,Oe,Ae,Qe,_e)}function Le(Oe,_e){var je=Oe.log;return Oe.shouldStopLocalTracks=!Oe.tracks,Oe.shouldStopLocalTracks?je.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(je.info("Getting LocalTracks"),je.debug("Options:",Oe)),Oe.createLocalTracks(Oe).then(function(Qe){var ee=_e(Qe);return ee.catch(function(){Oe.shouldStopLocalTracks&&(je.info("The automatically acquired LocalTracks will now be stopped"),Qe.forEach(function(Y){Y.stop()}))}),ee})}function Pe(Oe){var _e=typeof Oe=="string"?{codec:Oe}:Oe;switch(_e.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},_e);case"vp8":return Object.assign({simulcast:!1},_e);default:return _e}}return Md=pe,Md}var xd,hS;function pS(){if(hS)return xd;hS=1;var d=ht(),v=d.DEFAULT_LOG_LEVEL,h=d.DEFAULT_LOGGER_NAME;function u(a,o){o=Object.assign({loggerName:h,logLevel:v},o);var l={};l.loggerName=o.loggerName,l.logLevel=o.logLevel,delete o.loggerName,delete o.logLevel;var f=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];f.forEach(function(y){y in o&&(l[y]=o[y],delete o[y])});var p=o.createLocalTracks;return delete o.createLocalTracks,l[a]=Object.keys(o).length>0?o:!0,p(l).then(function(y){return y[0]})}function c(a){return u("audio",a)}function i(a){return u("video",a)}return xd={audio:c,video:i},xd}var Dd,mS;function AO(){if(mS)return Dd;mS=1;var d=Xt(),v=d.guessBrowser,h=d.support,u=Bu().getSdpFormat,c=Ai(),i=c.isAndroid,a=c.isMobile,o=c.isNonChromiumEdge,l=c.rebrandedChromeBrowser,f=c.mobileWebKitBrowser,p=["crios","edg","edge","electron","headlesschrome"],y=["chrome","firefox"],g=["chrome","safari"],w=[];function _(){var E=v();if(!E)return!1;var b=l(E),C=f(E),N=i()?y:g;return!!E&&h()&&u()==="unified"&&(!b||p.includes(b))&&!o(E)&&(!C||w.includes(C))&&(!a()||N.includes(E))}return Dd=_,Dd}var jd=ol.exports,yS;function LO(){if(yS)return ol.exports;yS=1;var d=jd&&jd.__assign||function(){return d=Object.assign||function(w){for(var _,E=1,b=arguments.length;E<b;E++){_=arguments[E];for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(w[C]=_[C])}return w},d.apply(this,arguments)};Object.defineProperty(jd,"__esModule",{value:!0});var v=n0(),h=v0(),u={connect:CO(),createLocalAudioTrack:pS().audio,createLocalVideoTrack:pS().video,isSupported:AO()(),version:GS.version,Logger:FS(),LocalAudioTrack:ha().LocalAudioTrack,LocalDataTrack:ha().LocalDataTrack,LocalVideoTrack:ha().LocalVideoTrack};function c(w,_){var E=d({createLocalTracks:v.createLocalTracks},_);return u.connect(w,E)}function i(w){var _=d({createLocalTracks:v.createLocalTracks},w);return u.createLocalAudioTrack(_)}function a(w){var _=d({createLocalTracks:v.createLocalTracks},w);return u.createLocalVideoTrack(_)}var o=u.isSupported,l=u.version,f=u.Logger,p=u.LocalAudioTrack,y=u.LocalVideoTrack,g=u.LocalDataTrack;return ol.exports={connect:c,createLocalAudioTrack:i,createLocalVideoTrack:a,createLocalTracks:v.createLocalTracks,runPreflight:h.runPreflight,isSupported:o,version:l,Logger:f,LocalAudioTrack:p,LocalVideoTrack:y,LocalDataTrack:g},ol.exports}var PO=LO();const _S=Gw(PO),MO=({token:d,room:v})=>{const h=Ei.useRef(),u=Ei.useRef();function c(i,a){const o=document.createElement("div");o.setAttribute("id",a),o.appendChild(i.attach()),u.current.appendChild(o)}return Ei.useEffect(()=>(_S.connect(d,{video:!0,audio:!0,name:v}).then(i=>{console.log("connected to Twilio",i),_S.createLocalVideoTrack().then(l=>{h.current.appendChild(l.attach())});function a(l){console.log("Removing participant with identity",l.identity);const f=document.getElementById(l.identity);f.parentNode.removeChild(f)}function o(l){console.log("Adding a new Participant"),l.tracks.forEach(f=>{if(f.isSubscribed){const p=f.track;c(p,l.identity),console.log("Attached a track")}}),l.on("trackSubscribed",f=>{c(f,l.identity)})}i.participants.forEach(o),i.on("participantConnected",o),i.on("participantDisconnected",a)}).catch(i=>{console.log("An error happened",i)}),()=>{}),[d,v]),Yt.jsxs("div",{children:[Yt.jsxs("h1",{children:["Your are in room: ",v]}),Yt.jsx("div",{ref:h}),Yt.jsx("div",{ref:u})]})};function xO(){const[d,v]=Ei.useState(),[h,u]=Ei.useState(""),[c,i]=Ei.useState("room");return Yt.jsx("div",{className:"App",children:d?Yt.jsx(MO,{token:d,room:c}):Yt.jsx(ME,{setToken:v,setName:u,name:h,setRoom:i,room:c})})}tk.createRoot(document.getElementById("root")).render(Yt.jsx(Ei.StrictMode,{children:Yt.jsx(xO,{})}));
